# Release Notes: v1.8.2

**Release Date:** 2024-11-24
**Type:** Bug Fix

## ğŸ› Bug Fixes

### Fixed Inconsistent Environment Logging in `pull()`

**Issue**: The `pull()` command was not showing the repo-aware environment name in logs, causing confusion about which environment was being accessed.

**Example of the bug:**
```bash
# In repo lsh_test_repo
lsh push --env dev
# Output: Pushing .env to IPFS (lsh_test_repo_dev)... âœ…

lsh pull --env dev
# Output: Pulling .env (dev) from IPFS... âŒ (should show lsh_test_repo_dev)
```

**Root Cause**: The `pull()` method at line 308 was logging the raw `environment` parameter instead of calling `getRepoAwareEnvironment()` like `push()` does.

**Fix**:
1. Updated `pull()` to use `getRepoAwareEnvironment()` for logging (line 308)
2. Improved error message to show the effective environment name and suggest helpful commands (lines 318-321)

```typescript
// Before:
logger.info(`Pulling ${filename} (${environment}) from IPFS...`);

// After:
logger.info(`Pulling ${filename} (${this.getRepoAwareEnvironment(environment)}) from IPFS...`);
```

### Improved Error Messages

When no secrets are found, the error now shows:
- The **effective environment name** (repo-aware)
- Helpful tips to check available environments or push secrets first

```
âŒ Failed to pull secrets: No secrets found for environment: lsh_test_repo_dev

ğŸ’¡ Tip: Check available environments with: lsh env
   Or push secrets first with: lsh push --env dev
```

## ğŸ“Š Impact

This fix helps users understand:
- What environment name is actually being used (repo-aware vs raw)
- Why their pull might be failing (wrong environment)
- How to fix the issue (check environments or push first)

## ğŸ”§ User Experience Improvement

**Before (confusing):**
```bash
$ lsh push --env dev
Pushing .env to IPFS (lsh_test_repo_dev)...  # Repo-aware

$ lsh pull --env dev
Pulling .env (dev) from IPFS...  # Not repo-aware âŒ
No secrets found for environment: dev  # Confusing!
```

**After (consistent):**
```bash
$ lsh push --env dev
Pushing .env to IPFS (lsh_test_repo_dev)...  # Repo-aware

$ lsh pull --env dev
Pulling .env (lsh_test_repo_dev) from IPFS...  # Repo-aware âœ…
```

## ğŸ“¦ Installation

```bash
npm install -g lsh-framework@1.8.2
```

Or update existing installation:
```bash
npm update -g lsh-framework
```

## ğŸ™ Credits

Thanks to the user who caught this inconsistency during multi-host sync testing!

## ğŸ’­ Future Consideration

User feedback suggests a potential design improvement:
- **Current**: In repo, `--env dev` â†’ `lsh_test_repo_dev`
- **Suggested**: No `--env` â†’ `lsh_test_repo` (use repo name as default env)

This would be a breaking change and will be considered for v2.0.

## Related

- v1.8.0: Added `--force-rekey` feature
- v1.8.1: Fixed double repo-prefix bug in force-rekey
- v1.8.2: Fixed environment logging inconsistency
