# Release Notes: v2.1.1

**Release Date:** 2024-11-24
**Type:** Patch Release - UX Enhancement

## ğŸ¯ Enhancement: Storacha Integration in Init Wizard

### What's New

Added Storacha IPFS network sync as an option in the `lsh init` interactive setup wizard, making first-time configuration even easier.

### Changes

**Updated `lsh init` command:**
- âœ… Added `--storacha` flag for quick setup
- âœ… Added Storacha as the **default** option in interactive wizard
- âœ… Interactive email prompt for Storacha authentication
- âœ… Clear next-steps instructions for completing setup

### Usage

```bash
# Interactive wizard (Storacha is now the default choice)
lsh init

# Or skip directly to Storacha setup
lsh init --storacha

# Output:
ğŸ” LSH Secrets Manager - Setup Wizard
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Choose storage backend:
â¯ ğŸŒ Storacha (IPFS network, zero-config, recommended)
  â˜ï¸  Supabase (cloud-hosted, team collaboration)
  ğŸ’¾ Local encryption (file-based, no cloud sync)
  ğŸ˜ Self-hosted PostgreSQL
```

### What This Improves

**Before v2.1.1:**
```bash
lsh init                    # Configure storage
# Then separately:
lsh storacha login email@example.com
```

**After v2.1.1:**
```bash
lsh init                    # One command, guided setup!
# Wizard prompts for email and explains next steps
```

### New Storage Options Order

The init wizard now presents options in this order (by recommendation):
1. **ğŸŒ Storacha** (IPFS network, zero-config) - **DEFAULT**
2. â˜ï¸  Supabase (cloud-hosted, team collaboration)
3. ğŸ’¾ Local encryption (file-based, no cloud sync)
4. ğŸ˜ Self-hosted PostgreSQL

### Technical Details

**Files Changed:**
- `src/commands/init.ts` - Added Storacha configuration flow
  - New `configureStoracha()` function
  - Updated storage type choices
  - Enhanced success message with Storacha instructions

**Configuration:**
- Sets `LSH_STORACHA_ENABLED=true` in `.env`
- Generates encryption key automatically
- Prompts for email (for post-setup authentication)

### Next Steps After Init

When choosing Storacha, the wizard now shows:
```bash
ğŸš€ Next steps:

   1. Authenticate with Storacha:
      lsh storacha login your@email.com

   2. Push your secrets:
      lsh push --env dev
      (Automatically uploads to IPFS network)

   3. On another machine:
      lsh init --storacha
      lsh storacha login your@email.com
      lsh pull --env dev
      (Automatically downloads from IPFS network)
```

## ğŸ“¦ Installation

```bash
# Upgrade from v2.1.0
npm update -g lsh-framework@2.1.1

# Verify
lsh --version  # Should show 2.1.1
```

## ğŸ”„ Migration from v2.1.0

No migration required! This is a purely additive change to the init wizard. All existing functionality remains unchanged.

## ğŸ†š Comparison with v2.1.0

| Feature | v2.1.0 | v2.1.1 |
|---------|--------|--------|
| Storacha network sync | âœ… Available | âœ… Available |
| `lsh storacha` commands | âœ… Manual | âœ… Manual |
| **Init wizard integration** | âŒ No | âœ… **Yes** |
| Default storage in wizard | Supabase | **Storacha** |

## ğŸ“š Documentation

Updated documentation:
- `lsh init --help` now shows `--storacha` option
- Interactive wizard displays Storacha as recommended option

## ğŸ› Known Issues

None.

## ğŸ“Š Test Results

All tests passing:
- âœ… Storacha tests: 12/12 passed
- âœ… Full test suite: 477/505 passed

## ğŸ”® Future Enhancements

- Automatic authentication during init (if possible)
- Space selection during init
- Integration test for full init â†’ push â†’ pull flow

## ğŸ“ˆ Full Changelog

**From v2.1.0 â†’ v2.1.1:**

### Added
- Storacha option in `lsh init` interactive wizard
- `--storacha` flag for `lsh init` command
- Email prompt during Storacha setup
- Enhanced success message with Storacha-specific instructions

### Changed
- Default storage option in wizard changed from Supabase to Storacha
- Storage options reordered by recommendation

### Fixed
- None (no bugs fixed, purely enhancement)

**GitHub**: https://github.com/gwicho38/lsh/compare/v2.1.0...v2.1.1

---

**Better UX, same powerful features!** ğŸ‰
