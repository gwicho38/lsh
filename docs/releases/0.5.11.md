# Release Notes - Version 0.5.11

**Release Date:** 2025-10-15
**Previous Version:** 0.5.10

## Summary

This release adds `create` and `delete` commands to the secrets management functionality, making it easier to manage .env files from the command line.

## Features

### New Secrets Commands

#### `lsh lib secrets create`

Create a new .env file with optional template variables.

**Usage:**
```bash
# Create empty .env file
lsh lib secrets create

# Create .env file at specific path
lsh lib secrets create -f path/to/.env

# Create with template variables
lsh lib secrets create --template

# Create custom file with template
lsh lib secrets create -f .env.production --template
```

**Features:**
- ‚úÖ Creates new .env file at specified path (default: `.env`)
- ‚úÖ Prevents overwriting existing files
- ‚úÖ Optional template with common environment variables
- ‚úÖ Shows next steps after creation
- ‚úÖ Provides helpful error messages

**Template Content:**
```bash
# Environment Configuration
# Generated by LSH Secrets Manager

# Application
NODE_ENV=development
PORT=3000

# Database
DATABASE_URL=

# API Keys
API_KEY=

# LSH Secrets (for cross-machine sync)
# LSH_SECRETS_KEY=

# Add your environment variables below
```

#### `lsh lib secrets delete`

Delete .env file with confirmation dialog for safety.

**Usage:**
```bash
# Delete with confirmation prompt
lsh lib secrets delete

# Delete specific file with confirmation
lsh lib secrets delete -f path/to/.env

# Delete without confirmation (use with caution!)
lsh lib secrets delete --yes
lsh lib secrets delete -f .env.test -y
```

**Safety Features:**
- ‚ö†Ô∏è  Requires typing full absolute path to confirm deletion
- ‚ö†Ô∏è  Shows clear warning before deletion
- ‚ö†Ô∏è  Can be bypassed with `--yes` flag for scripts
- ‚úÖ Checks if file exists before attempting deletion
- ‚úÖ Reminds user about cloud backup after deletion

**Confirmation Flow:**
```bash
$ lsh lib secrets delete

‚ö†Ô∏è  WARNING: You are about to delete a .env file!

File: /Users/you/project/.env

To confirm deletion, please type the full path of the file:
Expected: /Users/you/project/.env

Enter path to confirm: /Users/you/project/.env

‚úÖ Deleted: /Users/you/project/.env

üí° Tip: You can still pull from cloud if you pushed previously:
   lsh lib secrets pull -f .env
```

## Examples

### Create and Push Workflow

```bash
# Create new .env with template
lsh lib secrets create --template

# Edit the file
vim .env

# Push to cloud
lsh lib secrets push

# On another machine
lsh lib secrets pull
```

### Multi-Environment Setup

```bash
# Create different environment files
lsh lib secrets create -f .env.development --template
lsh lib secrets create -f .env.staging --template
lsh lib secrets create -f .env.production --template

# Push each to cloud
lsh lib secrets push -f .env.development -e dev
lsh lib secrets push -f .env.staging -e staging
lsh lib secrets push -f .env.production -e prod

# Pull specific environment
lsh lib secrets pull -f .env.production -e prod
```

### Safe Deletion

```bash
# Delete with confirmation
lsh lib secrets delete -f .env.old

# Delete in scripts (no prompt)
lsh lib secrets delete -f .env.temp --yes
```

## Changes

### Modified Files

- `src/services/secrets/secrets.ts`
  - Added `create` command with template option
  - Added `delete` command with confirmation dialog
  - Imported required modules (fs, path, readline)

### Command Options

**create:**
- `-f, --file <path>`: Path to .env file (default: `.env`)
- `-t, --template`: Create with common template variables

**delete:**
- `-f, --file <path>`: Path to .env file (default: `.env`)
- `-y, --yes`: Skip confirmation prompt

## Use Cases

### 1. New Project Setup
```bash
cd my-new-project
lsh lib secrets create --template
# Edit .env with your values
lsh lib secrets push
```

### 2. Environment File Management
```bash
# Create environment-specific files
lsh lib secrets create -f .env.test --template
lsh lib secrets create -f .env.prod --template

# Push to cloud with different names
lsh lib secrets push -f .env.test -e test
lsh lib secrets push -f .env.prod -e prod
```

### 3. Cleanup Old Files
```bash
# Safe deletion with confirmation
lsh lib secrets delete -f .env.backup

# Batch delete in script
for env in old-*.env; do
  lsh lib secrets delete -f "$env" --yes
done
```

## Security Considerations

### Create Command
- Does not overwrite existing files (prevents accidental data loss)
- Template includes LSH_SECRETS_KEY placeholder
- Encourages best practices with comments

### Delete Command
- Requires full path confirmation by default
- Shows clear warnings
- Reminds about cloud backup availability
- `--yes` flag available for automated workflows

## Installation

```bash
npm install -g lsh-framework@latest
```

Or update existing installation:
```bash
lsh self update
```

## Updating

```bash
lsh self update
```

## Version Diff (0.5.10 ‚Üí 0.5.11)

### New Features
- `lsh lib secrets create` - Create .env files with optional template
- `lsh lib secrets delete` - Delete .env files with confirmation

### Improvements
- Easier .env file management from CLI
- Template for common environment variables
- Safety features for file deletion
- Better workflow for multi-environment setups

### Security
- Confirmation dialog prevents accidental deletions
- Template encourages proper secret management
- Clear warnings for destructive operations

## Breaking Changes

None - this release adds new functionality without changing existing commands.

## What's Next

Future enhancements for secrets management:
- Edit command for modifying .env files
- Diff command to compare local vs cloud
- Sync command to keep files synchronized
- Backup/restore functionality
