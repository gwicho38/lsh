# Release Notes - Version 0.5.9

**Release Date:** 2025-10-15
**Previous Version:** 0.5.8

## Summary

This release continues the CLI reorganization by moving the `api` command under `lib` and nesting `theme` and `zsh-import` commands under `self`, creating a more intuitive and cohesive command structure.

## Breaking Changes

### Command Path Updates

**IMPORTANT:** Additional command paths have changed. Users and scripts will need to update.

#### API Commands
**Before (v0.5.8):**
```bash
lsh api start
lsh api key
lsh api test
```

**After (v0.5.9):**
```bash
lsh lib api start
lsh lib api key
lsh lib api test
```

#### Theme Commands
**Before (v0.5.8):**
```bash
lsh theme list
lsh theme import robbyrussell
lsh theme apply agnoster
```

**After (v0.5.9):**
```bash
lsh self theme list
lsh self theme import robbyrussell
lsh self theme apply agnoster
```

#### ZSH Import Commands
**Before (v0.5.8):**
```bash
lsh zsh-import aliases
lsh zsh-import functions
lsh zsh-import exports
```

**After (v0.5.9):**
```bash
lsh self zsh-import aliases
lsh self zsh-import functions
lsh self zsh-import exports
```

## Features

### Improved Command Organization

**Rationale:**

1. **API under `lib`**: The API server is a library service that integrates with the daemon, making `lsh lib api` more intuitive than top-level `lsh api`

2. **Theme under `self`**: Themes customize your personal LSH experience, making them a natural fit under self-management rather than top-level

3. **ZSH Import under `self`**: Importing ZSH configurations is a one-time setup task that customizes your LSH installation, aligning with other self-management commands

**New Command Structure:**
```
lsh
├── -i (interactive shell)
├── -c (command execution)
├── config
├── zsh (compatibility)
├── repl
├── self
│   ├── update
│   ├── version
│   ├── uninstall
│   ├── theme
│   │   ├── list
│   │   ├── import
│   │   └── apply
│   └── zsh-import
│       ├── aliases
│       ├── functions
│       └── exports
└── lib
    ├── api
    │   ├── start
    │   ├── key
    │   └── test
    ├── daemon
    ├── cron
    ├── secrets
    └── supabase
```

## Migration Guide

### 1. Update API Server Commands

```bash
# Old
lsh api start --port 3000
lsh api key
lsh api test

# New
lsh lib api start --port 3000
lsh lib api key
lsh lib api test
```

### 2. Update Theme Commands

```bash
# Old
lsh theme list
lsh theme import robbyrussell
lsh theme apply agnoster

# New
lsh self theme list
lsh self theme import robbyrussell
lsh self theme apply agnoster
```

### 3. Update ZSH Import Commands

```bash
# Old
lsh zsh-import aliases
lsh zsh-import functions --preview
lsh zsh-import exports

# New
lsh self zsh-import aliases
lsh self zsh-import functions --preview
lsh self zsh-import exports
```

### 4. Update Scripts and Aliases

```bash
# Old aliases
alias lsh-api='lsh api start'
alias lsh-theme='lsh theme list'

# New aliases
alias lsh-api='lsh lib api start'
alias lsh-theme='lsh self theme list'
```

### 5. Update CI/CD Pipelines

```yaml
# Old
- name: Start API
  run: lsh api start --port 3030

# New
- name: Start API
  run: lsh lib api start --port 3030
```

## Changes

### Modified Files

- `src/cli.ts`
  - Moved `registerApiCommands()` to register under `libCommand`
  - Moved `registerThemeCommands()` to register under `selfCommand`
  - Moved `registerZshImportCommands()` to register under `selfCommand`
  - Updated help text to reflect new command structure
  - Enhanced examples with new command paths

## Examples

### Complete Command Reference

**Self-Management Commands:**
```bash
# Version and updates
lsh self update                     # Update LSH to latest
lsh self version                    # Show version info
lsh self uninstall                  # Uninstall LSH

# Customization
lsh self theme list                 # List available themes
lsh self theme import robbyrussell  # Import Oh-My-Zsh theme
lsh self theme apply agnoster       # Apply theme
lsh self theme current              # Show current theme

# ZSH Migration
lsh self zsh-import aliases         # Import ZSH aliases
lsh self zsh-import functions       # Import ZSH functions
lsh self zsh-import exports         # Import ZSH exports
```

**Library Service Commands:**
```bash
# API Server
lsh lib api start                   # Start API server
lsh lib api key                     # Generate API key
lsh lib api test                    # Test connection
lsh lib api example -l python       # Python client example

# Daemon & Jobs
lsh lib daemon start                # Start daemon
lsh lib daemon status               # Check status
lsh lib daemon job list             # List jobs

# Secrets Management
lsh lib secrets push                # Push secrets
lsh lib secrets pull                # Pull secrets
lsh lib secrets list                # List environments

# Cron Jobs
lsh lib cron list                   # List cron jobs
lsh lib cron add                    # Add cron job

# Database
lsh lib supabase status             # Check Supabase
```

## Installation

```bash
npm install -g lsh-framework@latest
```

Or update existing installation:
```bash
lsh self update
```

## Updating

```bash
lsh self update
```

## Version Diff (0.5.8 → 0.5.9)

### Breaking Changes
- `lsh api` → `lsh lib api`
- `lsh theme` → `lsh self theme`
- `lsh zsh-import` → `lsh self zsh-import`

### Improvements
- More logical command grouping
- API with other library services
- Theme and ZSH import as self-management tasks
- Cleaner top-level command structure
- Better command discoverability

### Benefits
- **Logical Organization**: Commands grouped by purpose (self-management vs library services)
- **Reduced Top-Level Clutter**: Only essential commands at top level
- **Intuitive Navigation**: Related commands nested together
- **Future-Proof**: Clear pattern for adding new commands

## Rollback

If you need to rollback to v0.5.8:
```bash
npm install -g lsh-framework@0.5.8
```

## What's Next

This completes the major CLI restructuring. Future releases will focus on:
- Feature enhancements
- Performance improvements
- Additional library services
- Plugin system development
