/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => main_default
});
module.exports = __toCommonJS(main_exports);

// src/taskmarker-Plugin.ts
var import_obsidian4 = require("obsidian");

// src/taskmarker-TaskMarker.ts
var import_obsidian = require("obsidian");
var TaskMarker = class {
  constructor(app) {
    this.app = app;
    this.app = app;
    this.anyListItem = new RegExp(/^([\s>]*[-+*] )([^\\[].*)$/);
    this.anyTaskMark = new RegExp(/^([\s>]*[-+*] \[)(.)(\] .*)$/);
    this.blockQuote = new RegExp(/^(\s*>[\s>]*)(.*)$/);
    this.blockRef = new RegExp(/^(.*?)( \^[A-Za-z0-9-]+)?$/);
    this.continuation = new RegExp(/^( {2,}|\t)/);
    this.stripTask = new RegExp(/^([\s>]*[-+*]) \[.\] (.*)$/);
  }
  updateSettings(settings) {
    this.settings = settings;
    let momentMatchString = null;
    if (settings.appendDateFormat) {
      const literals = [];
      const regex1 = RegExp("(\\[.*?\\]\\]?)", "g");
      let match;
      let i = 0;
      momentMatchString = settings.appendDateFormat;
      while ((match = regex1.exec(momentMatchString)) !== null) {
        momentMatchString = momentMatchString.replace(
          match[0],
          `%$${i}$%`
        );
        literals.push(
          match[0].substring(1, match[0].length - 1).replace(/\(/g, "\\(").replace(/\)/g, "\\)").replace(/\[/g, "\\[").replace(/\]/g, "\\]")
        );
        i++;
      }
      momentMatchString = momentMatchString.replace("YYYY", "\\d{4}").replace("YY", "\\d{2}").replace("DD", "\\d{2}").replace("D", "\\d{1,2}").replace("MMM", "[A-Za-z]{3}").replace("MM", "\\d{2}").replace("M", "\\d{1,2}").replace("HH", "\\d{2}").replace("H", "\\d{1,2}").replace("hh", "\\d{2}").replace("h", "\\d{1,2}").replace("mm", "\\d{2}").replace("m", "\\d{1,2}");
      if (literals.length > 0) {
        for (let i2 = 0; i2 < literals.length; i2++) {
          momentMatchString = momentMatchString.replace(
            `%$${i2}$%`,
            literals[i2]
          );
        }
      }
      momentMatchString = `\\s*${momentMatchString}\\s*`;
    }
    if (settings.appendTextFormatMark) {
      const literals = [];
      const regex1 = RegExp("(\\[.*?\\]\\]?)", "g");
      let match;
      let i = 0;
      momentMatchString = settings.appendTextFormatMark;
      while ((match = regex1.exec(momentMatchString)) !== null) {
        momentMatchString = momentMatchString.replace(
          match[0],
          `%$${i}$%`
        );
        literals.push(
          match[0].substring(1, match[0].length - 1).replace(/\(/g, "\\(").replace(/\)/g, "\\)").replace(/\[/g, "\\[").replace(/\]/g, "\\]")
        );
        i++;
      }
      momentMatchString = momentMatchString.replace("YYYY", "\\d{4}").replace("YY", "\\d{2}").replace("DD", "\\d{2}").replace("D", "\\d{1,2}").replace("MMM", "[A-Za-z]{3}").replace("MM", "\\d{2}").replace("M", "\\d{1,2}").replace("HH", "\\d{2}").replace("H", "\\d{1,2}").replace("hh", "\\d{2}").replace("h", "\\d{1,2}").replace("mm", "\\d{2}").replace("m", "\\d{1,2}");
      if (literals.length > 0) {
        for (let i2 = 0; i2 < literals.length; i2++) {
          momentMatchString = momentMatchString.replace(
            `%$${i2}$%`,
            literals[i2]
          );
        }
      }
      momentMatchString = `\\s*${momentMatchString}\\s*`;
    }
    if (settings.appendTextFormatMarkRow2) {
      const literals = [];
      const regex1 = RegExp("(\\[.*?\\]\\]?)", "g");
      let match;
      let i = 0;
      momentMatchString = settings.appendTextFormatMarkRow2;
      while ((match = regex1.exec(momentMatchString)) !== null) {
        momentMatchString = momentMatchString.replace(
          match[0],
          `%$${i}$%`
        );
        literals.push(
          match[0].substring(1, match[0].length - 1).replace(/\(/g, "\\(").replace(/\)/g, "\\)").replace(/\[/g, "\\[").replace(/\]/g, "\\]")
        );
        i++;
      }
      momentMatchString = momentMatchString.replace("YYYY", "\\d{4}").replace("YY", "\\d{2}").replace("DD", "\\d{2}").replace("D", "\\d{1,2}").replace("MMM", "[A-Za-z]{3}").replace("MM", "\\d{2}").replace("M", "\\d{1,2}").replace("HH", "\\d{2}").replace("H", "\\d{1,2}").replace("hh", "\\d{2}").replace("h", "\\d{1,2}").replace("mm", "\\d{2}").replace("m", "\\d{1,2}");
      if (literals.length > 0) {
        for (let i2 = 0; i2 < literals.length; i2++) {
          momentMatchString = momentMatchString.replace(
            `%$${i2}$%`,
            literals[i2]
          );
        }
      }
      momentMatchString = `\\s*${momentMatchString}\\s*`;
    }
    if (settings.appendTextFormatCreation) {
      const literals = [];
      const regex1 = RegExp("(\\[.*?\\]\\]?)", "g");
      let match;
      let i = 0;
      momentMatchString = settings.appendTextFormatCreation;
      while ((match = regex1.exec(momentMatchString)) !== null) {
        momentMatchString = momentMatchString.replace(
          match[0],
          `%$${i}$%`
        );
        literals.push(
          match[0].substring(1, match[0].length - 1).replace(/\(/g, "\\(").replace(/\)/g, "\\)").replace(/\[/g, "\\[").replace(/\]/g, "\\]")
        );
        i++;
      }
      momentMatchString = momentMatchString.replace("YYYY", "\\d{4}").replace("YY", "\\d{2}").replace("DD", "\\d{2}").replace("D", "\\d{1,2}").replace("MMM", "[A-Za-z]{3}").replace("MM", "\\d{2}").replace("M", "\\d{1,2}").replace("HH", "\\d{2}").replace("H", "\\d{1,2}").replace("hh", "\\d{2}").replace("h", "\\d{1,2}").replace("mm", "\\d{2}").replace("m", "\\d{1,2}");
      if (literals.length > 0) {
        for (let i2 = 0; i2 < literals.length; i2++) {
          momentMatchString = momentMatchString.replace(
            `%$${i2}$%`,
            literals[i2]
          );
        }
      }
      momentMatchString = `\\s*${momentMatchString}\\s*`;
    }
    if (settings.appendTextFormatAppend) {
      const literals = [];
      const regex1 = RegExp("(\\[.*?\\]\\]?)", "g");
      let match;
      let i = 0;
      momentMatchString = settings.appendTextFormatAppend;
      while ((match = regex1.exec(momentMatchString)) !== null) {
        momentMatchString = momentMatchString.replace(
          match[0],
          `%$${i}$%`
        );
        literals.push(
          match[0].substring(1, match[0].length - 1).replace(/\(/g, "\\(").replace(/\)/g, "\\)").replace(/\[/g, "\\[").replace(/\]/g, "\\]")
        );
        i++;
      }
      momentMatchString = momentMatchString.replace("YYYY", "\\d{4}").replace("YY", "\\d{2}").replace("DD", "\\d{2}").replace("D", "\\d{1,2}").replace("MMM", "[A-Za-z]{3}").replace("MM", "\\d{2}").replace("M", "\\d{1,2}").replace("HH", "\\d{2}").replace("H", "\\d{1,2}").replace("hh", "\\d{2}").replace("h", "\\d{1,2}").replace("mm", "\\d{2}").replace("m", "\\d{1,2}");
      if (literals.length > 0) {
        for (let i2 = 0; i2 < literals.length; i2++) {
          momentMatchString = momentMatchString.replace(
            `%$${i2}$%`,
            literals[i2]
          );
        }
      }
      momentMatchString = `\\s*${momentMatchString}\\s*`;
    }
    if (settings.appendTextFormatAppendText2) {
      const literals = [];
      const regex1 = RegExp("(\\[.*?\\]\\]?)", "g");
      let match;
      let i = 0;
      momentMatchString = settings.appendTextFormatAppendText2;
      while ((match = regex1.exec(momentMatchString)) !== null) {
        momentMatchString = momentMatchString.replace(
          match[0],
          `%$${i}$%`
        );
        literals.push(
          match[0].substring(1, match[0].length - 1).replace(/\(/g, "\\(").replace(/\)/g, "\\)").replace(/\[/g, "\\[").replace(/\]/g, "\\]")
        );
        i++;
      }
      momentMatchString = momentMatchString.replace("YYYY", "\\d{4}").replace("YY", "\\d{2}").replace("DD", "\\d{2}").replace("D", "\\d{1,2}").replace("MMM", "[A-Za-z]{3}").replace("MM", "\\d{2}").replace("M", "\\d{1,2}").replace("HH", "\\d{2}").replace("H", "\\d{1,2}").replace("hh", "\\d{2}").replace("h", "\\d{1,2}").replace("mm", "\\d{2}").replace("m", "\\d{1,2}");
      if (literals.length > 0) {
        for (let i2 = 0; i2 < literals.length; i2++) {
          momentMatchString = momentMatchString.replace(
            `%$${i2}$%`,
            literals[i2]
          );
        }
      }
      momentMatchString = `\\s*${momentMatchString}\\s*`;
    }
    if (settings.appendTextFormatAppendText3) {
      const literals = [];
      const regex1 = RegExp("(\\[.*?\\]\\]?)", "g");
      let match;
      let i = 0;
      momentMatchString = settings.appendTextFormatAppendText3;
      while ((match = regex1.exec(momentMatchString)) !== null) {
        momentMatchString = momentMatchString.replace(
          match[0],
          `%$${i}$%`
        );
        literals.push(
          match[0].substring(1, match[0].length - 1).replace(/\(/g, "\\(").replace(/\)/g, "\\)").replace(/\[/g, "\\[").replace(/\]/g, "\\]")
        );
        i++;
      }
      momentMatchString = momentMatchString.replace("YYYY", "\\d{4}").replace("YY", "\\d{2}").replace("DD", "\\d{2}").replace("D", "\\d{1,2}").replace("MMM", "[A-Za-z]{3}").replace("MM", "\\d{2}").replace("M", "\\d{1,2}").replace("HH", "\\d{2}").replace("H", "\\d{1,2}").replace("hh", "\\d{2}").replace("h", "\\d{1,2}").replace("mm", "\\d{2}").replace("m", "\\d{1,2}");
      if (literals.length > 0) {
        for (let i2 = 0; i2 < literals.length; i2++) {
          momentMatchString = momentMatchString.replace(
            `%$${i2}$%`,
            literals[i2]
          );
        }
      }
      momentMatchString = `\\s*${momentMatchString}\\s*`;
    }
    const completedTasks = (this.settings.onlyLowercaseX ? "x" : "xX") + (this.settings.supportCanceledTasks ? "-" : "");
    if (this.settings.incompleteTaskValues.indexOf(" ") < 0) {
      this.settings.incompleteTaskValues = " " + this.settings.incompleteTaskValues;
    }
    const rightClickTaskMenu = this.settings.rightClickComplete || this.settings.rightClickMark || this.settings.rightClickCycle || this.settings.rightClickCycleList1 || this.settings.rightClickCycleList2 || this.settings.rightClickCycleList3 || this.settings.rightClickCycleReversely || this.settings.rightClickCreate || this.settings.rightClickAppend || this.settings.rightClickAppendText2 || this.settings.rightClickAppendText3 || this.settings.rightClickAppendTextAuto || // this.settings.rightClickMove ||
    this.settings.rightClickResetTask || this.settings.rightClickResetAll || this.settings.rightClickToggleAll;
    this.initSettings = {
      removeRegExp: this.tryCreateRemoveRegex(
        this.settings.removeExpression
      ),
      resetRegExp: this.tryCreateResetRegex(momentMatchString),
      incompleteTaskRegExp: this.tryCreateIncompleteRegex(
        this.settings.incompleteTaskValues
      ),
      incompleteTaskRegExpRow2: this.tryCreateIncompleteRegex(
        this.settings.incompleteTaskValuesRow2
      ),
      rightClickTaskMenu,
      registerHandlers: rightClickTaskMenu || this.settings.previewOnClick,
      completedTasks,
      completedTaskRegExp: this.tryCreateCompleteRegex(completedTasks)
    };
    console.debug(
      "Task Marker: updated configuration %o, %o",
      this.settings,
      this.initSettings
    );
  }
  tryCreateRemoveRegex(param) {
    return param ? new RegExp(param, "g") : null;
  }
  tryCreateResetRegex(param) {
    return param ? new RegExp(param + "( \\^[A-Za-z0-9-]+)?$") : null;
  }
  tryCreateCompleteRegex(param) {
    return new RegExp(`^([\\s>]*- \\[)[${param}](\\] .*)$`);
  }
  tryCreateIncompleteRegex(param) {
    return new RegExp(`^([\\s>]*- \\[)[${param}](\\] .*)$`);
  }
  removeCheckboxFromLine(lineText) {
    return lineText.replace(this.stripTask, "$1 $2");
  }
  /** _Complete_ a task: append completion text, remove configured strings */
  completeTaskLine(lineText, mark = "x") {
    console.debug("Task Marker: complete task with %s: %s", mark, lineText);
    let marked = lineText.replace(this.anyTaskMark, `$1${mark}$3`);
    if (this.initSettings.removeRegExp) {
      marked = marked.replace(this.initSettings.removeRegExp, "");
    }
    if (this.settings.appendDateFormat) {
      const strictLineEnding = lineText.endsWith("  ");
      let blockid = "";
      const match = this.blockRef.exec(marked);
      if (match && match[2]) {
        marked = match[1];
        blockid = match[2];
      }
      if (!marked.endsWith(" ")) {
        marked += " ";
      }
      marked += (0, import_obsidian.moment)().format(this.settings.appendDateFormat) + blockid;
      if (strictLineEnding) {
        marked += "  ";
      }
    }
    return marked;
  }
  markAllTasksComplete(source, mark) {
    const lines = source.split("\n");
    const result = [];
    for (const line of lines) {
      if (this.initSettings.incompleteTaskRegExp.exec(line)) {
        result.push(this.completeTaskLine(line, mark));
      } else if (this.initSettings.incompleteTaskRegExpRow2.exec(line)) {
        result.push(this.completeTaskLine(line, mark));
      } else {
        result.push(line);
      }
    }
    return result.join("\n");
  }
  markTaskInSource(source, mark, lines = []) {
    const split = source.split("\n");
    const cursorOffset = [];
    for (const n of lines) {
      const result = this.markTaskLine(split[n], mark);
      split[n] = result.updatedLineText;
      cursorOffset.push(result.cursorOffset);
    }
    return { updatedLineText: split.join("\n"), cursorOffset };
  }
  markTaskInSourceCycle(source, mark, lines = []) {
    const split = source.split("\n");
    const cursorOffset = [];
    for (const n of lines) {
      const result = this.markTaskLineCycle(split[n], mark);
      split[n] = result.updatedLineText;
      cursorOffset.push(result.cursorOffset);
    }
    return { updatedLineText: split.join("\n"), cursorOffset };
  }
  markTaskInSourceCycleList1(source, mark, lines = []) {
    const split = source.split("\n");
    const cursorOffset = [];
    for (const n of lines) {
      const result = this.markTaskLineCycleList1(split[n], mark);
      split[n] = result.updatedLineText;
      cursorOffset.push(result.cursorOffset);
    }
    return { updatedLineText: split.join("\n"), cursorOffset };
  }
  markTaskInSourceCycleList2(source, mark, lines = []) {
    const split = source.split("\n");
    const cursorOffset = [];
    for (const n of lines) {
      const result = this.markTaskLineCycleList2(split[n], mark);
      split[n] = result.updatedLineText;
      cursorOffset.push(result.cursorOffset);
    }
    return { updatedLineText: split.join("\n"), cursorOffset };
  }
  markTaskInSourceCycleList3(source, mark, lines = []) {
    const split = source.split("\n");
    const cursorOffset = [];
    for (const n of lines) {
      const result = this.markTaskLineCycleList3(split[n], mark);
      split[n] = result.updatedLineText;
      cursorOffset.push(result.cursorOffset);
    }
    return { updatedLineText: split.join("\n"), cursorOffset };
  }
  markTaskInSourceCycleReversely(source, mark, lines = []) {
    const split = source.split("\n");
    const cursorOffset = [];
    for (const n of lines) {
      const result = this.markTaskLineCycleReversely(split[n], mark);
      split[n] = result.updatedLineText;
      cursorOffset.push(result.cursorOffset);
    }
    return { updatedLineText: split.join("\n"), cursorOffset };
  }
  markTaskInSourceCreate(source, mark, lines = []) {
    const split = source.split("\n");
    const cursorOffset = [];
    for (const n of lines) {
      const result = this.markTaskLineCreate(split[n], mark);
      split[n] = result.updatedLineText;
      cursorOffset.push(result.cursorOffset);
    }
    return { updatedLineText: split.join("\n"), cursorOffset };
  }
  appendTextInSource(source, mark, lines = []) {
    const split = source.split("\n");
    for (const n of lines) {
      split[n] = this.appendTextLine(split[n], mark);
    }
    return split.join("\n");
  }
  appendTextInSourceText2(source, mark, lines = []) {
    const split = source.split("\n");
    for (const n of lines) {
      split[n] = this.appendTextLineText2(split[n], mark);
    }
    return split.join("\n");
  }
  appendTextInSourceText3(source, mark, lines = []) {
    const split = source.split("\n");
    for (const n of lines) {
      split[n] = this.appendTextLineText3(split[n], mark);
    }
    return split.join("\n");
  }
  appendTextInSourceAuto(source, mark, lines = []) {
    const split = source.split("\n");
    for (const n of lines) {
      split[n] = this.appendTextLineAuto(split[n], mark);
    }
    return split.join("\n");
  }
  markTaskLine(lineText, mark) {
    const taskMatch = this.anyTaskMark.exec(lineText);
    const taskPrefix = `${lineText.trim().charAt(0)} [`;
    const markString = taskPrefix + mark + "] ";
    let cursorOffset = 0;
    if (mark === "Backspace") {
      lineText = this.removeCheckboxFromLine(lineText);
    } else if (taskMatch) {
      const completeMark = this.initSettings.completedTasks.indexOf(mark) >= 0;
      if (mark !== " ") {
        if (lineText.trim().startsWith(markString)) {
          new import_obsidian.Notice(`Task Marker: task already marked with the same status "${mark}"!`);
        } else {
          let marked2 = lineText.replace(this.anyTaskMark, `$1${mark}$3`);
          if (this.initSettings.removeRegExp) {
            marked2 = marked2.replace(this.initSettings.removeRegExp, "");
          }
          if (this.settings.appendDateFormat && completeMark) {
            const strictLineEnding = lineText.endsWith("  ");
            let blockid = "";
            const match = this.blockRef.exec(marked2);
            if (match && match[2]) {
              marked2 = match[1];
              blockid = match[2];
            }
            if (!marked2.endsWith(" ")) {
              marked2 += " ";
            }
            marked2 += (0, import_obsidian.moment)().format(this.settings.appendDateFormat) + blockid;
            if (strictLineEnding) {
              marked2 += "  ";
            }
          } else if (this.settings.appendTextFormatMark && this.settings.incompleteTaskValues.indexOf(mark) >= 0) {
            const strictLineEnding = lineText.endsWith("  ");
            let blockid = "";
            const match = this.blockRef.exec(marked2);
            if (match && match[2]) {
              marked2 = match[1];
              blockid = match[2];
            }
            if (!marked2.endsWith(" ")) {
              marked2 += " ";
            }
            marked2 += (0, import_obsidian.moment)().format(this.settings.appendTextFormatMark) + blockid;
            if (strictLineEnding) {
              marked2 += "  ";
            }
          } else if (this.settings.appendTextFormatMarkRow2 && this.settings.incompleteTaskValuesRow2.indexOf(mark) >= 0) {
            const strictLineEnding = lineText.endsWith("  ");
            let blockid = "";
            const match = this.blockRef.exec(marked2);
            if (match && match[2]) {
              marked2 = match[1];
              blockid = match[2];
            }
            if (!marked2.endsWith(" ")) {
              marked2 += " ";
            }
            marked2 += (0, import_obsidian.moment)().format(this.settings.appendTextFormatMarkRow2) + blockid;
            if (strictLineEnding) {
              marked2 += "  ";
            }
          }
          lineText = marked2;
        }
      } else if (mark === " ") {
        lineText = this.resetTaskLine(lineText, mark);
      } else {
        new import_obsidian.Notice(`Task Marker: unknown mark ${mark}!`);
        console.log(
          "Task Marker: unknown mark (%s), leaving unchanged: %s",
          mark,
          lineText
        );
      }
    } else if (mark !== "Backspace") {
      const listMatch = this.anyListItem.exec(lineText);
      const taskPrefix2 = `${lineText.trim().charAt(0)} [`;
      if (listMatch && listMatch[2] || lineText.trim().startsWith(taskPrefix2)) {
        console.debug("Task Marker: list item, convert to a task %s", lineText);
        cursorOffset = 4;
        if (listMatch && listMatch[2]) {
          var marked = `${listMatch[1]}[ ] ${listMatch[2]}`;
        } else if (lineText.trim().startsWith(taskPrefix2)) {
          let listIndex = lineText.indexOf(taskPrefix2);
          var marked = lineText.slice(0, listIndex + 1) + " [ ] " + lineText.slice(listIndex + 2);
        }
        let result = this.markTaskLine(marked, mark);
        lineText = result.updatedLineText;
      } else {
        new import_obsidian.Notice(`Task Marker: not a task or list item!`);
        console.debug("Task Marker: not a task or list item %s", lineText);
      }
    }
    return { updatedLineText: lineText, cursorOffset };
  }
  markTaskLineCycle(lineText, mark) {
    const taskMatch = this.anyTaskMark.exec(lineText);
    const taskPrefix = `${lineText.trim().charAt(0)} [`;
    const listMatch = this.anyListItem.exec(lineText);
    const markValue = this.settings.cycleTaskValues;
    const markValueLength = markValue.length;
    const cycleWithList = this.settings.supportCyclingWithListItem;
    let cursorOffset = 0;
    let markStringArray = new Array(markValueLength);
    for (let i = 0; i < markValueLength; i++) {
      markStringArray[i] = `${lineText.trim().charAt(0)} [${markValue[i]}] `;
    }
    let markIndex = 0;
    for (let i = 0; i < markValueLength; i++) {
      if (lineText.trim().startsWith(markStringArray[i])) {
        if (i + 2 <= markValueLength) {
          markIndex = i + 1;
        } else {
          if (cycleWithList) {
            markIndex = -1;
            cursorOffset = -4;
          } else {
            markIndex = 0;
          }
        }
      }
    }
    if (markIndex === 0) {
      if (taskMatch) {
        if (cycleWithList) {
          markIndex = -1;
          cursorOffset = -4;
        }
      }
    }
    if (taskMatch) {
      if (markIndex === -1) {
        let listIndex = lineText.indexOf(taskPrefix);
        var marked = lineText.slice(0, listIndex + 1) + " " + lineText.slice(listIndex + 6);
      } else {
        var marked = lineText.replace(this.anyTaskMark, `$1${markValue[markIndex]}$3`);
      }
      const strictLineEnding = lineText.endsWith("  ");
      let blockid = "";
      const match = this.blockRef.exec(marked);
      if (match && match[2]) {
        marked = match[1];
        blockid = match[2];
      }
      marked += blockid;
      if (strictLineEnding) {
        marked += "  ";
      }
      lineText = marked;
    } else {
      if (listMatch && listMatch[2] || lineText.trim().startsWith(taskPrefix)) {
        console.debug("Task Marker: list item, convert to a task %s", lineText);
        cursorOffset = 4;
        if (listMatch && listMatch[2]) {
          var marked = `${listMatch[1]}[${markValue[0]}] ${listMatch[2]}`;
        } else if (lineText.trim().startsWith(taskPrefix)) {
          let listIndex = lineText.indexOf(taskPrefix);
          var marked = lineText.slice(0, listIndex + 1) + ` [${markValue[0]}] ` + lineText.slice(listIndex + 2);
        }
        const strictLineEnding = lineText.endsWith("  ");
        let blockid = "";
        const match = this.blockRef.exec(marked);
        if (match && match[2]) {
          marked = match[1];
          blockid = match[2];
        }
        marked += blockid;
        if (strictLineEnding) {
          marked += "  ";
        }
        lineText = marked;
      } else {
        new import_obsidian.Notice(`Task Marker: not a task or list item!`);
        console.debug("Task Marker: not a task or list item %s", lineText);
      }
    }
    return { updatedLineText: lineText, cursorOffset };
  }
  markTaskLineCycleList1(lineText, mark) {
    const taskMatch = this.anyTaskMark.exec(lineText);
    const taskPrefix = `${lineText.trim().charAt(0)} [`;
    const listMatch = this.anyListItem.exec(lineText);
    const markValue = this.settings.cycleTaskValuesList1;
    const markValueLength = markValue.length;
    const cycleWithList = this.settings.supportCyclingWithListItem;
    let cursorOffset = 0;
    let markStringArray = new Array(markValueLength);
    for (let i = 0; i < markValueLength; i++) {
      markStringArray[i] = `${lineText.trim().charAt(0)} [${markValue[i]}] `;
    }
    let markIndex = 0;
    for (let i = 0; i < markValueLength; i++) {
      if (lineText.trim().startsWith(markStringArray[i])) {
        if (i + 2 <= markValueLength) {
          markIndex = i + 1;
        } else {
          if (cycleWithList) {
            markIndex = -1;
            cursorOffset = -4;
          } else {
            markIndex = 0;
          }
        }
      }
    }
    if (markIndex === 0) {
      if (taskMatch) {
        if (cycleWithList) {
          markIndex = -1;
          cursorOffset = -4;
        }
      }
    }
    if (taskMatch) {
      if (markIndex === -1) {
        let listIndex = lineText.indexOf(taskPrefix);
        var marked = lineText.slice(0, listIndex + 1) + " " + lineText.slice(listIndex + 6);
      } else {
        var marked = lineText.replace(this.anyTaskMark, `$1${markValue[markIndex]}$3`);
      }
      const strictLineEnding = lineText.endsWith("  ");
      let blockid = "";
      const match = this.blockRef.exec(marked);
      if (match && match[2]) {
        marked = match[1];
        blockid = match[2];
      }
      marked += blockid;
      if (strictLineEnding) {
        marked += "  ";
      }
      lineText = marked;
    } else {
      if (listMatch && listMatch[2] || lineText.trim().startsWith(taskPrefix)) {
        console.debug("Task Marker: list item, convert to a task %s", lineText);
        cursorOffset = 4;
        if (listMatch && listMatch[2]) {
          var marked = `${listMatch[1]}[${markValue[0]}] ${listMatch[2]}`;
        } else if (lineText.trim().startsWith(taskPrefix)) {
          let listIndex = lineText.indexOf(taskPrefix);
          var marked = lineText.slice(0, listIndex + 1) + ` [${markValue[0]}] ` + lineText.slice(listIndex + 2);
        }
        const strictLineEnding = lineText.endsWith("  ");
        let blockid = "";
        const match = this.blockRef.exec(marked);
        if (match && match[2]) {
          marked = match[1];
          blockid = match[2];
        }
        marked += blockid;
        if (strictLineEnding) {
          marked += "  ";
        }
        lineText = marked;
      } else {
        new import_obsidian.Notice(`Task Marker: not a task or list item!`);
        console.debug("Task Marker: not a task or list item %s", lineText);
      }
    }
    return { updatedLineText: lineText, cursorOffset };
  }
  markTaskLineCycleList2(lineText, mark) {
    const taskMatch = this.anyTaskMark.exec(lineText);
    const taskPrefix = `${lineText.trim().charAt(0)} [`;
    const listMatch = this.anyListItem.exec(lineText);
    const markValue = this.settings.cycleTaskValuesList2;
    const markValueLength = markValue.length;
    const cycleWithList = this.settings.supportCyclingWithListItem;
    let cursorOffset = 0;
    let markStringArray = new Array(markValueLength);
    for (let i = 0; i < markValueLength; i++) {
      markStringArray[i] = `${lineText.trim().charAt(0)} [${markValue[i]}] `;
    }
    let markIndex = 0;
    for (let i = 0; i < markValueLength; i++) {
      if (lineText.trim().startsWith(markStringArray[i])) {
        if (i + 2 <= markValueLength) {
          markIndex = i + 1;
        } else {
          if (cycleWithList) {
            markIndex = -1;
            cursorOffset = -4;
          } else {
            markIndex = 0;
          }
        }
      }
    }
    if (markIndex === 0) {
      if (taskMatch) {
        if (cycleWithList) {
          markIndex = -1;
          cursorOffset = -4;
        }
      }
    }
    if (taskMatch) {
      if (markIndex === -1) {
        let listIndex = lineText.indexOf(taskPrefix);
        var marked = lineText.slice(0, listIndex + 1) + " " + lineText.slice(listIndex + 6);
      } else {
        var marked = lineText.replace(this.anyTaskMark, `$1${markValue[markIndex]}$3`);
      }
      const strictLineEnding = lineText.endsWith("  ");
      let blockid = "";
      const match = this.blockRef.exec(marked);
      if (match && match[2]) {
        marked = match[1];
        blockid = match[2];
      }
      marked += blockid;
      if (strictLineEnding) {
        marked += "  ";
      }
      lineText = marked;
    } else {
      if (listMatch && listMatch[2] || lineText.trim().startsWith(taskPrefix)) {
        console.debug("Task Marker: list item, convert to a task %s", lineText);
        cursorOffset = 4;
        if (listMatch && listMatch[2]) {
          var marked = `${listMatch[1]}[${markValue[0]}] ${listMatch[2]}`;
        } else if (lineText.trim().startsWith(taskPrefix)) {
          let listIndex = lineText.indexOf(taskPrefix);
          var marked = lineText.slice(0, listIndex + 1) + ` [${markValue[0]}] ` + lineText.slice(listIndex + 2);
        }
        const strictLineEnding = lineText.endsWith("  ");
        let blockid = "";
        const match = this.blockRef.exec(marked);
        if (match && match[2]) {
          marked = match[1];
          blockid = match[2];
        }
        marked += blockid;
        if (strictLineEnding) {
          marked += "  ";
        }
        lineText = marked;
      } else {
        new import_obsidian.Notice(`Task Marker: not a task or list item!`);
        console.debug("Task Marker: not a task or list item %s", lineText);
      }
    }
    return { updatedLineText: lineText, cursorOffset };
  }
  markTaskLineCycleList3(lineText, mark) {
    const taskMatch = this.anyTaskMark.exec(lineText);
    const taskPrefix = `${lineText.trim().charAt(0)} [`;
    const listMatch = this.anyListItem.exec(lineText);
    const markValue = this.settings.cycleTaskValuesList3;
    const markValueLength = markValue.length;
    const cycleWithList = this.settings.supportCyclingWithListItem;
    let cursorOffset = 0;
    let markStringArray = new Array(markValueLength);
    for (let i = 0; i < markValueLength; i++) {
      markStringArray[i] = `${lineText.trim().charAt(0)} [${markValue[i]}] `;
    }
    let markIndex = 0;
    for (let i = 0; i < markValueLength; i++) {
      if (lineText.trim().startsWith(markStringArray[i])) {
        if (i + 2 <= markValueLength) {
          markIndex = i + 1;
        } else {
          if (cycleWithList) {
            markIndex = -1;
            cursorOffset = -4;
          } else {
            markIndex = 0;
          }
        }
      }
    }
    if (markIndex === 0) {
      if (taskMatch) {
        if (cycleWithList) {
          markIndex = -1;
          cursorOffset = -4;
        }
      }
    }
    if (taskMatch) {
      if (markIndex === -1) {
        let listIndex = lineText.indexOf(taskPrefix);
        var marked = lineText.slice(0, listIndex + 1) + " " + lineText.slice(listIndex + 6);
      } else {
        var marked = lineText.replace(this.anyTaskMark, `$1${markValue[markIndex]}$3`);
      }
      const strictLineEnding = lineText.endsWith("  ");
      let blockid = "";
      const match = this.blockRef.exec(marked);
      if (match && match[2]) {
        marked = match[1];
        blockid = match[2];
      }
      marked += blockid;
      if (strictLineEnding) {
        marked += "  ";
      }
      lineText = marked;
    } else {
      if (listMatch && listMatch[2] || lineText.trim().startsWith(taskPrefix)) {
        console.debug("Task Marker: list item, convert to a task %s", lineText);
        cursorOffset = 4;
        if (listMatch && listMatch[2]) {
          var marked = `${listMatch[1]}[${markValue[0]}] ${listMatch[2]}`;
        } else if (lineText.trim().startsWith(taskPrefix)) {
          let listIndex = lineText.indexOf(taskPrefix);
          var marked = lineText.slice(0, listIndex + 1) + ` [${markValue[0]}] ` + lineText.slice(listIndex + 2);
        }
        const strictLineEnding = lineText.endsWith("  ");
        let blockid = "";
        const match = this.blockRef.exec(marked);
        if (match && match[2]) {
          marked = match[1];
          blockid = match[2];
        }
        marked += blockid;
        if (strictLineEnding) {
          marked += "  ";
        }
        lineText = marked;
      } else {
        new import_obsidian.Notice(`Task Marker: not a task or list item!`);
        console.debug("Task Marker: not a task or list item %s", lineText);
      }
    }
    return { updatedLineText: lineText, cursorOffset };
  }
  markTaskLineCycleReversely(lineText, mark) {
    const taskMatch = this.anyTaskMark.exec(lineText);
    const taskPrefix = `${lineText.trim().charAt(0)} [`;
    const listMatch = this.anyListItem.exec(lineText);
    var markValue = this.settings.cycleTaskValues;
    const markValueLength = markValue.length;
    const cycleWithList = this.settings.supportCyclingWithListItem;
    let cursorOffset = 0;
    let reverseString = "";
    for (let char of markValue) {
      reverseString = char + reverseString;
    }
    markValue = reverseString;
    let markStringArray = new Array(markValueLength);
    for (let i = 0; i < markValueLength; i++) {
      markStringArray[i] = `${lineText.trim().charAt(0)} [${markValue[i]}] `;
    }
    let markIndex = 0;
    for (let i = 0; i < markValueLength; i++) {
      if (lineText.trim().startsWith(markStringArray[i])) {
        if (i + 2 <= markValueLength) {
          markIndex = i + 1;
        } else {
          if (cycleWithList) {
            markIndex = -1;
            cursorOffset = -4;
          } else {
            markIndex = 0;
          }
        }
      }
    }
    if (markIndex === 0) {
      if (taskMatch) {
        if (cycleWithList) {
          markIndex = -1;
          cursorOffset = -4;
        }
      }
    }
    if (taskMatch) {
      if (markIndex === -1) {
        let listIndex = lineText.indexOf(taskPrefix);
        var marked = lineText.slice(0, listIndex + 1) + " " + lineText.slice(listIndex + 6);
      } else {
        var marked = lineText.replace(this.anyTaskMark, `$1${markValue[markIndex]}$3`);
      }
      const strictLineEnding = lineText.endsWith("  ");
      let blockid = "";
      const match = this.blockRef.exec(marked);
      if (match && match[2]) {
        marked = match[1];
        blockid = match[2];
      }
      marked += blockid;
      if (strictLineEnding) {
        marked += "  ";
      }
      lineText = marked;
    } else {
      if (listMatch && listMatch[2] || lineText.trim().startsWith(taskPrefix)) {
        console.debug("Task Marker: list item, convert to a task %s", lineText);
        cursorOffset = 4;
        if (listMatch && listMatch[2]) {
          var marked = `${listMatch[1]}[${markValue[markIndex]}] ${listMatch[2]}`;
        } else if (lineText.trim().startsWith(taskPrefix)) {
          let listIndex = lineText.indexOf(taskPrefix);
          var marked = lineText.slice(0, listIndex + 1) + ` [${markValue[markIndex]}] ` + lineText.slice(listIndex + 2);
        }
        const strictLineEnding = lineText.endsWith("  ");
        let blockid = "";
        const match = this.blockRef.exec(marked);
        if (match && match[2]) {
          marked = match[1];
          blockid = match[2];
        }
        marked += blockid;
        if (strictLineEnding) {
          marked += "  ";
        }
        lineText = marked;
      } else {
        new import_obsidian.Notice(`Task Marker: not a task or list item!`);
        console.debug("Task Marker: not a task or list item %s", lineText);
      }
    }
    return { updatedLineText: lineText, cursorOffset };
  }
  markTaskLineCreate(lineText, mark) {
    const taskMatch = this.anyTaskMark.exec(lineText);
    const taskPrefix = `${lineText.trim().charAt(0)} [ ] `;
    let cursorOffset = 0;
    if (taskMatch) {
      if (!lineText.trim().startsWith(taskPrefix)) {
        new import_obsidian.Notice(`Task Marker: task already marked!`);
        console.log("Task Marker: task already marked, leaving unchanged: %s", lineText);
      } else {
        let marked2 = lineText.replace(this.anyTaskMark, `$1${mark}$3`);
        if (this.settings.appendTextFormatCreation) {
          const strictLineEnding = lineText.endsWith("  ");
          let blockid = "";
          const match = this.blockRef.exec(marked2);
          if (match && match[2]) {
            marked2 = match[1];
            blockid = match[2];
          }
          if (!marked2.endsWith(" ")) {
            marked2 += " ";
          }
          marked2 += (0, import_obsidian.moment)().format(this.settings.appendTextFormatCreation) + blockid;
          if (strictLineEnding) {
            marked2 += "  ";
          }
        } else {
          console.log("Task Marker: appending string empty, nothing appended: %s", lineText);
        }
        lineText = marked2;
      }
    } else {
      const listMatch = this.anyListItem.exec(lineText);
      const taskPrefix2 = `${lineText.trim().charAt(0)} [`;
      if (listMatch && listMatch[2] || lineText.trim().startsWith(taskPrefix2)) {
        console.debug("Task Marker: list item, convert to a task %s", lineText);
        cursorOffset = 4;
        if (listMatch && listMatch[2]) {
          var marked = `${listMatch[1]}[ ] ${listMatch[2]}`;
        } else if (lineText.trim().startsWith(taskPrefix2)) {
          let listIndex = lineText.indexOf(taskPrefix2);
          var marked = lineText.slice(0, listIndex + 1) + " [ ] " + lineText.slice(listIndex + 2);
        }
        if (this.settings.appendTextFormatCreation) {
          const strictLineEnding = lineText.endsWith("  ");
          let blockid = "";
          const match = this.blockRef.exec(marked);
          if (match && match[2]) {
            marked = match[1];
            blockid = match[2];
          }
          if (!marked.endsWith(" ")) {
            marked += " ";
          }
          marked += (0, import_obsidian.moment)().format(this.settings.appendTextFormatCreation) + blockid;
          if (strictLineEnding) {
            marked += "  ";
          }
        } else {
          console.log("Task Marker: appending string empty, nothing appended: %s", lineText);
        }
        lineText = marked;
      } else {
        new import_obsidian.Notice(`Task Marker: not a task or list item!`);
        console.debug("Task Marker: not a task or list item %s", lineText);
      }
    }
    return { updatedLineText: lineText, cursorOffset };
  }
  appendTextLineFunction(lineText, appendTextFormat) {
    let marked = lineText;
    const strictLineEnding = lineText.endsWith("  ");
    let blockid = "";
    const match = this.blockRef.exec(marked);
    if (match && match[2]) {
      marked = match[1];
      blockid = match[2];
    }
    if (!marked.endsWith(" ")) {
      marked += " ";
    }
    marked += (0, import_obsidian.moment)().format(appendTextFormat) + blockid;
    if (strictLineEnding) {
      marked += "  ";
    }
    return marked;
  }
  appendTextLine(lineText, mark) {
    let marked = lineText;
    if (this.settings.appendTextFormatAppend) {
      marked = this.appendTextLineFunction(lineText, this.settings.appendTextFormatAppend);
    } else {
      new import_obsidian.Notice(`Task Marker: appending string empty!`);
      console.log("Task Marker: appending string empty, nothing appended: %s", lineText);
    }
    lineText = marked;
    return lineText;
  }
  appendTextLineText2(lineText, mark) {
    let marked = lineText;
    if (this.settings.appendTextFormatAppendText2) {
      marked = this.appendTextLineFunction(lineText, this.settings.appendTextFormatAppendText2);
    } else {
      new import_obsidian.Notice(`Task Marker: appending string empty!`);
      console.log("Task Marker: appending string empty, nothing appended: %s", lineText);
    }
    lineText = marked;
    return lineText;
  }
  appendTextLineText3(lineText, mark) {
    let marked = lineText;
    if (this.settings.appendTextFormatAppendText3) {
      marked = this.appendTextLineFunction(lineText, this.settings.appendTextFormatAppendText3);
    } else {
      new import_obsidian.Notice(`Task Marker: appending string empty!`);
      console.log("Task Marker: appending string empty, nothing appended: %s", lineText);
    }
    lineText = marked;
    return lineText;
  }
  appendTextLineAuto(lineText, mark) {
    let marked = lineText;
    const taskMatch = this.anyTaskMark.exec(lineText);
    if (taskMatch) {
      const taskMark = lineText.trim()[3];
      const createMark = taskMark === " ";
      const completeMark = this.initSettings.completedTasks.indexOf(taskMark) >= 0;
      const markRow1Mark = this.settings.incompleteTaskValues.indexOf(taskMark) >= 0;
      const markRow2Mark = this.settings.incompleteTaskValuesRow2.indexOf(taskMark) >= 0;
      const defaultTaskTextRows12 = this.settings.appendTextAutoTaskDefault === "text-rows-1-2";
      const defaultTaskTextRowString = this.settings.appendTextAutoTaskDefault === "text-row-string";
      const defaultTaskTextRow1 = this.settings.appendTextAutoTaskDefault === "text-row-1";
      const defaultTaskTextRow2 = this.settings.appendTextAutoTaskDefault === "text-row-2";
      const defaultTaskNone = this.settings.appendTextAutoTaskDefault === "none";
      if (createMark && this.settings.appendTextFormatCreation) {
        marked = this.appendTextLineFunction(lineText, this.settings.appendTextFormatCreation);
      } else if (completeMark && this.settings.appendDateFormat) {
        marked = this.appendTextLineFunction(lineText, this.settings.appendDateFormat);
      } else if (markRow1Mark || markRow2Mark) {
        if (defaultTaskTextRows12) {
          if (markRow1Mark && this.settings.appendTextFormatMark) {
            marked = this.appendTextLineFunction(lineText, this.settings.appendTextFormatMark);
          } else if (markRow2Mark && this.settings.appendTextFormatMarkRow2) {
            marked = this.appendTextLineFunction(lineText, this.settings.appendTextFormatMarkRow2);
          } else {
            new import_obsidian.Notice(`Task Marker: empty appending string!`);
            console.debug("Task Marker: empty appending string!");
          }
        } else if (defaultTaskTextRowString) {
          if (markRow1Mark && this.settings.appendTextFormatMark) {
            marked = this.appendTextLineFunction(lineText, this.settings.appendTextFormatMark);
          } else if (markRow1Mark && !this.settings.appendTextFormatMark && this.settings.appendTextFormatMarkRow2) {
            marked = this.appendTextLineFunction(lineText, this.settings.appendTextFormatMarkRow2);
          } else if (markRow2Mark && this.settings.appendTextFormatMarkRow2) {
            marked = this.appendTextLineFunction(lineText, this.settings.appendTextFormatMarkRow2);
          } else if (markRow2Mark && !this.settings.appendTextFormatMarkRow2 && this.settings.appendTextFormatMark) {
            marked = this.appendTextLineFunction(lineText, this.settings.appendTextFormatMark);
          } else {
            new import_obsidian.Notice(`Task Marker: empty appending string!`);
            console.debug("Task Marker: empty appending string!");
          }
        } else if (defaultTaskTextRow1) {
          if (markRow1Mark && this.settings.appendTextFormatMark) {
            marked = this.appendTextLineFunction(lineText, this.settings.appendTextFormatMark);
          } else if (markRow2Mark && this.settings.appendTextFormatMark) {
            marked = this.appendTextLineFunction(lineText, this.settings.appendTextFormatMark);
          } else {
            new import_obsidian.Notice(`Task Marker: empty appending string in row 1!`);
            console.debug("Task Marker: empty appending string in row 1!");
          }
        } else if (defaultTaskTextRow2) {
          if (markRow1Mark && this.settings.appendTextFormatMarkRow2) {
            marked = this.appendTextLineFunction(lineText, this.settings.appendTextFormatMarkRow2);
          } else if (markRow2Mark && this.settings.appendTextFormatMarkRow2) {
            marked = this.appendTextLineFunction(lineText, this.settings.appendTextFormatMarkRow2);
          } else {
            new import_obsidian.Notice(`Task Marker: empty appending string in row 2!`);
            console.debug("Task Marker: empty appending string in row 2!");
          }
        } else if (defaultTaskNone) {
          new import_obsidian.Notice(`Task Marker: set to append nothing!`);
          console.log("Task Marker: set to append nothing!");
        } else {
          new import_obsidian.Notice(`Task Marker: nothing to append!`);
          console.log("Task Marker: nothing to append!");
        }
      } else {
        new import_obsidian.Notice(`Task Marker: undefined mark or empty appending string!`);
        console.debug("Task Marker: undefined mark or empty appending string!");
      }
    } else {
      const defaultLineText1 = this.settings.appendTextAutoLineDefault === "text-1";
      const defaultLineText2 = this.settings.appendTextAutoLineDefault === "text-2";
      const defaultLineText3 = this.settings.appendTextAutoLineDefault === "text-3";
      const defaultLineNone = this.settings.appendTextAutoLineDefault === "none";
      if (defaultLineText1) {
        marked = this.appendTextLine(marked, "y");
      } else if (defaultLineText2) {
        marked = this.appendTextLineText2(marked, "y");
      } else if (defaultLineText3) {
        marked = this.appendTextLineText3(marked, "y");
      } else if (defaultLineNone) {
        new import_obsidian.Notice(`Task Marker: not a task, and set to append nothing!`);
        console.log("Task Marker: not a task, and set to append nothing!");
      } else {
        new import_obsidian.Notice(`Task Marker: not a task, and nothing to append!`);
        console.log("Task Marker: not a task, and nothing to append!");
      }
    }
    lineText = marked;
    return lineText;
  }
  resetTaskLine(lineText, mark = " ") {
    console.debug("Task Marker: reset task with %s: %s", mark, lineText);
    lineText = lineText.replace(this.anyTaskMark, `$1${mark}$3`);
    const strictLineEnding = lineText.endsWith("  ");
    let blockid = "";
    const match = this.blockRef.exec(lineText);
    if (match && match[2]) {
      lineText = match[1];
      blockid = match[2];
    }
    if (this.initSettings.resetRegExp) {
      lineText = lineText.replace(this.initSettings.resetRegExp, "");
    }
    lineText = lineText.replace(/\s*$/, blockid);
    if (this.settings.appendRemoveAllTasks && mark !== " ") {
      lineText = this.completeTaskLine(lineText, mark);
    }
    if (strictLineEnding) {
      lineText += "  ";
    }
    return lineText;
  }
  resetAllTasks(source) {
    const lines = source.split("\n");
    const result = [];
    let inCompletedSection = false;
    for (const line of lines) {
      if (inCompletedSection) {
        if (line.startsWith("#") || line.trim() === "---") {
          inCompletedSection = false;
        }
        result.push(line);
      } else if (this.isCompletedTaskLine(line)) {
        result.push(this.resetTaskLine(line));
      } else {
        result.push(line);
      }
    }
    return result.join("\n");
  }
  // moveCompletedTasksInFile(source: string): string {
  //     const LOG_HEADING = this.settings.completedAreaHeader || "## Log";
  //     const lines = source.split("\n");
  //     if (source.indexOf(LOG_HEADING) < 0) {
  //         if (lines[lines.length - 1].trim() !== "") {
  //             lines.push("");
  //         }
  //         lines.push(LOG_HEADING);
  //     }
  //     const remaining = [];
  //     const completedSection = [];
  //     const newTasks = [];
  //     let inCompletedSection = false;
  //     let inTask = false;
  //     let inCallout = false;
  //     let completedTasksIndex = lines.length;
  //     for (let line of lines) {
  //         if (inCompletedSection) {
  //             if (line.startsWith("#") || line.trim() === "---") {
  //                 inCompletedSection = false;
  //                 remaining.push(line);
  //             } else {
  //                 completedSection.push(line);
  //             }
  //         } else if (line.trim() === LOG_HEADING) {
  //             inCompletedSection = true;
  //             completedTasksIndex = remaining.push(line);
  //             remaining.push("%%%COMPLETED_ITEMS_GO_HERE%%%");
  //         } else {
  //             if (this.isCompletedTaskLine(line)) {
  //                 if (this.settings.completedAreaRemoveCheckbox) {
  //                     line = this.removeCheckboxFromLine(line);
  //                 }
  //                 inTask = true;
  //                 inCallout = this.isCallout(line); // is task _inside_ the callout
  //                 newTasks.push(line);
  //             } else if (
  //                 inTask &&
  //                 !this.isTaskLine(line) &&
  //                 this.isContinuation(line, inCallout)
  //             ) {
  //                 newTasks.push(line);
  //             } else {
  //                 inTask = false;
  //                 inCallout = false;
  //                 remaining.push(line);
  //             }
  //         }
  //     }
  //     let result = remaining
  //         .slice(0, completedTasksIndex)
  //         .concat(...newTasks)
  //         .concat(...completedSection);
  //     if (completedTasksIndex < remaining.length - 1) {
  //         result = result.concat(remaining.slice(completedTasksIndex + 1));
  //     }
  //     return result.join("\n");
  // }
  isCompletedTaskLine(lineText) {
    return this.initSettings.completedTaskRegExp.test(lineText);
  }
  isIncompleteTaskLine(lineText) {
    return this.initSettings.incompleteTaskRegExp.test(lineText) || this.initSettings.incompleteTaskRegExpRow2.test(lineText);
  }
  isTaskLine(lineText) {
    return this.anyTaskMark.test(lineText);
  }
  isContinuation(lineText, inCallout) {
    if (inCallout) {
      const match = this.blockQuote.exec(lineText);
      if (match) {
        return match[1].endsWith(">") || match[1].endsWith("  ") || match[1].endsWith("	");
      }
    }
    return this.continuation.test(lineText);
  }
  isCallout(lineText) {
    return this.blockQuote.test(lineText);
  }
};

// src/taskmarker-Settings.ts
var DEFAULT_SETTINGS = {
  // completedAreaHeader: "## Log",
  removeExpression: "",
  appendDateFormat: "",
  appendTextFormatMark: "",
  appendTextFormatMarkRow2: "",
  appendTextFormatCreation: "",
  appendTextFormatAppend: "",
  appendTextFormatAppendText2: "",
  appendTextFormatAppendText3: "",
  appendRemoveAllTasks: false,
  incompleteTaskValues: " ",
  incompleteTaskValuesRow2: "",
  // For choosing whether to show in the second row
  cycleTaskValues: "",
  cycleTaskValuesList1: "",
  cycleTaskValuesList2: "",
  cycleTaskValuesList3: "",
  onlyLowercaseX: false,
  supportCanceledTasks: true,
  supportCyclingTasksReversely: false,
  supportCyclingWithListItem: false,
  supportAppendingTextAutomatically: false,
  appendTextAutoLineDefault: "none",
  appendTextAutoTaskDefault: "none",
  previewOnClick: false,
  rightClickComplete: false,
  rightClickMark: false,
  rightClickCycle: false,
  rightClickCycleList1: false,
  rightClickCycleList2: false,
  rightClickCycleList3: false,
  rightClickCycleReversely: false,
  rightClickCreate: false,
  rightClickAppend: false,
  rightClickAppendText2: false,
  rightClickAppendText3: false,
  rightClickAppendTextAuto: false,
  // rightClickMove: false,
  rightClickResetTask: false,
  rightClickResetAll: false,
  rightClickToggleAll: false
  // completedAreaRemoveCheckbox: false,
};

// src/taskmarker-SettingsTab.ts
var import_obsidian2 = require("obsidian");
var TaskMarkerSettingsTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin, taskMarker) {
    super(app, plugin);
    this.plugin = plugin;
    this.taskMarker = taskMarker;
  }
  display() {
    this.containerEl.empty();
    this.containerEl.createEl("h1", { text: "Task Marker" });
    const tempSettings = Object.assign(
      this.taskMarker.settings
    );
    this.containerEl.createEl("h3", {
      text: "Please try reopening the vault or restarting Obsidian if the following setting changes do not take effect."
    });
    this.containerEl.createEl("h2", { text: "Create tasks" });
    new import_obsidian2.Setting(this.containerEl).setName("Append text to created task").setDesc(
      "Default empty. If set non-empty, append the string of moment.js format to the end of the task text."
    ).addMomentFormat(
      (momentFormat) => momentFormat.setPlaceholder("[\u{1F4DD} ]YYYY-MM-DD").setValue(tempSettings.appendTextFormatCreation).onChange((value) => __async(this, null, function* () {
        try {
          (0, import_obsidian2.moment)().format(value);
          tempSettings.appendTextFormatCreation = value;
          this.taskMarker.updateSettings(tempSettings);
          yield this.plugin.saveSettings();
        } catch (e) {
          console.log(
            `Error parsing specified date format: ${value}`
          );
        }
      }))
    );
    this.containerEl.appendChild(createEl("a", {
      text: "moment.js documentation.",
      href: "https://momentjs.com/docs",
      cls: "linkInfo"
    }));
    this.containerEl.createEl("h2", { text: "Complete tasks" });
    new import_obsidian2.Setting(this.containerEl).setName("Only support x for completed tasks").setDesc(
      "Only use 'x' (lower case) to indicate completed tasks (hide X (upper case))."
    ).addToggle(
      (toggle) => toggle.setValue(tempSettings.onlyLowercaseX).onChange((value) => __async(this, null, function* () {
        tempSettings.onlyLowercaseX = value;
        this.taskMarker.updateSettings(tempSettings);
        yield this.plugin.saveSettings();
      }))
    );
    new import_obsidian2.Setting(this.containerEl).setName("Support canceled tasks").setDesc(
      "Use '-' to indicate canceled tasks. Canceled tasks are processed in the same way as completed tasks."
    ).addToggle(
      (toggle) => toggle.setValue(tempSettings.supportCanceledTasks).onChange((value) => __async(this, null, function* () {
        tempSettings.supportCanceledTasks = value;
        this.taskMarker.updateSettings(tempSettings);
        yield this.plugin.saveSettings();
      }))
    );
    new import_obsidian2.Setting(this.containerEl).setName("Append text to completed task").setDesc(
      "Default empty. If set non-empty, append the string of moment.js format to the end of the task text."
    ).addMomentFormat(
      (momentFormat) => momentFormat.setPlaceholder("[\u2705 ]YYYY-MM-DD").setValue(tempSettings.appendDateFormat).onChange((value) => __async(this, null, function* () {
        try {
          (0, import_obsidian2.moment)().format(value);
          tempSettings.appendDateFormat = value;
          this.taskMarker.updateSettings(tempSettings);
          yield this.plugin.saveSettings();
        } catch (e) {
          console.log(
            `Error parsing specified date format: ${value}`
          );
        }
      }))
    );
    this.containerEl.createEl("h2", { text: "Mark tasks" });
    this.containerEl.createEl("p", {
      text: "Note that if a mark contains both in row 1 and row 2, then the mark would work as specified in row 1."
    });
    new import_obsidian2.Setting(this.containerEl).setName("Additional task statuses (row 1)").setDesc(
      "Specify the set of characters that indicate in-progress or incomplete tasks, e.g. 'i>!?D'. All of them (excluding the first open status) can be assigned with hotkeys."
    ).addText(
      (text) => text.setPlaceholder(">!?").setValue(tempSettings.incompleteTaskValues).onChange((value) => __async(this, null, function* () {
        if (value.contains("x")) {
          console.log(
            `Set of characters should not contain the marker for completed tasks (x): ${value}`
          );
        } else if (!tempSettings.onlyLowercaseX && value.contains("X")) {
          console.log(
            `Set of characters should not contain the marker for completed tasks (X): ${value}`
          );
        } else if (tempSettings.supportCanceledTasks && value.contains("-")) {
          console.log(
            `Set of characters should not contain the marker for canceled tasks (-): ${value}`
          );
        } else {
          if (!value.contains(" ")) {
            value = " " + value;
          }
          tempSettings.incompleteTaskValues = value;
          this.taskMarker.updateSettings(tempSettings);
          yield this.plugin.saveSettings();
        }
      }))
    );
    new import_obsidian2.Setting(this.containerEl).setName("Append text to marked task (row 1)").setDesc(
      "Default empty. If set non-empty, append the string of moment.js format to the end of the task text."
    ).addMomentFormat(
      (momentFormat) => momentFormat.setPlaceholder("[\u274E ]YYYY-MM-DD").setValue(tempSettings.appendTextFormatMark).onChange((value) => __async(this, null, function* () {
        try {
          (0, import_obsidian2.moment)().format(value);
          tempSettings.appendTextFormatMark = value;
          this.taskMarker.updateSettings(tempSettings);
          yield this.plugin.saveSettings();
        } catch (e) {
          console.log(
            `Error parsing specified date format: ${value}`
          );
        }
      }))
    );
    new import_obsidian2.Setting(this.containerEl).setName("Additional task statuses (row 2)").setDesc(
      "Specify the set of characters that indicate task statuses, e.g. 'Rip'. All of them can be assigned with hotkeys."
    ).addText(
      (text) => text.setPlaceholder("Rip").setValue(tempSettings.incompleteTaskValuesRow2).onChange((value) => __async(this, null, function* () {
        if (value.contains("x")) {
          console.log(
            `Set of characters should not contain the marker for completed tasks (x): ${value}`
          );
        } else if (!tempSettings.onlyLowercaseX && value.contains("X")) {
          console.log(
            `Set of characters should not contain the marker for completed tasks (X): ${value}`
          );
        } else if (tempSettings.supportCanceledTasks && value.contains("-")) {
          console.log(
            `Set of characters should not contain the marker for canceled tasks (-): ${value}`
          );
        } else {
          tempSettings.incompleteTaskValuesRow2 = value;
          this.taskMarker.updateSettings(tempSettings);
          yield this.plugin.saveSettings();
        }
      }))
    );
    new import_obsidian2.Setting(this.containerEl).setName("Append text to marked task (row 2)").setDesc(
      "Default empty. If set non-empty, append the string of moment.js format to the end of the task text."
    ).addMomentFormat(
      (momentFormat) => momentFormat.setPlaceholder("YYYY-MM-DD").setValue(tempSettings.appendTextFormatMarkRow2).onChange((value) => __async(this, null, function* () {
        try {
          (0, import_obsidian2.moment)().format(value);
          tempSettings.appendTextFormatMarkRow2 = value;
          this.taskMarker.updateSettings(tempSettings);
          yield this.plugin.saveSettings();
        } catch (e) {
          console.log(
            `Error parsing specified date format: ${value}`
          );
        }
      }))
    );
    this.containerEl.createEl("h2", { text: "Cycle tasks" });
    new import_obsidian2.Setting(this.containerEl).setName("Cycled task (main)").setDesc(
      "Specify a set of characters that indicate any task statuses, e.g. 'x- Rip>'."
    ).addText(
      (text) => text.setPlaceholder("x- Rip").setValue(tempSettings.cycleTaskValues).onChange((value) => __async(this, null, function* () {
        tempSettings.cycleTaskValues = value;
        this.taskMarker.updateSettings(tempSettings);
        yield this.plugin.saveSettings();
      }))
    );
    new import_obsidian2.Setting(this.containerEl).setName("Support cycling task reversely (main)").setDesc(
      "Default disabled. If enabled, a command would be added to cycle reversely among the statuses as specified above."
    ).addToggle(
      (toggle) => toggle.setValue(tempSettings.supportCyclingTasksReversely).onChange((value) => __async(this, null, function* () {
        tempSettings.supportCyclingTasksReversely = value;
        this.taskMarker.updateSettings(tempSettings);
        yield this.plugin.saveSettings();
      }))
    );
    new import_obsidian2.Setting(this.containerEl).setName("Cycled task (list 1)").setDesc(
      "Specify an additional list of characters that indicate any task statuses."
    ).addText(
      (text) => text.setPlaceholder("ab").setValue(tempSettings.cycleTaskValuesList1).onChange((value) => __async(this, null, function* () {
        tempSettings.cycleTaskValuesList1 = value;
        this.taskMarker.updateSettings(tempSettings);
        yield this.plugin.saveSettings();
      }))
    );
    new import_obsidian2.Setting(this.containerEl).setName("Cycled task (list 2)").setDesc(
      "Specify an additional list of characters that indicate any task statuses."
    ).addText(
      (text) => text.setPlaceholder("cd").setValue(tempSettings.cycleTaskValuesList2).onChange((value) => __async(this, null, function* () {
        tempSettings.cycleTaskValuesList2 = value;
        this.taskMarker.updateSettings(tempSettings);
        yield this.plugin.saveSettings();
      }))
    );
    new import_obsidian2.Setting(this.containerEl).setName("Cycled task (list 3)").setDesc(
      "Specify an additional list of characters that indicate any task statuses."
    ).addText(
      (text) => text.setPlaceholder("ef").setValue(tempSettings.cycleTaskValuesList3).onChange((value) => __async(this, null, function* () {
        tempSettings.cycleTaskValuesList3 = value;
        this.taskMarker.updateSettings(tempSettings);
        yield this.plugin.saveSettings();
      }))
    );
    new import_obsidian2.Setting(this.containerEl).setName("Support cycling with list item").setDesc(
      "Default disabled. If enabled, list item would be included as the first cycled status."
    ).addToggle(
      (toggle) => toggle.setValue(tempSettings.supportCyclingWithListItem).onChange((value) => __async(this, null, function* () {
        tempSettings.supportCyclingWithListItem = value;
        this.taskMarker.updateSettings(tempSettings);
        yield this.plugin.saveSettings();
      }))
    );
    this.containerEl.createEl("h2", { text: "Append text" });
    new import_obsidian2.Setting(this.containerEl).setName("Append text to any line (text 1)").setDesc(
      "Default empty. If set non-empty, append the string of moment.js format to the end of the line text."
    ).addMomentFormat(
      (momentFormat) => momentFormat.setPlaceholder("[\u{1F4DD} ]YYYY-MM-DD").setValue(tempSettings.appendTextFormatAppend).onChange((value) => __async(this, null, function* () {
        try {
          (0, import_obsidian2.moment)().format(value);
          tempSettings.appendTextFormatAppend = value;
          this.taskMarker.updateSettings(tempSettings);
          yield this.plugin.saveSettings();
        } catch (e) {
          console.log(
            `Error parsing specified date format: ${value}`
          );
        }
      }))
    );
    new import_obsidian2.Setting(this.containerEl).setName("Append text to any line (text 2)").setDesc(
      "Default empty. If set non-empty, append the string of moment.js format to the end of the line text."
    ).addMomentFormat(
      (momentFormat) => momentFormat.setPlaceholder("[\u2705 ]YYYY-MM-DD").setValue(tempSettings.appendTextFormatAppendText2).onChange((value) => __async(this, null, function* () {
        try {
          (0, import_obsidian2.moment)().format(value);
          tempSettings.appendTextFormatAppendText2 = value;
          this.taskMarker.updateSettings(tempSettings);
          yield this.plugin.saveSettings();
        } catch (e) {
          console.log(
            `Error parsing specified date format: ${value}`
          );
        }
      }))
    );
    new import_obsidian2.Setting(this.containerEl).setName("Append text to any line (text 3)").setDesc(
      "Default empty. If set non-empty, append the string of moment.js format to the end of the line text."
    ).addMomentFormat(
      (momentFormat) => momentFormat.setPlaceholder("[\u274E ]YYYY-MM-DD").setValue(tempSettings.appendTextFormatAppendText3).onChange((value) => __async(this, null, function* () {
        try {
          (0, import_obsidian2.moment)().format(value);
          tempSettings.appendTextFormatAppendText3 = value;
          this.taskMarker.updateSettings(tempSettings);
          yield this.plugin.saveSettings();
        } catch (e) {
          console.log(
            `Error parsing specified date format: ${value}`
          );
        }
      }))
    );
    this.containerEl.createEl("h2", { text: "Append text automatically" });
    this.containerEl.createEl("p", {
      text: 'The settings below correspond to the command "Append text automatically".'
    });
    this.containerEl.appendChild(createEl("a", {
      text: 'See "Setting.md" for details.',
      href: "https://github.com/wenlzhang/obsidian-task-marker/blob/main/docs/Setting.md",
      cls: "linkInfo"
    }));
    new import_obsidian2.Setting(this.containerEl).setName("Append text to a task automatically").setDesc(
      "Default false. If set true, automatically append text to tasks according to the current task status."
    ).addToggle(
      (toggle) => toggle.setValue(tempSettings.supportAppendingTextAutomatically).onChange((value) => __async(this, null, function* () {
        tempSettings.supportAppendingTextAutomatically = value;
        this.taskMarker.updateSettings(tempSettings);
        yield this.plugin.saveSettings();
      }))
    );
    new import_obsidian2.Setting(this.containerEl).setName("Set for a marked task the default text to append automatically").setDesc(
      'Note that this requires "Append text to a task automatically" be enabled. Default "None".'
    ).addDropdown(
      (dropdown) => dropdown.addOption("none", "None").addOption("text-rows-1-2", "Append text according to individual rows").addOption("text-row-string", "Append text according to the row with string").addOption("text-row-1", "Append text always according to row 1").addOption("text-row-2", "Append text always according to row 2").setValue(tempSettings.appendTextAutoTaskDefault).onChange((value) => __async(this, null, function* () {
        tempSettings.appendTextAutoTaskDefault = value;
        this.taskMarker.updateSettings(tempSettings);
        yield this.plugin.saveSettings();
      }))
    );
    new import_obsidian2.Setting(this.containerEl).setName("Set for a non-task line the default text to append automatically").setDesc(
      'Note that this requires "Append text to a task automatically" be enabled. Default "None".'
    ).addDropdown(
      (dropdown) => dropdown.addOption("none", "None").addOption("text-1", "Append text to any line (text 1)").addOption("text-2", "Append text to any line (text 2)").addOption("text-3", "Append text to any line (text 3)").setValue(tempSettings.appendTextAutoLineDefault).onChange((value) => __async(this, null, function* () {
        tempSettings.appendTextAutoLineDefault = value;
        this.taskMarker.updateSettings(tempSettings);
        yield this.plugin.saveSettings();
      }))
    );
    this.containerEl.createEl("h2", {
      text: "Mark tasks using menu items"
    });
    this.containerEl.createEl("p", {
      text: "The following settings add right click context menu items for Task Marker commands. The menu items will work on the current line or within the current selection in Editing view."
    });
    new import_obsidian2.Setting(this.containerEl).setName("Add menu item for creating a task").setDesc(
      'This menu item will work in a way as specified in the section "Create tasks".'
    ).addToggle(
      (toggle) => toggle.setValue(tempSettings.rightClickCreate).onChange((value) => __async(this, null, function* () {
        tempSettings.rightClickCreate = value;
        this.taskMarker.updateSettings(tempSettings);
        yield this.plugin.saveSettings();
      }))
    );
    new import_obsidian2.Setting(this.containerEl).setName("Add menu item for completing a task").setDesc(
      'This menu item will work in a way as specified in the section "Complete tasks".'
    ).addToggle(
      (toggle) => toggle.setValue(tempSettings.rightClickComplete).onChange((value) => __async(this, null, function* () {
        tempSettings.rightClickComplete = value;
        this.taskMarker.updateSettings(tempSettings);
        yield this.plugin.saveSettings();
      }))
    );
    new import_obsidian2.Setting(this.containerEl).setName("Add menu item for marking a task").setDesc(
      'This menu item will work in a way as specified in the section "Mark tasks".'
    ).addToggle(
      (toggle) => toggle.setValue(tempSettings.rightClickMark).onChange((value) => __async(this, null, function* () {
        tempSettings.rightClickMark = value;
        this.taskMarker.updateSettings(tempSettings);
        yield this.plugin.saveSettings();
      }))
    );
    new import_obsidian2.Setting(this.containerEl).setName("Add menu item for cycling a task (main)").setDesc(
      'This menu item will work in a way as specified in the section "Cycle tasks".'
    ).addToggle(
      (toggle) => toggle.setValue(tempSettings.rightClickCycle).onChange((value) => __async(this, null, function* () {
        tempSettings.rightClickCycle = value;
        this.taskMarker.updateSettings(tempSettings);
        yield this.plugin.saveSettings();
      }))
    );
    new import_obsidian2.Setting(this.containerEl).setName("Add menu item for cycling a task reversely (main)").setDesc(
      'This menu item will work in a way as specified in the section "Cycle tasks".'
    ).addToggle(
      (toggle) => toggle.setValue(tempSettings.rightClickCycleReversely).onChange((value) => __async(this, null, function* () {
        tempSettings.rightClickCycleReversely = value;
        this.taskMarker.updateSettings(tempSettings);
        yield this.plugin.saveSettings();
      }))
    );
    new import_obsidian2.Setting(this.containerEl).setName("Add menu item for cycling a task (list 1)").setDesc(
      'This menu item will work in a way as specified in the section "Cycle tasks".'
    ).addToggle(
      (toggle) => toggle.setValue(tempSettings.rightClickCycleList1).onChange((value) => __async(this, null, function* () {
        tempSettings.rightClickCycleList1 = value;
        this.taskMarker.updateSettings(tempSettings);
        yield this.plugin.saveSettings();
      }))
    );
    new import_obsidian2.Setting(this.containerEl).setName("Add menu item for cycling a task (list 2)").setDesc(
      'This menu item will work in a way as specified in the section "Cycle tasks".'
    ).addToggle(
      (toggle) => toggle.setValue(tempSettings.rightClickCycleList2).onChange((value) => __async(this, null, function* () {
        tempSettings.rightClickCycleList2 = value;
        this.taskMarker.updateSettings(tempSettings);
        yield this.plugin.saveSettings();
      }))
    );
    new import_obsidian2.Setting(this.containerEl).setName("Add menu item for cycling a task (list 3)").setDesc(
      'This menu item will work in a way as specified in the section "Cycle tasks".'
    ).addToggle(
      (toggle) => toggle.setValue(tempSettings.rightClickCycleList3).onChange((value) => __async(this, null, function* () {
        tempSettings.rightClickCycleList3 = value;
        this.taskMarker.updateSettings(tempSettings);
        yield this.plugin.saveSettings();
      }))
    );
    new import_obsidian2.Setting(this.containerEl).setName("Add menu item for resetting a task").setDesc(
      "The menu item will reset the task."
    ).addToggle(
      (toggle) => toggle.setValue(tempSettings.rightClickResetTask).onChange((value) => __async(this, null, function* () {
        tempSettings.rightClickResetTask = value;
        this.taskMarker.updateSettings(tempSettings);
        yield this.plugin.saveSettings();
      }))
    );
    new import_obsidian2.Setting(this.containerEl).setName("Add menu item for appending text to a line (text 1)").setDesc(
      'This menu item will work in a way as specified in the section "Append text".'
    ).addToggle(
      (toggle) => toggle.setValue(tempSettings.rightClickAppend).onChange((value) => __async(this, null, function* () {
        tempSettings.rightClickAppend = value;
        this.taskMarker.updateSettings(tempSettings);
        yield this.plugin.saveSettings();
      }))
    );
    new import_obsidian2.Setting(this.containerEl).setName("Add menu item for appending text to a line (text 2)").setDesc(
      'This menu item will work in a way as specified in the section "Append text".'
    ).addToggle(
      (toggle) => toggle.setValue(tempSettings.rightClickAppendText2).onChange((value) => __async(this, null, function* () {
        tempSettings.rightClickAppendText2 = value;
        this.taskMarker.updateSettings(tempSettings);
        yield this.plugin.saveSettings();
      }))
    );
    new import_obsidian2.Setting(this.containerEl).setName("Add menu item for appending text to a line (text 3)").setDesc(
      'This menu item will work in a way as specified in the section "Append text".'
    ).addToggle(
      (toggle) => toggle.setValue(tempSettings.rightClickAppendText3).onChange((value) => __async(this, null, function* () {
        tempSettings.rightClickAppendText3 = value;
        this.taskMarker.updateSettings(tempSettings);
        yield this.plugin.saveSettings();
      }))
    );
    new import_obsidian2.Setting(this.containerEl).setName("Add menu item for appending text automatically").setDesc(
      'This menu item will work in a way as specified in the section "Append text automatically".'
    ).addToggle(
      (toggle) => toggle.setValue(tempSettings.rightClickAppendTextAuto).onChange((value) => __async(this, null, function* () {
        tempSettings.rightClickAppendTextAuto = value;
        this.taskMarker.updateSettings(tempSettings);
        yield this.plugin.saveSettings();
      }))
    );
  }
};

// src/taskmarker-TaskMarkModal.ts
var import_obsidian3 = require("obsidian");
function promptForMark(app, taskMarker) {
  return new Promise((resolve) => {
    const modal = new TaskMarkModal(app, taskMarker);
    modal.onClose = () => {
      resolve(modal.chosenMark);
    };
    modal.open();
  });
}
var TaskMarkModal = class extends import_obsidian3.Modal {
  constructor(app, taskMarker) {
    super(app);
    this.taskMarker = taskMarker;
    this.containerEl.id = "taskmarker-modal";
  }
  onOpen() {
    const selector = this.contentEl.createDiv(
      "taskmarker-selector markdown-preview-view"
    );
    const completedList = selector.createEl("ul");
    completedList.addClass("contains-task-list");
    this.addTaskValues(
      completedList,
      this.taskMarker.initSettings.completedTasks,
      true
    );
    const list = selector.createEl("ul");
    list.addClass("contains-task-list");
    this.addTaskValues(
      list,
      this.taskMarker.settings.incompleteTaskValues,
      false
    );
    const listRow2 = selector.createEl("ul");
    listRow2.addClass("contains-task-list");
    this.addTaskValues(
      listRow2,
      this.taskMarker.settings.incompleteTaskValuesRow2,
      false
    );
    const footer = selector.createEl("nav");
    const esc = footer.createSpan();
    esc.innerHTML = "<b>esc</b> to dismiss";
    const bksp = footer.createSpan();
    bksp.innerHTML = "<b>bksp</b> to remove <code>[]</code>";
    const self = this;
    const keyListener = function(event) {
      self.chosenMark = event.key;
      event.preventDefault();
      event.stopImmediatePropagation();
      self.close();
    };
    this.scope.register([], null, keyListener);
    this.scope.register(["Shift"], null, keyListener);
  }
  addTaskValues(list, choices, markComplete) {
    const self = this;
    for (const character of choices) {
      const li = list.createEl("li", {
        cls: "task-list-item " + (character == " " ? "" : " is-checked"),
        attr: {
          "data-task": character
        }
      });
      li.addEventListener("click", function(event) {
        self.chosenMark = character;
        self.close();
      });
      const input = li.createEl("input", {
        cls: "task-list-item-checkbox",
        attr: {
          id: "task-list-item-checkbox-" + character,
          type: "checkbox",
          style: "pointer-events: none;"
        }
      });
      if (character != " ") {
        input.setAttribute("checked", "");
      }
      li.createEl("span", {
        text: character == " " ? "\u2423" : character,
        attr: {
          style: "pointer-events: none;"
        }
      });
    }
  }
  onClose() {
    this.contentEl.empty();
  }
};

// src/taskmarker-Api.ts
var TaskMarkerApi = class {
  constructor(app, taskMarker) {
    this.app = app;
    this.taskMarker = taskMarker;
  }
  getCompletedTaskValues() {
    return this.taskMarker.initSettings.completedTasks;
  }
  getIncompleteTaskValues() {
    return this.taskMarker.settings.incompleteTaskValues;
  }
  getMark() {
    return promptForMark(this.app, this.taskMarker);
  }
  isComplete(value) {
    return this.getCompletedTaskValues().contains(value);
  }
  isCanceled(value) {
    return value === "-";
  }
};

// src/taskmarker-Plugin.ts
var TaskMarkerPlugin = class extends import_obsidian4.Plugin {
  constructor() {
    super(...arguments);
    this.handlersRegistered = false;
  }
  onload() {
    return __async(this, null, function* () {
      console.log("loading Task Marker (TM)");
      this.taskMarker = new TaskMarker(this.app);
      this.addSettingTab(
        new TaskMarkerSettingsTab(this.app, this, this.taskMarker)
      );
      yield this.loadSettings();
      (0, import_obsidian4.addIcon)(
        "tm-create-task" /* CREATE */,
        '<svg xmlns="http://www.w3.org/2000/svg" width="100px" height="100px" fill="currentColor" class="bi bi-check-square-fill" viewBox="0 0 14 14"><rect x="2" y="2" width="10" height="10" fill="white"/></svg>'
      );
      (0, import_obsidian4.addIcon)(
        "tm-complete-task" /* COMPLETE */,
        '<svg xmlns="http://www.w3.org/2000/svg" width="100px" height="100px" fill="currentColor" class="bi bi-check-square-fill" viewBox="0 0 14 14">  <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm10.03 4.97a.75.75 0 0 1 .011 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.75.75 0 0 1 1.08-.022z"/></svg>'
      );
      (0, import_obsidian4.addIcon)(
        "tm-cancel-task" /* CANCEL */,
        '<svg xmlns="http://www.w3.org/2000/svg" width="100px" height="100px" fill="currentColor" class="bi bi-dash-square-fill" viewBox="0 0 14 14">  <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm2.5 7.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1z"/></svg>'
      );
      (0, import_obsidian4.addIcon)(
        "tm-reset-task" /* RESET */,
        '<svg xmlns="http://www.w3.org/2000/svg" width="100px" height="100px" fill="currentColor" class="bi bi-square-fill" viewBox="0 0 14 14"><path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2z"/></svg>'
      );
      (0, import_obsidian4.addIcon)(
        "tm-mark-task" /* MARK */,
        '<svg class="bi bi-square-fill" width="100px" height="100px" fill="currentColor" version="1.1" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><path transform="scale(.16)" d="m12.5 0a12.5 12.5 0 00-12.5 12.5v75a12.5 12.5 0 0012.5 12.5h75a12.5 12.5 0 0012.5-12.5v-75a12.5 12.5 0 00-12.5-12.5h-75zm38.146 21.135 8.7324 19.098 20.684 3.6328-15.465 14.207 2.9355 20.793-18.289-10.316-18.869 9.2188 4.1602-20.584-14.598-15.098 20.861-2.4043 9.8477-18.547z" stroke-width="6.25"/></svg>'
      );
      (0, import_obsidian4.addIcon)(
        "tm-cycle-task" /* CYCLE */,
        '<svg xmlns="http://www.w3.org/2000/svg" width="100px" height="100px" fill="currentColor" class="bi bi-check-square-fill" viewBox="0 0 14 14"> <rect width="14" height="14" fill="currentColor"/> <text x="50%" y="50%" text-anchor="middle" font-size="12" font-weight="bold" dy=".3em" fill="white">C</text></svg>'
      );
      (0, import_obsidian4.addIcon)(
        "tm-cycle-reversely-task" /* CYCLE_REVERSELY */,
        '<svg xmlns="http://www.w3.org/2000/svg" width="100px" height="100px" fill="currentColor" class="bi bi-check-square-fill" viewBox="0 0 14 14"> <rect width="14" height="14" fill="currentColor"/> <text x="50%" y="50%" text-anchor="middle" font-size="12" font-weight="bold" dy=".3em" fill="white" transform="rotate(180,7,7)">C</text> </svg>'
      );
      (0, import_obsidian4.addIcon)(
        "tm-complete-all-tasks" /* COMPLETE_ALL */,
        '<svg class="bi bi-square-fill" fill="currentColor" version="1.1" width="100px" height="100px" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><path d="m2 0a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2v-12a2 2 0 00-2-2h-12zm1.5098 2.041h1.5a1.5 1.5 0 011.5 1.5v1.5a1.5 1.5 0 01-1.5 1.5h-1.5a1.5 1.5 0 01-1.5-1.5v-1.5a1.5 1.5 0 011.5-1.5zm4.3945 1.2207h5.6895a.40645.5 0 01.40625.5v1a.40645.5 0 01-.40625.5h-5.6895a.40645.5 0 01-.40625-.5v-1a.40645.5 0 01.40625-.5zm-4.4023 6.2656h1.5a1.5 1.5 0 011.5 1.5v1.5a1.5 1.5 0 01-1.5 1.5h-1.5a1.5 1.5 0 01-1.5-1.5v-1.5a1.5 1.5 0 011.5-1.5zm4.4023 1.2656h5.6895a.40645.5 0 01.40625.5v1a.40645.5 0 01-.40625.5h-5.6895a.40645.5 0 01-.40625-.5v-1a.40645.5 0 01.40625-.5z"/><g transform="translate(.49737 -.0026315)" fill="currentColor"><path d="m3.6171 13.149a.5.5 0 01-.708 0l-1-1a.50063.50063 0 01.708-.708l.646.647 1.646-1.647a.50063.50063 0 01.708.708z"/><path d="m3.6171 5.6181a.5.5 0 01-.708 0l-1-1a.50063.50063 0 11.708-.708l.646.647 1.646-1.647a.50063.50063 0 11.708.708z"/></g></svg>'
      );
      (0, import_obsidian4.addIcon)(
        "tm-clear-all-tasks" /* CLEAR */,
        '<svg class="bi bi-square-fill" fill="currentColor" version="1.1" width="100px" height="100px" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><path d="m2 0a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2v-12a2 2 0 00-2-2h-12zm1.5098 2.041h1.5a1.5 1.5 0 011.5 1.5v1.5a1.5 1.5 0 01-1.5 1.5h-1.5a1.5 1.5 0 01-1.5-1.5v-1.5a1.5 1.5 0 011.5-1.5zm4.3945 1.2207h5.6895a.40645.5 0 01.40625.5v1a.40645.5 0 01-.40625.5h-5.6895a.40645.5 0 01-.40625-.5v-1a.40645.5 0 01.40625-.5zm-4.4023 6.2656h1.5a1.5 1.5 0 011.5 1.5v1.5a1.5 1.5 0 01-1.5 1.5h-1.5a1.5 1.5 0 01-1.5-1.5v-1.5a1.5 1.5 0 011.5-1.5zm4.4023 1.2656h5.6895a.40645.5 0 01.40625.5v1a.40645.5 0 01-.40625.5h-5.6895a.40645.5 0 01-.40625-.5v-1a.40645.5 0 01.40625-.5z"/></svg>'
      );
      this.addCommand({
        id: "task-marker-create",
        name: "Create task",
        icon: "tm-create-task" /* CREATE */,
        editorCallback: (editor, view) => {
          this.markTaskOnLinesCreate(
            " ",
            editor,
            this.getCurrentLinesFromEditor(editor)
          );
        }
      });
      this.addCommand({
        id: "task-marker-complete",
        name: "Complete task",
        icon: "tm-complete-task" /* COMPLETE */,
        editorCallback: (editor, view) => {
          this.markTaskOnLines(
            "x",
            editor,
            this.getCurrentLinesFromEditor(editor)
          );
        }
      });
      this.addCommand({
        id: "task-marker-cancel",
        name: "Cancel task",
        icon: "tm-cancel-task" /* CANCEL */,
        editorCheckCallback: (checking, editor, view) => {
          const value = this.taskMarker.settings.supportCanceledTasks;
          if (value) {
            if (!checking) {
              this.markTaskOnLines(
                "-",
                editor,
                this.getCurrentLinesFromEditor(editor)
              );
            }
            return true;
          }
          return false;
        }
      });
      this.addCommand({
        id: "task-marker-mark",
        name: "Mark task",
        icon: "tm-mark-task" /* MARK */,
        editorCallback: (editor, view) => __async(this, null, function* () {
          const mark = yield promptForMark(this.app, this.taskMarker);
          if (mark) {
            this.markTaskOnLines(
              mark,
              editor,
              this.getCurrentLinesFromEditor(editor)
            );
          }
        })
      });
      this.addCommand({
        id: "task-marker-reset",
        name: "Reset task",
        icon: "tm-reset-task" /* RESET */,
        editorCallback: (editor, view) => {
          this.markTaskOnLines(
            " ",
            editor,
            this.getCurrentLinesFromEditor(editor)
          );
        }
      });
      this.addCommand({
        id: "task-marker-complete-all",
        name: "Complete all tasks",
        icon: "tm-complete-all-tasks" /* COMPLETE_ALL */,
        callback: () => __async(this, null, function* () {
          this.completeAllTasks();
        })
      });
      this.addCommand({
        id: "task-marker-reset-all",
        name: "Reset all completed tasks",
        icon: "tm-clear-all-tasks" /* CLEAR */,
        callback: () => __async(this, null, function* () {
          this.resetAllTasks();
        })
      });
      const incompleteTaskValuesLength = this.taskMarker.settings.incompleteTaskValues.length;
      if (incompleteTaskValuesLength >= 2) {
        for (let i = 1; i <= incompleteTaskValuesLength - 1; i++) {
          this.addCommand({
            id: "task-marker-mark-task-status-row1-" + i.toString(),
            name: "Mark task (row 1) as status " + i.toString() + ' "' + this.taskMarker.settings.incompleteTaskValues[i] + '"',
            icon: "tm-mark-task" /* MARK */,
            editorCallback: (editor, view) => {
              this.markTaskOnLines(
                this.taskMarker.settings.incompleteTaskValues[i],
                editor,
                this.getCurrentLinesFromEditor(editor)
              );
            }
          });
        }
      }
      const incompleteTaskValuesRow2Length = this.taskMarker.settings.incompleteTaskValuesRow2.length;
      if (incompleteTaskValuesRow2Length >= 1) {
        for (let i = 0; i <= incompleteTaskValuesRow2Length - 1; i++) {
          this.addCommand({
            id: "task-marker-mark-task-status-row2-" + (i + 1).toString(),
            name: "Mark task (row 2) as status " + (i + 1).toString() + ' "' + this.taskMarker.settings.incompleteTaskValuesRow2[i] + '"',
            icon: "tm-mark-task" /* MARK */,
            editorCallback: (editor, view) => {
              this.markTaskOnLines(
                this.taskMarker.settings.incompleteTaskValuesRow2[i],
                editor,
                this.getCurrentLinesFromEditor(editor)
              );
            }
          });
        }
      }
      this.addCommand({
        id: "task-marker-cycle-task",
        name: "Cycle task (main)",
        icon: "tm-cycle-task" /* CYCLE */,
        editorCallback: (editor, view) => {
          this.markTaskOnLinesCycle(
            "y",
            // This value does not matter.
            editor,
            this.getCurrentLinesFromEditor(editor)
          );
        }
      });
      this.addCommand({
        id: "task-marker-cycle-task-1",
        name: "Cycle task (list 1)",
        icon: "tm-cycle-task" /* CYCLE */,
        editorCallback: (editor, view) => {
          this.markTaskOnLinesCycleList1(
            "y",
            // This value does not matter.
            editor,
            this.getCurrentLinesFromEditor(editor)
          );
        }
      });
      this.addCommand({
        id: "task-marker-cycle-task-2",
        name: "Cycle task (list 2)",
        icon: "tm-cycle-task" /* CYCLE */,
        editorCallback: (editor, view) => {
          this.markTaskOnLinesCycleList2(
            "y",
            // This value does not matter.
            editor,
            this.getCurrentLinesFromEditor(editor)
          );
        }
      });
      this.addCommand({
        id: "task-marker-cycle-task-3",
        name: "Cycle task (list 3)",
        icon: "tm-cycle-task" /* CYCLE */,
        editorCallback: (editor, view) => {
          this.markTaskOnLinesCycleList3(
            "y",
            // This value does not matter.
            editor,
            this.getCurrentLinesFromEditor(editor)
          );
        }
      });
      this.addCommand({
        id: "task-marker-cycle-task-reversely",
        name: "Cycle task reversely (main)",
        icon: "tm-cycle-reversely-task" /* CYCLE_REVERSELY */,
        editorCheckCallback: (checking, editor, view) => {
          const value = this.taskMarker.settings.supportCyclingTasksReversely;
          if (value) {
            if (!checking) {
              this.markTaskOnLinesCycleReversely(
                "y",
                // This value does not matter.
                editor,
                this.getCurrentLinesFromEditor(editor)
              );
            }
            return true;
          }
          return false;
        }
      });
      this.addCommand({
        id: "task-marker-append-text",
        name: "Append text 1",
        // icon: Icons.RESET,
        editorCallback: (editor, view) => {
          this.appendTextOnLines(
            "y",
            // The mark value does not matter.
            editor,
            this.getCurrentLinesFromEditor(editor)
          );
        }
      });
      this.addCommand({
        id: "task-marker-append-text-2",
        name: "Append text 2",
        // icon: Icons.RESET,
        editorCallback: (editor, view) => {
          this.appendTextOnLinesText2(
            "y",
            // The mark value does not matter.
            editor,
            this.getCurrentLinesFromEditor(editor)
          );
        }
      });
      this.addCommand({
        id: "task-marker-append-text-3",
        name: "Append text 3",
        // icon: Icons.RESET,
        editorCallback: (editor, view) => {
          this.appendTextOnLinesText3(
            "y",
            // The mark value does not matter.
            editor,
            this.getCurrentLinesFromEditor(editor)
          );
        }
      });
      this.addCommand({
        id: "task-marker-append-text-auto",
        name: "Append text automatically",
        // icon: Icons.RESET,
        editorCheckCallback: (checking, editor, view) => {
          const value = this.taskMarker.settings.supportAppendingTextAutomatically;
          if (value) {
            if (!checking) {
              this.appendTextOnLinesAuto(
                "y",
                // The mark value does not matter.
                editor,
                this.getCurrentLinesFromEditor(editor)
              );
            }
            return true;
          }
          return false;
        }
      });
      this.registerHandlers();
      this.api = new TaskMarkerApi(this.app, this.taskMarker);
    });
  }
  getCurrentLinesFromEditor(editor) {
    const lines = [];
    if (editor.somethingSelected()) {
      const cursorStart = editor.getCursor("from");
      const cursorEnd = editor.getCursor("to");
      for (let i = cursorStart.line; i <= cursorEnd.line; i++) {
        lines.push(i);
      }
    } else {
      const anchor = editor.getCursor("from");
      lines.push(anchor.line);
    }
    return lines;
  }
  buildMenu(menu, editor, lines) {
    if (this.taskMarker.settings.rightClickCreate) {
      menu.addItem(
        (item) => item.setTitle("(TM) Create task").setIcon("tm-create-task" /* CREATE */).onClick(() => {
          this.markTaskOnLinesCreate(" ", editor, lines);
        })
      );
    }
    if (this.taskMarker.settings.rightClickComplete) {
      menu.addItem(
        (item) => item.setTitle("(TM) Complete task").setIcon("tm-complete-task" /* COMPLETE */).onClick(() => {
          this.markTaskOnLines("x", editor, lines);
        })
      );
      if (this.taskMarker.settings.supportCanceledTasks) {
        menu.addItem(
          (item) => item.setTitle("(TM) Cancel task").setIcon("tm-cancel-task" /* CANCEL */).onClick(() => {
            this.markTaskOnLines("-", editor, lines);
          })
        );
      }
    }
    if (this.taskMarker.settings.rightClickMark) {
      menu.addItem(
        (item) => item.setTitle("(TM) Mark task").setIcon("tm-mark-task" /* MARK */).onClick(() => __async(this, null, function* () {
          const mark = yield promptForMark(
            this.app,
            this.taskMarker
          );
          if (mark) {
            this.markTaskOnLines(mark, editor, lines);
          }
        }))
      );
    }
    if (this.taskMarker.settings.rightClickCycle) {
      menu.addItem(
        (item) => item.setTitle("(TM) Cycle task (main)").setIcon("tm-cycle-task" /* CYCLE */).onClick(() => {
          this.markTaskOnLinesCycle("y", editor, lines);
        })
      );
    }
    if (this.taskMarker.settings.rightClickCycleList1) {
      menu.addItem(
        (item) => item.setTitle("(TM) Cycle task (list 1)").setIcon("tm-cycle-task" /* CYCLE */).onClick(() => {
          this.markTaskOnLinesCycleList1("y", editor, lines);
        })
      );
    }
    if (this.taskMarker.settings.rightClickCycleList2) {
      menu.addItem(
        (item) => item.setTitle("(TM) Cycle task (list 2)").setIcon("tm-cycle-task" /* CYCLE */).onClick(() => {
          this.markTaskOnLinesCycleList2("y", editor, lines);
        })
      );
    }
    if (this.taskMarker.settings.rightClickCycleList3) {
      menu.addItem(
        (item) => item.setTitle("(TM) Cycle task (list 3)").setIcon("tm-cycle-task" /* CYCLE */).onClick(() => {
          this.markTaskOnLinesCycleList3("y", editor, lines);
        })
      );
    }
    if (this.taskMarker.settings.rightClickCycleReversely) {
      menu.addItem(
        (item) => item.setTitle("(TM) Cycle task reversely (main)").setIcon("tm-cycle-reversely-task" /* CYCLE_REVERSELY */).onClick(() => {
          this.markTaskOnLinesCycleReversely("y", editor, lines);
        })
      );
    }
    if (this.taskMarker.settings.rightClickResetTask) {
      menu.addItem(
        (item) => item.setTitle("(TM) Reset task").setIcon("tm-reset-task" /* RESET */).onClick(() => {
          this.markTaskOnLines(" ", editor, lines);
        })
      );
    }
    if (this.taskMarker.settings.rightClickAppend) {
      menu.addItem(
        (item) => item.setTitle("(TM) Append text 1").onClick(() => {
          this.appendTextOnLines("y", editor, lines);
        })
      );
    }
    if (this.taskMarker.settings.rightClickAppendText2) {
      menu.addItem(
        (item) => item.setTitle("(TM) Append text 2").onClick(() => {
          this.appendTextOnLinesText2("y", editor, lines);
        })
      );
    }
    if (this.taskMarker.settings.rightClickAppendText3) {
      menu.addItem(
        (item) => item.setTitle("(TM) Append text 3").onClick(() => {
          this.appendTextOnLinesText3("y", editor, lines);
        })
      );
    }
    if (this.taskMarker.settings.rightClickAppendTextAuto) {
      menu.addItem(
        (item) => item.setTitle("(TM) Append text automatically").onClick(() => {
          this.appendTextOnLinesAuto("y", editor, lines);
        })
      );
    }
    if (this.taskMarker.settings.rightClickToggleAll) {
      menu.addItem(
        (item) => item.setTitle("(TM) Complete all tasks").setIcon("tm-complete-all-tasks" /* COMPLETE_ALL */).onClick(() => __async(this, null, function* () {
          this.completeAllTasks();
        }))
      );
    }
    if (this.taskMarker.settings.rightClickResetAll) {
      menu.addItem(
        (item) => item.setTitle("(TM) Reset all tasks").setIcon("tm-clear-all-tasks" /* CLEAR */).onClick(() => __async(this, null, function* () {
          this.resetAllTasks();
        }))
      );
    }
  }
  markTaskOnLines(mark, editor, lines) {
    return __async(this, null, function* () {
      const activeFile = this.app.workspace.getActiveFile();
      const source = yield this.app.vault.read(activeFile);
      const cursorPosition = editor.getCursor();
      if (!cursorPosition) {
        console.error("Failed to get cursor position");
        return;
      }
      const result = this.taskMarker.markTaskInSource(source, mark, lines);
      if (!result || !result.updatedLineText || !result.cursorOffset) {
        console.error("Failed to mark task in source");
        return;
      }
      yield this.app.vault.modify(activeFile, result.updatedLineText);
      if (!cursorPosition || !("line" in cursorPosition && "ch" in cursorPosition) || !Array.isArray(result.cursorOffset) || result.cursorOffset.length !== 1) {
        console.error("Invalid cursor position or offset");
        return;
      }
      let newCursorPosition = { line: cursorPosition.line, ch: cursorPosition.ch + result.cursorOffset[0] };
      editor.setCursor(newCursorPosition);
    });
  }
  markTaskOnLinesCycle(mark, editor, lines) {
    return __async(this, null, function* () {
      const activeFile = this.app.workspace.getActiveFile();
      const source = yield this.app.vault.read(activeFile);
      const cursorPosition = editor.getCursor();
      if (!cursorPosition) {
        console.error("Failed to get cursor position");
        return;
      }
      const result = this.taskMarker.markTaskInSourceCycle(source, mark, lines);
      if (!result || !result.updatedLineText || !result.cursorOffset) {
        console.error("Failed to mark task in source");
        return;
      }
      yield this.app.vault.modify(activeFile, result.updatedLineText);
      if (!cursorPosition || !("line" in cursorPosition && "ch" in cursorPosition) || !Array.isArray(result.cursorOffset) || result.cursorOffset.length !== 1) {
        console.error("Invalid cursor position or offset");
        return;
      }
      let newCursorPosition = { line: cursorPosition.line, ch: cursorPosition.ch + result.cursorOffset[0] };
      editor.setCursor(newCursorPosition);
    });
  }
  markTaskOnLinesCycleList1(mark, editor, lines) {
    return __async(this, null, function* () {
      const activeFile = this.app.workspace.getActiveFile();
      const source = yield this.app.vault.read(activeFile);
      const cursorPosition = editor.getCursor();
      if (!cursorPosition) {
        console.error("Failed to get cursor position");
        return;
      }
      const result = this.taskMarker.markTaskInSourceCycleList1(source, mark, lines);
      if (!result || !result.updatedLineText || !result.cursorOffset) {
        console.error("Failed to mark task in source");
        return;
      }
      yield this.app.vault.modify(activeFile, result.updatedLineText);
      if (!cursorPosition || !("line" in cursorPosition && "ch" in cursorPosition) || !Array.isArray(result.cursorOffset) || result.cursorOffset.length !== 1) {
        console.error("Invalid cursor position or offset");
        return;
      }
      let newCursorPosition = { line: cursorPosition.line, ch: cursorPosition.ch + result.cursorOffset[0] };
      editor.setCursor(newCursorPosition);
    });
  }
  markTaskOnLinesCycleList2(mark, editor, lines) {
    return __async(this, null, function* () {
      const activeFile = this.app.workspace.getActiveFile();
      const source = yield this.app.vault.read(activeFile);
      const cursorPosition = editor.getCursor();
      if (!cursorPosition) {
        console.error("Failed to get cursor position");
        return;
      }
      const result = this.taskMarker.markTaskInSourceCycleList2(source, mark, lines);
      if (!result || !result.updatedLineText || !result.cursorOffset) {
        console.error("Failed to mark task in source");
        return;
      }
      yield this.app.vault.modify(activeFile, result.updatedLineText);
      if (!cursorPosition || !("line" in cursorPosition && "ch" in cursorPosition) || !Array.isArray(result.cursorOffset) || result.cursorOffset.length !== 1) {
        console.error("Invalid cursor position or offset");
        return;
      }
      let newCursorPosition = { line: cursorPosition.line, ch: cursorPosition.ch + result.cursorOffset[0] };
      editor.setCursor(newCursorPosition);
    });
  }
  markTaskOnLinesCycleList3(mark, editor, lines) {
    return __async(this, null, function* () {
      const activeFile = this.app.workspace.getActiveFile();
      const source = yield this.app.vault.read(activeFile);
      const cursorPosition = editor.getCursor();
      if (!cursorPosition) {
        console.error("Failed to get cursor position");
        return;
      }
      const result = this.taskMarker.markTaskInSourceCycleList3(source, mark, lines);
      if (!result || !result.updatedLineText || !result.cursorOffset) {
        console.error("Failed to mark task in source");
        return;
      }
      yield this.app.vault.modify(activeFile, result.updatedLineText);
      if (!cursorPosition || !("line" in cursorPosition && "ch" in cursorPosition) || !Array.isArray(result.cursorOffset) || result.cursorOffset.length !== 1) {
        console.error("Invalid cursor position or offset");
        return;
      }
      let newCursorPosition = { line: cursorPosition.line, ch: cursorPosition.ch + result.cursorOffset[0] };
      editor.setCursor(newCursorPosition);
    });
  }
  markTaskOnLinesCycleReversely(mark, editor, lines) {
    return __async(this, null, function* () {
      const activeFile = this.app.workspace.getActiveFile();
      const source = yield this.app.vault.read(activeFile);
      const cursorPosition = editor.getCursor();
      if (!cursorPosition) {
        console.error("Failed to get cursor position");
        return;
      }
      const result = this.taskMarker.markTaskInSourceCycleReversely(source, mark, lines);
      if (!result || !result.updatedLineText || !result.cursorOffset) {
        console.error("Failed to mark task in source");
        return;
      }
      yield this.app.vault.modify(activeFile, result.updatedLineText);
      if (!cursorPosition || !("line" in cursorPosition && "ch" in cursorPosition) || !Array.isArray(result.cursorOffset) || result.cursorOffset.length !== 1) {
        console.error("Invalid cursor position or offset");
        return;
      }
      let newCursorPosition = { line: cursorPosition.line, ch: cursorPosition.ch + result.cursorOffset[0] };
      editor.setCursor(newCursorPosition);
    });
  }
  markTaskOnLinesCreate(mark, editor, lines) {
    return __async(this, null, function* () {
      const activeFile = this.app.workspace.getActiveFile();
      const source = yield this.app.vault.read(activeFile);
      const cursorPosition = editor.getCursor();
      if (!cursorPosition) {
        console.error("Failed to get cursor position");
        return;
      }
      const result = this.taskMarker.markTaskInSourceCreate(source, mark, lines);
      if (!result || !result.updatedLineText || !result.cursorOffset) {
        console.error("Failed to mark task in source");
        return;
      }
      yield this.app.vault.modify(activeFile, result.updatedLineText);
      if (!cursorPosition || !("line" in cursorPosition && "ch" in cursorPosition) || !Array.isArray(result.cursorOffset) || result.cursorOffset.length !== 1) {
        console.error("Invalid cursor position or offset");
        return;
      }
      let newCursorPosition = { line: cursorPosition.line, ch: cursorPosition.ch + result.cursorOffset[0] };
      editor.setCursor(newCursorPosition);
    });
  }
  appendTextOnLines(mark, editor, lines) {
    return __async(this, null, function* () {
      const activeFile = this.app.workspace.getActiveFile();
      const source = yield this.app.vault.read(activeFile);
      const cursorPosition = editor.getCursor();
      const result = this.taskMarker.appendTextInSource(source, mark, lines);
      yield this.app.vault.modify(activeFile, result);
      editor.setCursor(cursorPosition);
    });
  }
  appendTextOnLinesText2(mark, editor, lines) {
    return __async(this, null, function* () {
      const activeFile = this.app.workspace.getActiveFile();
      const source = yield this.app.vault.read(activeFile);
      const cursorPosition = editor.getCursor();
      const result = this.taskMarker.appendTextInSourceText2(source, mark, lines);
      yield this.app.vault.modify(activeFile, result);
      editor.setCursor(cursorPosition);
    });
  }
  appendTextOnLinesText3(mark, editor, lines) {
    return __async(this, null, function* () {
      const activeFile = this.app.workspace.getActiveFile();
      const source = yield this.app.vault.read(activeFile);
      const cursorPosition = editor.getCursor();
      const result = this.taskMarker.appendTextInSourceText3(source, mark, lines);
      yield this.app.vault.modify(activeFile, result);
      editor.setCursor(cursorPosition);
    });
  }
  appendTextOnLinesAuto(mark, editor, lines) {
    return __async(this, null, function* () {
      const activeFile = this.app.workspace.getActiveFile();
      const source = yield this.app.vault.read(activeFile);
      const cursorPosition = editor.getCursor();
      const result = this.taskMarker.appendTextInSourceAuto(source, mark, lines);
      yield this.app.vault.modify(activeFile, result);
      editor.setCursor(cursorPosition);
    });
  }
  // async moveAllTasks(): Promise<void> {
  //     const activeFile = this.app.workspace.getActiveFile();
  //     const source = await this.app.vault.read(activeFile);
  //     const result = this.taskMarker.moveCompletedTasksInFile(source);
  //     this.app.vault.modify(activeFile, result);
  // }
  completeAllTasks() {
    return __async(this, null, function* () {
      const activeFile = this.app.workspace.getActiveFile();
      const source = yield this.app.vault.read(activeFile);
      const result = this.taskMarker.markAllTasksComplete(source, "x");
      this.app.vault.modify(activeFile, result);
    });
  }
  resetAllTasks() {
    return __async(this, null, function* () {
      const activeFile = this.app.workspace.getActiveFile();
      const source = yield this.app.vault.read(activeFile);
      const result = this.taskMarker.resetAllTasks(source);
      this.app.vault.modify(activeFile, result);
    });
  }
  registerHandlers() {
    if (this.taskMarker.initSettings.registerHandlers && !this.handlersRegistered) {
      this.handlersRegistered = true;
      if (this.taskMarker.initSettings.rightClickTaskMenu) {
        this.registerEvent(
          this.eventRef = this.app.workspace.on(
            "editor-menu",
            (menu, editor) => {
              this.buildMenu(
                menu,
                editor,
                this.getCurrentLinesFromEditor(editor)
              );
            }
          )
        );
      }
      this.registerMarkdownPostProcessor(
        this.postProcessor = (el, ctx) => {
          const checkboxes = el.querySelectorAll(
            ".task-list-item-checkbox"
          );
          if (!checkboxes.length)
            return;
          const section = ctx.getSectionInfo(el);
          if (!section)
            return;
          const { lineStart } = section;
          for (const checkbox of Array.from(checkboxes)) {
            const line = Number(checkbox.dataset.line);
            if (this.taskMarker.initSettings.rightClickTaskMenu) {
              this.registerDomEvent(
                checkbox.parentElement,
                "contextmenu",
                (ev) => {
                  ev.preventDefault();
                  const view = this.app.workspace.getActiveViewOfType(
                    import_obsidian4.MarkdownView
                  );
                  if (view && view.editor) {
                    const menu = new import_obsidian4.Menu();
                    this.buildMenu(menu, [
                      lineStart + line
                    ]);
                    menu.showAtMouseEvent(ev);
                  }
                }
              );
            }
            if (this.taskMarker.settings.previewOnClick) {
              this.registerDomEvent(
                checkbox,
                "click",
                (ev) => __async(this, null, function* () {
                  ev.stopImmediatePropagation();
                  ev.preventDefault();
                  const mark = yield promptForMark(
                    this.app,
                    this.taskMarker
                  );
                  if (mark) {
                    this.markTaskOnLines(mark, [
                      lineStart + line
                    ]);
                  }
                })
              );
            }
          }
        }
      );
    }
  }
  unregisterHandlers() {
    this.handlersRegistered = false;
    if (this.eventRef) {
      this.app.workspace.offref(this.eventRef);
      this.eventRef = null;
    }
    if (this.postProcessor) {
      import_obsidian4.MarkdownPreviewRenderer.unregisterPostProcessor(this.postProcessor);
      this.postProcessor = null;
    }
  }
  onunload() {
    console.log("unloading Task Marker (TM)");
  }
  loadSettings() {
    return __async(this, null, function* () {
      const settings = Object.assign(
        {},
        DEFAULT_SETTINGS,
        yield this.loadData()
      );
      if (settings.rightClickReset) {
        delete settings.rightClickReset;
        yield this.saveData(settings);
      }
      this.taskMarker.updateSettings(settings);
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.taskMarker.settings);
      if (this.taskMarker.initSettings.rightClickTaskMenu && !this.handlersRegistered) {
        this.registerHandlers();
      }
      if (!this.taskMarker.initSettings.rightClickTaskMenu && this.handlersRegistered) {
        this.unregisterHandlers();
      }
    });
  }
};

// src/main.ts
var main_default = TaskMarkerPlugin;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL21haW4udHMiLCAiLi4vc3JjL3Rhc2ttYXJrZXItUGx1Z2luLnRzIiwgIi4uL3NyYy90YXNrbWFya2VyLVRhc2tNYXJrZXIudHMiLCAiLi4vc3JjL3Rhc2ttYXJrZXItU2V0dGluZ3MudHMiLCAiLi4vc3JjL3Rhc2ttYXJrZXItU2V0dGluZ3NUYWIudHMiLCAiLi4vc3JjL3Rhc2ttYXJrZXItVGFza01hcmtNb2RhbC50cyIsICIuLi9zcmMvdGFza21hcmtlci1BcGkudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IFRhc2tNYXJrZXJQbHVnaW4gfSBmcm9tIFwiLi90YXNrbWFya2VyLVBsdWdpblwiO1xuXG5leHBvcnQgZGVmYXVsdCBUYXNrTWFya2VyUGx1Z2luO1xuIiwgImltcG9ydCB7XG4gICAgYWRkSWNvbixcbiAgICBFZGl0b3IsXG4gICAgTWFya2Rvd25WaWV3LFxuICAgIFBsdWdpbixcbiAgICBDb21tYW5kLFxuICAgIE1lbnUsXG4gICAgRXZlbnRSZWYsXG4gICAgTWFya2Rvd25Qb3N0UHJvY2Vzc29yLFxuICAgIE1hcmtkb3duUHJldmlld1JlbmRlcmVyLFxufSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IFRhc2tNYXJrZXIgfSBmcm9tIFwiLi90YXNrbWFya2VyLVRhc2tNYXJrZXJcIjtcbmltcG9ydCB7IERFRkFVTFRfU0VUVElOR1MgfSBmcm9tIFwiLi90YXNrbWFya2VyLVNldHRpbmdzXCI7XG5pbXBvcnQgeyBUYXNrTWFya2VyU2V0dGluZ3NUYWIgfSBmcm9tIFwiLi90YXNrbWFya2VyLVNldHRpbmdzVGFiXCI7XG5pbXBvcnQgeyBwcm9tcHRGb3JNYXJrIH0gZnJvbSBcIi4vdGFza21hcmtlci1UYXNrTWFya01vZGFsXCI7XG5pbXBvcnQgeyBBUEkgfSBmcm9tIFwiLi9AdHlwZXMvYXBpXCI7XG5pbXBvcnQgeyBUYXNrTWFya2VyQXBpIH0gZnJvbSBcIi4vdGFza21hcmtlci1BcGlcIjtcblxuZW51bSBJY29ucyB7XG4gICAgQ1JFQVRFID0gXCJ0bS1jcmVhdGUtdGFza1wiLFxuICAgIENPTVBMRVRFID0gXCJ0bS1jb21wbGV0ZS10YXNrXCIsXG4gICAgQ0FOQ0VMID0gXCJ0bS1jYW5jZWwtdGFza1wiLFxuICAgIFJFU0VUID0gXCJ0bS1yZXNldC10YXNrXCIsXG4gICAgTUFSSyA9IFwidG0tbWFyay10YXNrXCIsXG4gICAgQ1lDTEUgPSBcInRtLWN5Y2xlLXRhc2tcIixcbiAgICBDWUNMRV9SRVZFUlNFTFkgPSBcInRtLWN5Y2xlLXJldmVyc2VseS10YXNrXCIsXG4gICAgQ09NUExFVEVfQUxMID0gXCJ0bS1jb21wbGV0ZS1hbGwtdGFza3NcIixcbiAgICBDTEVBUiA9IFwidG0tY2xlYXItYWxsLXRhc2tzXCIsXG4gICAgTU9WRSA9IFwidG0tbW92ZS1hbGwtY2hlY2tlZC10YXNrc1wiLFxufVxuXG5leHBvcnQgY2xhc3MgVGFza01hcmtlclBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gICAgdGFza01hcmtlcjogVGFza01hcmtlcjtcblxuICAgIC8qKiBFeHRlcm5hbC1mYWNpbmcgcGx1Z2luIEFQSS4gKi9cbiAgICBwdWJsaWMgYXBpOiBBUEk7XG5cbiAgICBhc3luYyBvbmxvYWQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwibG9hZGluZyBUYXNrIE1hcmtlciAoVE0pXCIpO1xuICAgICAgICB0aGlzLnRhc2tNYXJrZXIgPSBuZXcgVGFza01hcmtlcih0aGlzLmFwcCk7XG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihcbiAgICAgICAgICAgIG5ldyBUYXNrTWFya2VyU2V0dGluZ3NUYWIodGhpcy5hcHAsIHRoaXMsIHRoaXMudGFza01hcmtlcilcbiAgICAgICAgKTtcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcbiAgICAgICAgXG4gICAgICAgIGFkZEljb24oXG4gICAgICAgICAgICBJY29ucy5DUkVBVEUsXG4gICAgICAgICAgICAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIxMDBweFwiIGhlaWdodD1cIjEwMHB4XCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIGNsYXNzPVwiYmkgYmktY2hlY2stc3F1YXJlLWZpbGxcIiB2aWV3Qm94PVwiMCAwIDE0IDE0XCI+PHJlY3QgeD1cIjJcIiB5PVwiMlwiIHdpZHRoPVwiMTBcIiBoZWlnaHQ9XCIxMFwiIGZpbGw9XCJ3aGl0ZVwiLz48L3N2Zz4nXG4gICAgICAgICk7XG4gICAgICAgIGFkZEljb24oXG4gICAgICAgICAgICBJY29ucy5DT01QTEVURSxcbiAgICAgICAgICAgICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjEwMHB4XCIgaGVpZ2h0PVwiMTAwcHhcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgY2xhc3M9XCJiaSBiaS1jaGVjay1zcXVhcmUtZmlsbFwiIHZpZXdCb3g9XCIwIDAgMTQgMTRcIj4gIDxwYXRoIGQ9XCJNMiAwYTIgMiAwIDAgMC0yIDJ2MTJhMiAyIDAgMCAwIDIgMmgxMmEyIDIgMCAwIDAgMi0yVjJhMiAyIDAgMCAwLTItMkgyem0xMC4wMyA0Ljk3YS43NS43NSAwIDAgMSAuMDExIDEuMDVsLTMuOTkyIDQuOTlhLjc1Ljc1IDAgMCAxLTEuMDguMDJMNC4zMjQgOC4zODRhLjc1Ljc1IDAgMSAxIDEuMDYtMS4wNmwyLjA5NCAyLjA5MyAzLjQ3My00LjQyNWEuNzUuNzUgMCAwIDEgMS4wOC0uMDIyelwiLz48L3N2Zz4nXG4gICAgICAgICk7XG4gICAgICAgIGFkZEljb24oXG4gICAgICAgICAgICBJY29ucy5DQU5DRUwsXG4gICAgICAgICAgICAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIxMDBweFwiIGhlaWdodD1cIjEwMHB4XCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIGNsYXNzPVwiYmkgYmktZGFzaC1zcXVhcmUtZmlsbFwiIHZpZXdCb3g9XCIwIDAgMTQgMTRcIj4gIDxwYXRoIGQ9XCJNMiAwYTIgMiAwIDAgMC0yIDJ2MTJhMiAyIDAgMCAwIDIgMmgxMmEyIDIgMCAwIDAgMi0yVjJhMiAyIDAgMCAwLTItMkgyem0yLjUgNy41aDdhLjUuNSAwIDAgMSAwIDFoLTdhLjUuNSAwIDAgMSAwLTF6XCIvPjwvc3ZnPidcbiAgICAgICAgKTtcbiAgICAgICAgYWRkSWNvbihcbiAgICAgICAgICAgIEljb25zLlJFU0VULFxuICAgICAgICAgICAgJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMTAwcHhcIiBoZWlnaHQ9XCIxMDBweFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBjbGFzcz1cImJpIGJpLXNxdWFyZS1maWxsXCIgdmlld0JveD1cIjAgMCAxNCAxNFwiPjxwYXRoIGQ9XCJNMCAyYTIgMiAwIDAgMSAyLTJoMTJhMiAyIDAgMCAxIDIgMnYxMmEyIDIgMCAwIDEtMiAySDJhMiAyIDAgMCAxLTItMlYyelwiLz48L3N2Zz4nXG4gICAgICAgICk7XG4gICAgICAgIGFkZEljb24oXG4gICAgICAgICAgICBJY29ucy5NQVJLLFxuICAgICAgICAgICAgJzxzdmcgY2xhc3M9XCJiaSBiaS1zcXVhcmUtZmlsbFwiIHdpZHRoPVwiMTAwcHhcIiBoZWlnaHQ9XCIxMDBweFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiB2ZXJzaW9uPVwiMS4xXCIgdmlld0JveD1cIjAgMCAxNCAxNFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCB0cmFuc2Zvcm09XCJzY2FsZSguMTYpXCIgZD1cIm0xMi41IDBhMTIuNSAxMi41IDAgMDAtMTIuNSAxMi41djc1YTEyLjUgMTIuNSAwIDAwMTIuNSAxMi41aDc1YTEyLjUgMTIuNSAwIDAwMTIuNS0xMi41di03NWExMi41IDEyLjUgMCAwMC0xMi41LTEyLjVoLTc1em0zOC4xNDYgMjEuMTM1IDguNzMyNCAxOS4wOTggMjAuNjg0IDMuNjMyOC0xNS40NjUgMTQuMjA3IDIuOTM1NSAyMC43OTMtMTguMjg5LTEwLjMxNi0xOC44NjkgOS4yMTg4IDQuMTYwMi0yMC41ODQtMTQuNTk4LTE1LjA5OCAyMC44NjEtMi40MDQzIDkuODQ3Ny0xOC41NDd6XCIgc3Ryb2tlLXdpZHRoPVwiNi4yNVwiLz48L3N2Zz4nXG4gICAgICAgICk7XG4gICAgICAgIGFkZEljb24oXG4gICAgICAgICAgICBJY29ucy5DWUNMRSxcbiAgICAgICAgICAgICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjEwMHB4XCIgaGVpZ2h0PVwiMTAwcHhcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgY2xhc3M9XCJiaSBiaS1jaGVjay1zcXVhcmUtZmlsbFwiIHZpZXdCb3g9XCIwIDAgMTQgMTRcIj4gPHJlY3Qgd2lkdGg9XCIxNFwiIGhlaWdodD1cIjE0XCIgZmlsbD1cImN1cnJlbnRDb2xvclwiLz4gPHRleHQgeD1cIjUwJVwiIHk9XCI1MCVcIiB0ZXh0LWFuY2hvcj1cIm1pZGRsZVwiIGZvbnQtc2l6ZT1cIjEyXCIgZm9udC13ZWlnaHQ9XCJib2xkXCIgZHk9XCIuM2VtXCIgZmlsbD1cIndoaXRlXCI+QzwvdGV4dD48L3N2Zz4nXG4gICAgICAgICk7XG4gICAgICAgIGFkZEljb24oXG4gICAgICAgICAgICBJY29ucy5DWUNMRV9SRVZFUlNFTFksXG4gICAgICAgICAgICAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIxMDBweFwiIGhlaWdodD1cIjEwMHB4XCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIGNsYXNzPVwiYmkgYmktY2hlY2stc3F1YXJlLWZpbGxcIiB2aWV3Qm94PVwiMCAwIDE0IDE0XCI+IDxyZWN0IHdpZHRoPVwiMTRcIiBoZWlnaHQ9XCIxNFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIi8+IDx0ZXh0IHg9XCI1MCVcIiB5PVwiNTAlXCIgdGV4dC1hbmNob3I9XCJtaWRkbGVcIiBmb250LXNpemU9XCIxMlwiIGZvbnQtd2VpZ2h0PVwiYm9sZFwiIGR5PVwiLjNlbVwiIGZpbGw9XCJ3aGl0ZVwiIHRyYW5zZm9ybT1cInJvdGF0ZSgxODAsNyw3KVwiPkM8L3RleHQ+IDwvc3ZnPidcbiAgICAgICAgKTtcbiAgICAgICAgYWRkSWNvbihcbiAgICAgICAgICAgIEljb25zLkNPTVBMRVRFX0FMTCxcbiAgICAgICAgICAgICc8c3ZnIGNsYXNzPVwiYmkgYmktc3F1YXJlLWZpbGxcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgdmVyc2lvbj1cIjEuMVwiIHdpZHRoPVwiMTAwcHhcIiBoZWlnaHQ9XCIxMDBweFwiIHZpZXdCb3g9XCIwIDAgMTQgMTRcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIm0yIDBhMiAyIDAgMDAtMiAydjEyYTIgMiAwIDAwMiAyaDEyYTIgMiAwIDAwMi0ydi0xMmEyIDIgMCAwMC0yLTJoLTEyem0xLjUwOTggMi4wNDFoMS41YTEuNSAxLjUgMCAwMTEuNSAxLjV2MS41YTEuNSAxLjUgMCAwMS0xLjUgMS41aC0xLjVhMS41IDEuNSAwIDAxLTEuNS0xLjV2LTEuNWExLjUgMS41IDAgMDExLjUtMS41em00LjM5NDUgMS4yMjA3aDUuNjg5NWEuNDA2NDUuNSAwIDAxLjQwNjI1LjV2MWEuNDA2NDUuNSAwIDAxLS40MDYyNS41aC01LjY4OTVhLjQwNjQ1LjUgMCAwMS0uNDA2MjUtLjV2LTFhLjQwNjQ1LjUgMCAwMS40MDYyNS0uNXptLTQuNDAyMyA2LjI2NTZoMS41YTEuNSAxLjUgMCAwMTEuNSAxLjV2MS41YTEuNSAxLjUgMCAwMS0xLjUgMS41aC0xLjVhMS41IDEuNSAwIDAxLTEuNS0xLjV2LTEuNWExLjUgMS41IDAgMDExLjUtMS41em00LjQwMjMgMS4yNjU2aDUuNjg5NWEuNDA2NDUuNSAwIDAxLjQwNjI1LjV2MWEuNDA2NDUuNSAwIDAxLS40MDYyNS41aC01LjY4OTVhLjQwNjQ1LjUgMCAwMS0uNDA2MjUtLjV2LTFhLjQwNjQ1LjUgMCAwMS40MDYyNS0uNXpcIi8+PGcgdHJhbnNmb3JtPVwidHJhbnNsYXRlKC40OTczNyAtLjAwMjYzMTUpXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPjxwYXRoIGQ9XCJtMy42MTcxIDEzLjE0OWEuNS41IDAgMDEtLjcwOCAwbC0xLTFhLjUwMDYzLjUwMDYzIDAgMDEuNzA4LS43MDhsLjY0Ni42NDcgMS42NDYtMS42NDdhLjUwMDYzLjUwMDYzIDAgMDEuNzA4LjcwOHpcIi8+PHBhdGggZD1cIm0zLjYxNzEgNS42MTgxYS41LjUgMCAwMS0uNzA4IDBsLTEtMWEuNTAwNjMuNTAwNjMgMCAxMS43MDgtLjcwOGwuNjQ2LjY0NyAxLjY0Ni0xLjY0N2EuNTAwNjMuNTAwNjMgMCAxMS43MDguNzA4elwiLz48L2c+PC9zdmc+J1xuICAgICAgICApO1xuICAgICAgICBhZGRJY29uKFxuICAgICAgICAgICAgSWNvbnMuQ0xFQVIsXG4gICAgICAgICAgICAnPHN2ZyBjbGFzcz1cImJpIGJpLXNxdWFyZS1maWxsXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIHZlcnNpb249XCIxLjFcIiB3aWR0aD1cIjEwMHB4XCIgaGVpZ2h0PVwiMTAwcHhcIiB2aWV3Qm94PVwiMCAwIDE0IDE0XCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxwYXRoIGQ9XCJtMiAwYTIgMiAwIDAwLTIgMnYxMmEyIDIgMCAwMDIgMmgxMmEyIDIgMCAwMDItMnYtMTJhMiAyIDAgMDAtMi0yaC0xMnptMS41MDk4IDIuMDQxaDEuNWExLjUgMS41IDAgMDExLjUgMS41djEuNWExLjUgMS41IDAgMDEtMS41IDEuNWgtMS41YTEuNSAxLjUgMCAwMS0xLjUtMS41di0xLjVhMS41IDEuNSAwIDAxMS41LTEuNXptNC4zOTQ1IDEuMjIwN2g1LjY4OTVhLjQwNjQ1LjUgMCAwMS40MDYyNS41djFhLjQwNjQ1LjUgMCAwMS0uNDA2MjUuNWgtNS42ODk1YS40MDY0NS41IDAgMDEtLjQwNjI1LS41di0xYS40MDY0NS41IDAgMDEuNDA2MjUtLjV6bS00LjQwMjMgNi4yNjU2aDEuNWExLjUgMS41IDAgMDExLjUgMS41djEuNWExLjUgMS41IDAgMDEtMS41IDEuNWgtMS41YTEuNSAxLjUgMCAwMS0xLjUtMS41di0xLjVhMS41IDEuNSAwIDAxMS41LTEuNXptNC40MDIzIDEuMjY1Nmg1LjY4OTVhLjQwNjQ1LjUgMCAwMS40MDYyNS41djFhLjQwNjQ1LjUgMCAwMS0uNDA2MjUuNWgtNS42ODk1YS40MDY0NS41IDAgMDEtLjQwNjI1LS41di0xYS40MDY0NS41IDAgMDEuNDA2MjUtLjV6XCIvPjwvc3ZnPidcbiAgICAgICAgKTtcbiAgICAgICAgLy8gYWRkSWNvbihcbiAgICAgICAgLy8gICAgIEljb25zLk1PVkUsXG4gICAgICAgIC8vICAgICAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIxMDBweFwiIGhlaWdodD1cIjEwMHB4XCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIGNsYXNzPVwiYmkgYmktc2F2ZS1maWxsXCIgdmlld0JveD1cIjAgMCAxNCAxNFwiPiAgPHBhdGggZD1cIk04LjUgMS41QTEuNSAxLjUgMCAwIDEgMTAgMGg0YTIgMiAwIDAgMSAyIDJ2MTJhMiAyIDAgMCAxLTIgMkgyYTIgMiAwIDAgMS0yLTJWMmEyIDIgMCAwIDEgMi0yaDZjLS4zMTQuNDE4LS41LjkzNy0uNSAxLjV2Ny43OTNMNC44NTQgNi42NDZhLjUuNSAwIDEgMC0uNzA4LjcwOGwzLjUgMy41YS41LjUgMCAwIDAgLjcwOCAwbDMuNS0zLjVhLjUuNSAwIDAgMC0uNzA4LS43MDhMOC41IDkuMjkzVjEuNXpcIi8+PC9zdmc+J1xuICAgICAgICAvLyApO1xuXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogXCJ0YXNrLW1hcmtlci1jcmVhdGVcIixcbiAgICAgICAgICAgIG5hbWU6IFwiQ3JlYXRlIHRhc2tcIixcbiAgICAgICAgICAgIGljb246IEljb25zLkNSRUFURSxcbiAgICAgICAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubWFya1Rhc2tPbkxpbmVzQ3JlYXRlKFxuICAgICAgICAgICAgICAgICAgICBcIiBcIixcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEN1cnJlbnRMaW5lc0Zyb21FZGl0b3IoZWRpdG9yKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6IFwidGFzay1tYXJrZXItY29tcGxldGVcIixcbiAgICAgICAgICAgIG5hbWU6IFwiQ29tcGxldGUgdGFza1wiLFxuICAgICAgICAgICAgaWNvbjogSWNvbnMuQ09NUExFVEUsXG4gICAgICAgICAgICBlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm1hcmtUYXNrT25MaW5lcyhcbiAgICAgICAgICAgICAgICAgICAgXCJ4XCIsXG4gICAgICAgICAgICAgICAgICAgIGVkaXRvcixcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRDdXJyZW50TGluZXNGcm9tRWRpdG9yKGVkaXRvcilcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcInRhc2stbWFya2VyLWNhbmNlbFwiLFxuICAgICAgICAgICAgbmFtZTogXCJDYW5jZWwgdGFza1wiLFxuICAgICAgICAgICAgaWNvbjogSWNvbnMuQ0FOQ0VMLFxuICAgICAgICAgICAgZWRpdG9yQ2hlY2tDYWxsYmFjazogKGNoZWNraW5nOiBib29sZWFuLCBlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLnRhc2tNYXJrZXIuc2V0dGluZ3Muc3VwcG9ydENhbmNlbGVkVGFza3M7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoIWNoZWNraW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXJrVGFza09uTGluZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwiLVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q3VycmVudExpbmVzRnJvbUVkaXRvcihlZGl0b3IpXG4gICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcInRhc2stbWFya2VyLW1hcmtcIixcbiAgICAgICAgICAgIG5hbWU6IFwiTWFyayB0YXNrXCIsXG4gICAgICAgICAgICBpY29uOiBJY29ucy5NQVJLLFxuICAgICAgICAgICAgZWRpdG9yQ2FsbGJhY2s6IGFzeW5jIChlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWFyayA9IGF3YWl0IHByb21wdEZvck1hcmsodGhpcy5hcHAsIHRoaXMudGFza01hcmtlcik7XG4gICAgICAgICAgICAgICAgaWYgKG1hcmspIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXJrVGFza09uTGluZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrLFxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRDdXJyZW50TGluZXNGcm9tRWRpdG9yKGVkaXRvcilcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6IFwidGFzay1tYXJrZXItcmVzZXRcIixcbiAgICAgICAgICAgIG5hbWU6IFwiUmVzZXQgdGFza1wiLFxuICAgICAgICAgICAgaWNvbjogSWNvbnMuUkVTRVQsXG4gICAgICAgICAgICBlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm1hcmtUYXNrT25MaW5lcyhcbiAgICAgICAgICAgICAgICAgICAgXCIgXCIsXG4gICAgICAgICAgICAgICAgICAgIGVkaXRvcixcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRDdXJyZW50TGluZXNGcm9tRWRpdG9yKGVkaXRvcilcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcInRhc2stbWFya2VyLWNvbXBsZXRlLWFsbFwiLFxuICAgICAgICAgICAgbmFtZTogXCJDb21wbGV0ZSBhbGwgdGFza3NcIixcbiAgICAgICAgICAgIGljb246IEljb25zLkNPTVBMRVRFX0FMTCxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21wbGV0ZUFsbFRhc2tzKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6IFwidGFzay1tYXJrZXItcmVzZXQtYWxsXCIsXG4gICAgICAgICAgICBuYW1lOiBcIlJlc2V0IGFsbCBjb21wbGV0ZWQgdGFza3NcIixcbiAgICAgICAgICAgIGljb246IEljb25zLkNMRUFSLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0QWxsVGFza3MoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFNldCBob3RrZXlzIGZvciBhZGRpdGlvbmFsIHRhc2sgc3RhdHVzZXMgKHJvdyAxKVxuICAgICAgICBjb25zdCBpbmNvbXBsZXRlVGFza1ZhbHVlc0xlbmd0aCA9IHRoaXMudGFza01hcmtlci5zZXR0aW5ncy5pbmNvbXBsZXRlVGFza1ZhbHVlcy5sZW5ndGhcblxuICAgICAgICBpZiAoaW5jb21wbGV0ZVRhc2tWYWx1ZXNMZW5ndGggPj0gMikge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gaW5jb21wbGV0ZVRhc2tWYWx1ZXNMZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgICAgICAgICBpZDogXCJ0YXNrLW1hcmtlci1tYXJrLXRhc2stc3RhdHVzLXJvdzEtXCIgKyBpLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiTWFyayB0YXNrIChyb3cgMSkgYXMgc3RhdHVzIFwiICsgaS50b1N0cmluZygpICsgXCIgXFxcIlwiICsgdGhpcy50YXNrTWFya2VyLnNldHRpbmdzLmluY29tcGxldGVUYXNrVmFsdWVzW2ldICsgXCJcXFwiXCIsXG4gICAgICAgICAgICAgICAgICAgIGljb246IEljb25zLk1BUkssXG4gICAgICAgICAgICAgICAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXJrVGFza09uTGluZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrTWFya2VyLnNldHRpbmdzLmluY29tcGxldGVUYXNrVmFsdWVzW2ldLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEN1cnJlbnRMaW5lc0Zyb21FZGl0b3IoZWRpdG9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNldCBob3RrZXlzIGZvciBhZGRpdGlvbmFsIHRhc2sgc3RhdHVzZXMgKHJvdyAyKVxuICAgICAgICBjb25zdCBpbmNvbXBsZXRlVGFza1ZhbHVlc1JvdzJMZW5ndGggPSB0aGlzLnRhc2tNYXJrZXIuc2V0dGluZ3MuaW5jb21wbGV0ZVRhc2tWYWx1ZXNSb3cyLmxlbmd0aFxuXG4gICAgICAgIGlmIChpbmNvbXBsZXRlVGFza1ZhbHVlc1JvdzJMZW5ndGggPj0gMSkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gaW5jb21wbGV0ZVRhc2tWYWx1ZXNSb3cyTGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IFwidGFzay1tYXJrZXItbWFyay10YXNrLXN0YXR1cy1yb3cyLVwiICsgKGkgKyAxKS50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIk1hcmsgdGFzayAocm93IDIpIGFzIHN0YXR1cyBcIiArIChpICsgMSkudG9TdHJpbmcoKSArIFwiIFxcXCJcIiArIHRoaXMudGFza01hcmtlci5zZXR0aW5ncy5pbmNvbXBsZXRlVGFza1ZhbHVlc1JvdzJbaV0gKyBcIlxcXCJcIixcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogSWNvbnMuTUFSSyxcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcmtUYXNrT25MaW5lcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2tNYXJrZXIuc2V0dGluZ3MuaW5jb21wbGV0ZVRhc2tWYWx1ZXNSb3cyW2ldLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEN1cnJlbnRMaW5lc0Zyb21FZGl0b3IoZWRpdG9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFkZCBob3RrZXlzIGZvciBjeWNsaW5nIHRhc2sgc3RhdHVzZXNcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcInRhc2stbWFya2VyLWN5Y2xlLXRhc2tcIixcbiAgICAgICAgICAgIG5hbWU6IFwiQ3ljbGUgdGFzayAobWFpbilcIixcbiAgICAgICAgICAgIGljb246IEljb25zLkNZQ0xFLFxuICAgICAgICAgICAgZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXJrVGFza09uTGluZXNDeWNsZShcbiAgICAgICAgICAgICAgICAgICAgJ3knLCAvLyBUaGlzIHZhbHVlIGRvZXMgbm90IG1hdHRlci5cbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEN1cnJlbnRMaW5lc0Zyb21FZGl0b3IoZWRpdG9yKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6IFwidGFzay1tYXJrZXItY3ljbGUtdGFzay0xXCIsXG4gICAgICAgICAgICBuYW1lOiBcIkN5Y2xlIHRhc2sgKGxpc3QgMSlcIixcbiAgICAgICAgICAgIGljb246IEljb25zLkNZQ0xFLFxuICAgICAgICAgICAgZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXJrVGFza09uTGluZXNDeWNsZUxpc3QxKFxuICAgICAgICAgICAgICAgICAgICAneScsIC8vIFRoaXMgdmFsdWUgZG9lcyBub3QgbWF0dGVyLlxuICAgICAgICAgICAgICAgICAgICBlZGl0b3IsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q3VycmVudExpbmVzRnJvbUVkaXRvcihlZGl0b3IpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogXCJ0YXNrLW1hcmtlci1jeWNsZS10YXNrLTJcIixcbiAgICAgICAgICAgIG5hbWU6IFwiQ3ljbGUgdGFzayAobGlzdCAyKVwiLFxuICAgICAgICAgICAgaWNvbjogSWNvbnMuQ1lDTEUsXG4gICAgICAgICAgICBlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm1hcmtUYXNrT25MaW5lc0N5Y2xlTGlzdDIoXG4gICAgICAgICAgICAgICAgICAgICd5JywgLy8gVGhpcyB2YWx1ZSBkb2VzIG5vdCBtYXR0ZXIuXG4gICAgICAgICAgICAgICAgICAgIGVkaXRvcixcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRDdXJyZW50TGluZXNGcm9tRWRpdG9yKGVkaXRvcilcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcInRhc2stbWFya2VyLWN5Y2xlLXRhc2stM1wiLFxuICAgICAgICAgICAgbmFtZTogXCJDeWNsZSB0YXNrIChsaXN0IDMpXCIsXG4gICAgICAgICAgICBpY29uOiBJY29ucy5DWUNMRSxcbiAgICAgICAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubWFya1Rhc2tPbkxpbmVzQ3ljbGVMaXN0MyhcbiAgICAgICAgICAgICAgICAgICAgJ3knLCAvLyBUaGlzIHZhbHVlIGRvZXMgbm90IG1hdHRlci5cbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEN1cnJlbnRMaW5lc0Zyb21FZGl0b3IoZWRpdG9yKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBZGQgaG90a2V5cyBmb3IgY3ljbGluZyB0YXNrIHN0YXR1c2VzIHJldmVyc2VseVxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6IFwidGFzay1tYXJrZXItY3ljbGUtdGFzay1yZXZlcnNlbHlcIixcbiAgICAgICAgICAgIG5hbWU6IFwiQ3ljbGUgdGFzayByZXZlcnNlbHkgKG1haW4pXCIsXG4gICAgICAgICAgICBpY29uOiBJY29ucy5DWUNMRV9SRVZFUlNFTFksXG4gICAgICAgICAgICBlZGl0b3JDaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4sIGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMudGFza01hcmtlci5zZXR0aW5ncy5zdXBwb3J0Q3ljbGluZ1Rhc2tzUmV2ZXJzZWx5O1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNraW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcmtUYXNrT25MaW5lc0N5Y2xlUmV2ZXJzZWx5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd5JywgLy8gVGhpcyB2YWx1ZSBkb2VzIG5vdCBtYXR0ZXIuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q3VycmVudExpbmVzRnJvbUVkaXRvcihlZGl0b3IpXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQWRkIGhvdGtleXMgZm9yIGFwcGVuZGluZyB0ZXh0XG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogXCJ0YXNrLW1hcmtlci1hcHBlbmQtdGV4dFwiLFxuICAgICAgICAgICAgbmFtZTogXCJBcHBlbmQgdGV4dCAxXCIsXG4gICAgICAgICAgICAvLyBpY29uOiBJY29ucy5SRVNFVCxcbiAgICAgICAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kVGV4dE9uTGluZXMoXG4gICAgICAgICAgICAgICAgICAgIFwieVwiLCAvLyBUaGUgbWFyayB2YWx1ZSBkb2VzIG5vdCBtYXR0ZXIuXG4gICAgICAgICAgICAgICAgICAgIGVkaXRvcixcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRDdXJyZW50TGluZXNGcm9tRWRpdG9yKGVkaXRvcilcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcInRhc2stbWFya2VyLWFwcGVuZC10ZXh0LTJcIixcbiAgICAgICAgICAgIG5hbWU6IFwiQXBwZW5kIHRleHQgMlwiLFxuICAgICAgICAgICAgLy8gaWNvbjogSWNvbnMuUkVTRVQsXG4gICAgICAgICAgICBlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZFRleHRPbkxpbmVzVGV4dDIoXG4gICAgICAgICAgICAgICAgICAgIFwieVwiLCAvLyBUaGUgbWFyayB2YWx1ZSBkb2VzIG5vdCBtYXR0ZXIuXG4gICAgICAgICAgICAgICAgICAgIGVkaXRvcixcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRDdXJyZW50TGluZXNGcm9tRWRpdG9yKGVkaXRvcilcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcInRhc2stbWFya2VyLWFwcGVuZC10ZXh0LTNcIixcbiAgICAgICAgICAgIG5hbWU6IFwiQXBwZW5kIHRleHQgM1wiLFxuICAgICAgICAgICAgLy8gaWNvbjogSWNvbnMuUkVTRVQsXG4gICAgICAgICAgICBlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZFRleHRPbkxpbmVzVGV4dDMoXG4gICAgICAgICAgICAgICAgICAgIFwieVwiLCAvLyBUaGUgbWFyayB2YWx1ZSBkb2VzIG5vdCBtYXR0ZXIuXG4gICAgICAgICAgICAgICAgICAgIGVkaXRvcixcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRDdXJyZW50TGluZXNGcm9tRWRpdG9yKGVkaXRvcilcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcInRhc2stbWFya2VyLWFwcGVuZC10ZXh0LWF1dG9cIixcbiAgICAgICAgICAgIG5hbWU6IFwiQXBwZW5kIHRleHQgYXV0b21hdGljYWxseVwiLFxuICAgICAgICAgICAgLy8gaWNvbjogSWNvbnMuUkVTRVQsXG4gICAgICAgICAgICBlZGl0b3JDaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4sIGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMudGFza01hcmtlci5zZXR0aW5ncy5zdXBwb3J0QXBwZW5kaW5nVGV4dEF1dG9tYXRpY2FsbHk7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2hlY2tpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kVGV4dE9uTGluZXNBdXRvKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwieVwiLCAvLyBUaGUgbWFyayB2YWx1ZSBkb2VzIG5vdCBtYXR0ZXIuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q3VycmVudExpbmVzRnJvbUVkaXRvcihlZGl0b3IpXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICAgICAgfSAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5yZWdpc3RlckhhbmRsZXJzKCk7XG4gICAgICAgIHRoaXMuYXBpID0gbmV3IFRhc2tNYXJrZXJBcGkodGhpcy5hcHAsIHRoaXMudGFza01hcmtlcik7XG4gICAgfVxuXG4gICAgZ2V0Q3VycmVudExpbmVzRnJvbUVkaXRvcihlZGl0b3I6IEVkaXRvcik6IG51bWJlcltdIHtcbiAgICAgICAgY29uc3QgbGluZXM6IG51bWJlcltdID0gW107XG4gICAgICAgIGlmIChlZGl0b3Iuc29tZXRoaW5nU2VsZWN0ZWQoKSkge1xuICAgICAgICAgICAgY29uc3QgY3Vyc29yU3RhcnQgPSBlZGl0b3IuZ2V0Q3Vyc29yKFwiZnJvbVwiKTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnNvckVuZCA9IGVkaXRvci5nZXRDdXJzb3IoXCJ0b1wiKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBjdXJzb3JTdGFydC5saW5lOyBpIDw9IGN1cnNvckVuZC5saW5lOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgYW5jaG9yID0gZWRpdG9yLmdldEN1cnNvcihcImZyb21cIik7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGFuY2hvci5saW5lKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGluZXM7XG4gICAgfVxuXG4gICAgYnVpbGRNZW51KG1lbnU6IE1lbnUsIGVkaXRvcjogYW55LCBsaW5lcz86IG51bWJlcltdKTogdm9pZCB7XG4gICAgICAgIC8vIGlmIHJpZ2h0LWNsaWNrIGNyZWF0ZSBtZW51IGl0ZW0gaXMgZW5hYmxlZFxuICAgICAgICBpZiAodGhpcy50YXNrTWFya2VyLnNldHRpbmdzLnJpZ2h0Q2xpY2tDcmVhdGUpIHtcbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgICAgICAgICAgICBpdGVtXG4gICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcIihUTSkgQ3JlYXRlIHRhc2tcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oSWNvbnMuQ1JFQVRFKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcmtUYXNrT25MaW5lc0NyZWF0ZShcIiBcIiwgZWRpdG9yLCBsaW5lcyk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgcmlnaHQtY2xpY2sgY29tcGxldGUgbWVudSBpdGVtIGlzIGVuYWJsZWRcbiAgICAgICAgaWYgKHRoaXMudGFza01hcmtlci5zZXR0aW5ncy5yaWdodENsaWNrQ29tcGxldGUpIHtcbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgICAgICAgICAgICBpdGVtXG4gICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcIihUTSkgQ29tcGxldGUgdGFza1wiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihJY29ucy5DT01QTEVURSlcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXJrVGFza09uTGluZXMoXCJ4XCIsIGVkaXRvciwgbGluZXMpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgLy8gaWYgY2FuY2VsbGluZyB0YXNrcyBpcyBzdXBwb3J0ZWQsIGFkZCB0aGUgbWVudSBpdGVtIGZvciB0aGF0LlxuICAgICAgICAgICAgaWYgKHRoaXMudGFza01hcmtlci5zZXR0aW5ncy5zdXBwb3J0Q2FuY2VsZWRUYXNrcykge1xuICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgICAgICAgICAgICAgICAgaXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiKFRNKSBDYW5jZWwgdGFza1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEljb24oSWNvbnMuQ0FOQ0VMKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFya1Rhc2tPbkxpbmVzKFwiLVwiLCBlZGl0b3IsIGxpbmVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIHJpZ2h0LWNsaWNrIG1hcmsgbWVudSBpdGVtIGlzIGVuYWJsZWRcbiAgICAgICAgaWYgKHRoaXMudGFza01hcmtlci5zZXR0aW5ncy5yaWdodENsaWNrTWFyaykge1xuICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgICAgIGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiKFRNKSBNYXJrIHRhc2tcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oSWNvbnMuTUFSSylcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFyayA9IGF3YWl0IHByb21wdEZvck1hcmsoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrTWFya2VyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hcmspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcmtUYXNrT25MaW5lcyhtYXJrLCBlZGl0b3IsIGxpbmVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiByaWdodC1jbGljayBjeWNsZSBtZW51IGl0ZW0gaXMgZW5hYmxlZFxuICAgICAgICBpZiAodGhpcy50YXNrTWFya2VyLnNldHRpbmdzLnJpZ2h0Q2xpY2tDeWNsZSkge1xuICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgICAgIGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiKFRNKSBDeWNsZSB0YXNrIChtYWluKVwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihJY29ucy5DWUNMRSlcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXJrVGFza09uTGluZXNDeWNsZShcInlcIiwgZWRpdG9yLCBsaW5lcyk7IC8vIFRoZSBtYXJrIHZhbHVlIGRvZXMgbm90IG1hdHRlci5cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudGFza01hcmtlci5zZXR0aW5ncy5yaWdodENsaWNrQ3ljbGVMaXN0MSkge1xuICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgICAgIGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiKFRNKSBDeWNsZSB0YXNrIChsaXN0IDEpXCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKEljb25zLkNZQ0xFKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcmtUYXNrT25MaW5lc0N5Y2xlTGlzdDEoXCJ5XCIsIGVkaXRvciwgbGluZXMpOyAvLyBUaGUgbWFyayB2YWx1ZSBkb2VzIG5vdCBtYXR0ZXIuXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRhc2tNYXJrZXIuc2V0dGluZ3MucmlnaHRDbGlja0N5Y2xlTGlzdDIpIHtcbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgICAgICAgICAgICBpdGVtXG4gICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcIihUTSkgQ3ljbGUgdGFzayAobGlzdCAyKVwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihJY29ucy5DWUNMRSlcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXJrVGFza09uTGluZXNDeWNsZUxpc3QyKFwieVwiLCBlZGl0b3IsIGxpbmVzKTsgLy8gVGhlIG1hcmsgdmFsdWUgZG9lcyBub3QgbWF0dGVyLlxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy50YXNrTWFya2VyLnNldHRpbmdzLnJpZ2h0Q2xpY2tDeWNsZUxpc3QzKSB7XG4gICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICAgICAgICAgICAgaXRlbVxuICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoXCIoVE0pIEN5Y2xlIHRhc2sgKGxpc3QgMylcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oSWNvbnMuQ1lDTEUpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFya1Rhc2tPbkxpbmVzQ3ljbGVMaXN0MyhcInlcIiwgZWRpdG9yLCBsaW5lcyk7IC8vIFRoZSBtYXJrIHZhbHVlIGRvZXMgbm90IG1hdHRlci5cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiByaWdodC1jbGljayBjeWNsZSByZXZlcnNlbHkgbWVudSBpdGVtIGlzIGVuYWJsZWRcbiAgICAgICAgaWYgKHRoaXMudGFza01hcmtlci5zZXR0aW5ncy5yaWdodENsaWNrQ3ljbGVSZXZlcnNlbHkpIHtcbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgICAgICAgICAgICBpdGVtXG4gICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcIihUTSkgQ3ljbGUgdGFzayByZXZlcnNlbHkgKG1haW4pXCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKEljb25zLkNZQ0xFX1JFVkVSU0VMWSlcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXJrVGFza09uTGluZXNDeWNsZVJldmVyc2VseShcInlcIiwgZWRpdG9yLCBsaW5lcyk7IC8vIFRoZSBtYXJrIHZhbHVlIGRvZXMgbm90IG1hdHRlci5cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhZGQgYW4gaXRlbSBmb3IgcmVzZXR0aW5nIHNlbGVjdGVkIHRhc2tzIGlmIGVuYWJsZWRcbiAgICAgICAgaWYgKHRoaXMudGFza01hcmtlci5zZXR0aW5ncy5yaWdodENsaWNrUmVzZXRUYXNrKSB7XG4gICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICAgICAgICAgICAgaXRlbVxuICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoXCIoVE0pIFJlc2V0IHRhc2tcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oSWNvbnMuUkVTRVQpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFya1Rhc2tPbkxpbmVzKFwiIFwiLCBlZGl0b3IsIGxpbmVzKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiByaWdodC1jbGljayBhcHBlbmQgbWVudSBpdGVtIGlzIGVuYWJsZWRcbiAgICAgICAgaWYgKHRoaXMudGFza01hcmtlci5zZXR0aW5ncy5yaWdodENsaWNrQXBwZW5kKSB7XG4gICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICAgICAgICAgICAgaXRlbVxuICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoXCIoVE0pIEFwcGVuZCB0ZXh0IDFcIilcbiAgICAgICAgICAgICAgICAgICAgLy8gLnNldEljb24oSWNvbnMuUkVTRVQpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kVGV4dE9uTGluZXMoXCJ5XCIsIGVkaXRvciwgbGluZXMpOyAvLyBUaGUgbWFyayB2YWx1ZSBkb2VzIG5vdCBtYXR0ZXIuXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMudGFza01hcmtlci5zZXR0aW5ncy5yaWdodENsaWNrQXBwZW5kVGV4dDIpIHtcbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgICAgICAgICAgICBpdGVtXG4gICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcIihUTSkgQXBwZW5kIHRleHQgMlwiKVxuICAgICAgICAgICAgICAgICAgICAvLyAuc2V0SWNvbihJY29ucy5SRVNFVClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRUZXh0T25MaW5lc1RleHQyKFwieVwiLCBlZGl0b3IsIGxpbmVzKTsgLy8gVGhlIG1hcmsgdmFsdWUgZG9lcyBub3QgbWF0dGVyLlxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnRhc2tNYXJrZXIuc2V0dGluZ3MucmlnaHRDbGlja0FwcGVuZFRleHQzKSB7XG4gICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICAgICAgICAgICAgaXRlbVxuICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoXCIoVE0pIEFwcGVuZCB0ZXh0IDNcIilcbiAgICAgICAgICAgICAgICAgICAgLy8gLnNldEljb24oSWNvbnMuUkVTRVQpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kVGV4dE9uTGluZXNUZXh0MyhcInlcIiwgZWRpdG9yLCBsaW5lcyk7IC8vIFRoZSBtYXJrIHZhbHVlIGRvZXMgbm90IG1hdHRlci5cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy50YXNrTWFya2VyLnNldHRpbmdzLnJpZ2h0Q2xpY2tBcHBlbmRUZXh0QXV0bykge1xuICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgICAgIGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiKFRNKSBBcHBlbmQgdGV4dCBhdXRvbWF0aWNhbGx5XCIpXG4gICAgICAgICAgICAgICAgICAgIC8vIC5zZXRJY29uKEljb25zLlJFU0VUKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZFRleHRPbkxpbmVzQXV0byhcInlcIiwgZWRpdG9yLCBsaW5lcyk7IC8vIFRoZSBtYXJrIHZhbHVlIGRvZXMgbm90IG1hdHRlci5cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiByaWdodC1jbGljayBtb3ZlIGNvbXBsZXRlZCB0YXNrcyBpcyBlbmFibGVkOlxuICAgICAgICAvLyBpZiAodGhpcy50YXNrTWFya2VyLnNldHRpbmdzLnJpZ2h0Q2xpY2tNb3ZlKSB7XG4gICAgICAgIC8vICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICAgIC8vICAgICAgICAgaXRlbVxuICAgICAgICAvLyAgICAgICAgICAgICAuc2V0VGl0bGUoXCIoVE0pIE1vdmUgY29tcGxldGVkIHRhc2tzXCIpXG4gICAgICAgIC8vICAgICAgICAgICAgIC5zZXRJY29uKEljb25zLk1PVkUpXG4gICAgICAgIC8vICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHRoaXMubW92ZUFsbFRhc2tzKCk7XG4gICAgICAgIC8vICAgICAgICAgICAgIH0pXG4gICAgICAgIC8vICAgICApO1xuICAgICAgICAvLyB9XG5cbiAgICAgICAgLy8gSWYgcmlnaHQtY2xpY2sgdG9nZ2xlLWFsbCBtZW51IGl0ZW0gaXMgZW5hYmxlZDpcbiAgICAgICAgaWYgKHRoaXMudGFza01hcmtlci5zZXR0aW5ncy5yaWdodENsaWNrVG9nZ2xlQWxsKSB7XG4gICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICAgICAgICAgICAgaXRlbVxuICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoXCIoVE0pIENvbXBsZXRlIGFsbCB0YXNrc1wiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihJY29ucy5DT01QTEVURV9BTEwpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcGxldGVBbGxUYXNrcygpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFkZCBhbiBpdGVtIGZvciByZXNldHRpbmcgc2VsZWN0ZWQgdGFza3MgaWYgZW5hYmxlZFxuICAgICAgICBpZiAodGhpcy50YXNrTWFya2VyLnNldHRpbmdzLnJpZ2h0Q2xpY2tSZXNldEFsbCkge1xuICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgICAgIGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiKFRNKSBSZXNldCBhbGwgdGFza3NcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oSWNvbnMuQ0xFQVIpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXRBbGxUYXNrcygpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIG1hcmtUYXNrT25MaW5lcyhtYXJrOiBzdHJpbmcsIGVkaXRvcjogYW55LCBsaW5lcz86IG51bWJlcltdKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBjb25zdCBzb3VyY2UgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGFjdGl2ZUZpbGUpO1xuICAgIFxuICAgICAgICAvLyBTYXZlIHRoZSBjdXJzb3IgcG9zaXRpb24gYmVmb3JlIG1vZGlmeWluZyB0aGUgZmlsZVxuICAgICAgICBjb25zdCBjdXJzb3JQb3NpdGlvbiA9IGVkaXRvci5nZXRDdXJzb3IoKTtcbiAgICAgICAgaWYgKCFjdXJzb3JQb3NpdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdldCBjdXJzb3IgcG9zaXRpb24nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnRhc2tNYXJrZXIubWFya1Rhc2tJblNvdXJjZShzb3VyY2UsIG1hcmssIGxpbmVzKTtcbiAgICAgICAgaWYgKCFyZXN1bHQgfHwgIXJlc3VsdC51cGRhdGVkTGluZVRleHQgfHwgIXJlc3VsdC5jdXJzb3JPZmZzZXQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBtYXJrIHRhc2sgaW4gc291cmNlJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGFjdGl2ZUZpbGUsIHJlc3VsdC51cGRhdGVkTGluZVRleHQpO1xuICAgIFxuICAgICAgICAvLyBMb2cgdGhlIHZhbHVlcyBvZiBjdXJzb3JQb3NpdGlvbiBhbmQgcmVzdWx0LmN1cnNvck9mZnNldCAgICBcbiAgICAgICAgaWYgKCFjdXJzb3JQb3NpdGlvbiB8fCAhKCdsaW5lJyBpbiBjdXJzb3JQb3NpdGlvbiAmJiAnY2gnIGluIGN1cnNvclBvc2l0aW9uKSB8fCAhQXJyYXkuaXNBcnJheShyZXN1bHQuY3Vyc29yT2Zmc2V0KSB8fCByZXN1bHQuY3Vyc29yT2Zmc2V0Lmxlbmd0aCAhPT0gMSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignSW52YWxpZCBjdXJzb3IgcG9zaXRpb24gb3Igb2Zmc2V0Jyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gUmVzdG9yZSB0aGUgY3Vyc29yIHBvc2l0aW9uIGFmdGVyIG1vZGlmeWluZyB0aGUgZmlsZVxuICAgICAgICBsZXQgbmV3Q3Vyc29yUG9zaXRpb24gPSB7bGluZTogY3Vyc29yUG9zaXRpb24ubGluZSwgY2g6IGN1cnNvclBvc2l0aW9uLmNoICsgcmVzdWx0LmN1cnNvck9mZnNldFswXX07XG4gICAgICAgIGVkaXRvci5zZXRDdXJzb3IobmV3Q3Vyc29yUG9zaXRpb24pO1xuICAgIH1cblxuICAgIGFzeW5jIG1hcmtUYXNrT25MaW5lc0N5Y2xlKG1hcms6IHN0cmluZywgZWRpdG9yOiBhbnksIGxpbmVzPzogbnVtYmVyW10pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoYWN0aXZlRmlsZSk7XG4gICAgXG4gICAgICAgIC8vIFNhdmUgdGhlIGN1cnNvciBwb3NpdGlvbiBiZWZvcmUgbW9kaWZ5aW5nIHRoZSBmaWxlXG4gICAgICAgIGNvbnN0IGN1cnNvclBvc2l0aW9uID0gZWRpdG9yLmdldEN1cnNvcigpO1xuICAgICAgICBpZiAoIWN1cnNvclBvc2l0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2V0IGN1cnNvciBwb3NpdGlvbicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMudGFza01hcmtlci5tYXJrVGFza0luU291cmNlQ3ljbGUoc291cmNlLCBtYXJrLCBsaW5lcyk7XG4gICAgICAgIGlmICghcmVzdWx0IHx8ICFyZXN1bHQudXBkYXRlZExpbmVUZXh0IHx8ICFyZXN1bHQuY3Vyc29yT2Zmc2V0KSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbWFyayB0YXNrIGluIHNvdXJjZScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShhY3RpdmVGaWxlLCByZXN1bHQudXBkYXRlZExpbmVUZXh0KTtcbiAgICBcbiAgICAgICAgLy8gTG9nIHRoZSB2YWx1ZXMgb2YgY3Vyc29yUG9zaXRpb24gYW5kIHJlc3VsdC5jdXJzb3JPZmZzZXQgICAgXG4gICAgICAgIGlmICghY3Vyc29yUG9zaXRpb24gfHwgISgnbGluZScgaW4gY3Vyc29yUG9zaXRpb24gJiYgJ2NoJyBpbiBjdXJzb3JQb3NpdGlvbikgfHwgIUFycmF5LmlzQXJyYXkocmVzdWx0LmN1cnNvck9mZnNldCkgfHwgcmVzdWx0LmN1cnNvck9mZnNldC5sZW5ndGggIT09IDEpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgY3Vyc29yIHBvc2l0aW9uIG9yIG9mZnNldCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIFJlc3RvcmUgdGhlIGN1cnNvciBwb3NpdGlvbiBhZnRlciBtb2RpZnlpbmcgdGhlIGZpbGVcbiAgICAgICAgbGV0IG5ld0N1cnNvclBvc2l0aW9uID0ge2xpbmU6IGN1cnNvclBvc2l0aW9uLmxpbmUsIGNoOiBjdXJzb3JQb3NpdGlvbi5jaCArIHJlc3VsdC5jdXJzb3JPZmZzZXRbMF19O1xuICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKG5ld0N1cnNvclBvc2l0aW9uKTtcbiAgICB9XG4gICAgYXN5bmMgbWFya1Rhc2tPbkxpbmVzQ3ljbGVMaXN0MShtYXJrOiBzdHJpbmcsIGVkaXRvcjogYW55LCBsaW5lcz86IG51bWJlcltdKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBjb25zdCBzb3VyY2UgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGFjdGl2ZUZpbGUpO1xuICAgIFxuICAgICAgICAvLyBTYXZlIHRoZSBjdXJzb3IgcG9zaXRpb24gYmVmb3JlIG1vZGlmeWluZyB0aGUgZmlsZVxuICAgICAgICBjb25zdCBjdXJzb3JQb3NpdGlvbiA9IGVkaXRvci5nZXRDdXJzb3IoKTtcbiAgICAgICAgaWYgKCFjdXJzb3JQb3NpdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdldCBjdXJzb3IgcG9zaXRpb24nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnRhc2tNYXJrZXIubWFya1Rhc2tJblNvdXJjZUN5Y2xlTGlzdDEoc291cmNlLCBtYXJrLCBsaW5lcyk7XG4gICAgICAgIGlmICghcmVzdWx0IHx8ICFyZXN1bHQudXBkYXRlZExpbmVUZXh0IHx8ICFyZXN1bHQuY3Vyc29yT2Zmc2V0KSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbWFyayB0YXNrIGluIHNvdXJjZScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShhY3RpdmVGaWxlLCByZXN1bHQudXBkYXRlZExpbmVUZXh0KTtcbiAgICBcbiAgICAgICAgLy8gTG9nIHRoZSB2YWx1ZXMgb2YgY3Vyc29yUG9zaXRpb24gYW5kIHJlc3VsdC5jdXJzb3JPZmZzZXQgICAgXG4gICAgICAgIGlmICghY3Vyc29yUG9zaXRpb24gfHwgISgnbGluZScgaW4gY3Vyc29yUG9zaXRpb24gJiYgJ2NoJyBpbiBjdXJzb3JQb3NpdGlvbikgfHwgIUFycmF5LmlzQXJyYXkocmVzdWx0LmN1cnNvck9mZnNldCkgfHwgcmVzdWx0LmN1cnNvck9mZnNldC5sZW5ndGggIT09IDEpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgY3Vyc29yIHBvc2l0aW9uIG9yIG9mZnNldCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIFJlc3RvcmUgdGhlIGN1cnNvciBwb3NpdGlvbiBhZnRlciBtb2RpZnlpbmcgdGhlIGZpbGVcbiAgICAgICAgbGV0IG5ld0N1cnNvclBvc2l0aW9uID0ge2xpbmU6IGN1cnNvclBvc2l0aW9uLmxpbmUsIGNoOiBjdXJzb3JQb3NpdGlvbi5jaCArIHJlc3VsdC5jdXJzb3JPZmZzZXRbMF19O1xuICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKG5ld0N1cnNvclBvc2l0aW9uKTtcbiAgICB9XG4gICAgYXN5bmMgbWFya1Rhc2tPbkxpbmVzQ3ljbGVMaXN0MihtYXJrOiBzdHJpbmcsIGVkaXRvcjogYW55LCBsaW5lcz86IG51bWJlcltdKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBjb25zdCBzb3VyY2UgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGFjdGl2ZUZpbGUpO1xuICAgIFxuICAgICAgICAvLyBTYXZlIHRoZSBjdXJzb3IgcG9zaXRpb24gYmVmb3JlIG1vZGlmeWluZyB0aGUgZmlsZVxuICAgICAgICBjb25zdCBjdXJzb3JQb3NpdGlvbiA9IGVkaXRvci5nZXRDdXJzb3IoKTtcbiAgICAgICAgaWYgKCFjdXJzb3JQb3NpdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdldCBjdXJzb3IgcG9zaXRpb24nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnRhc2tNYXJrZXIubWFya1Rhc2tJblNvdXJjZUN5Y2xlTGlzdDIoc291cmNlLCBtYXJrLCBsaW5lcyk7XG4gICAgICAgIGlmICghcmVzdWx0IHx8ICFyZXN1bHQudXBkYXRlZExpbmVUZXh0IHx8ICFyZXN1bHQuY3Vyc29yT2Zmc2V0KSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbWFyayB0YXNrIGluIHNvdXJjZScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShhY3RpdmVGaWxlLCByZXN1bHQudXBkYXRlZExpbmVUZXh0KTtcbiAgICBcbiAgICAgICAgLy8gTG9nIHRoZSB2YWx1ZXMgb2YgY3Vyc29yUG9zaXRpb24gYW5kIHJlc3VsdC5jdXJzb3JPZmZzZXQgICAgXG4gICAgICAgIGlmICghY3Vyc29yUG9zaXRpb24gfHwgISgnbGluZScgaW4gY3Vyc29yUG9zaXRpb24gJiYgJ2NoJyBpbiBjdXJzb3JQb3NpdGlvbikgfHwgIUFycmF5LmlzQXJyYXkocmVzdWx0LmN1cnNvck9mZnNldCkgfHwgcmVzdWx0LmN1cnNvck9mZnNldC5sZW5ndGggIT09IDEpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgY3Vyc29yIHBvc2l0aW9uIG9yIG9mZnNldCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIFJlc3RvcmUgdGhlIGN1cnNvciBwb3NpdGlvbiBhZnRlciBtb2RpZnlpbmcgdGhlIGZpbGVcbiAgICAgICAgbGV0IG5ld0N1cnNvclBvc2l0aW9uID0ge2xpbmU6IGN1cnNvclBvc2l0aW9uLmxpbmUsIGNoOiBjdXJzb3JQb3NpdGlvbi5jaCArIHJlc3VsdC5jdXJzb3JPZmZzZXRbMF19O1xuICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKG5ld0N1cnNvclBvc2l0aW9uKTtcbiAgICB9XG4gICAgYXN5bmMgbWFya1Rhc2tPbkxpbmVzQ3ljbGVMaXN0MyhtYXJrOiBzdHJpbmcsIGVkaXRvcjogYW55LCBsaW5lcz86IG51bWJlcltdKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBjb25zdCBzb3VyY2UgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGFjdGl2ZUZpbGUpO1xuICAgIFxuICAgICAgICAvLyBTYXZlIHRoZSBjdXJzb3IgcG9zaXRpb24gYmVmb3JlIG1vZGlmeWluZyB0aGUgZmlsZVxuICAgICAgICBjb25zdCBjdXJzb3JQb3NpdGlvbiA9IGVkaXRvci5nZXRDdXJzb3IoKTtcbiAgICAgICAgaWYgKCFjdXJzb3JQb3NpdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdldCBjdXJzb3IgcG9zaXRpb24nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnRhc2tNYXJrZXIubWFya1Rhc2tJblNvdXJjZUN5Y2xlTGlzdDMoc291cmNlLCBtYXJrLCBsaW5lcyk7XG4gICAgICAgIGlmICghcmVzdWx0IHx8ICFyZXN1bHQudXBkYXRlZExpbmVUZXh0IHx8ICFyZXN1bHQuY3Vyc29yT2Zmc2V0KSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbWFyayB0YXNrIGluIHNvdXJjZScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShhY3RpdmVGaWxlLCByZXN1bHQudXBkYXRlZExpbmVUZXh0KTtcbiAgICBcbiAgICAgICAgLy8gTG9nIHRoZSB2YWx1ZXMgb2YgY3Vyc29yUG9zaXRpb24gYW5kIHJlc3VsdC5jdXJzb3JPZmZzZXQgICAgXG4gICAgICAgIGlmICghY3Vyc29yUG9zaXRpb24gfHwgISgnbGluZScgaW4gY3Vyc29yUG9zaXRpb24gJiYgJ2NoJyBpbiBjdXJzb3JQb3NpdGlvbikgfHwgIUFycmF5LmlzQXJyYXkocmVzdWx0LmN1cnNvck9mZnNldCkgfHwgcmVzdWx0LmN1cnNvck9mZnNldC5sZW5ndGggIT09IDEpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgY3Vyc29yIHBvc2l0aW9uIG9yIG9mZnNldCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIFJlc3RvcmUgdGhlIGN1cnNvciBwb3NpdGlvbiBhZnRlciBtb2RpZnlpbmcgdGhlIGZpbGVcbiAgICAgICAgbGV0IG5ld0N1cnNvclBvc2l0aW9uID0ge2xpbmU6IGN1cnNvclBvc2l0aW9uLmxpbmUsIGNoOiBjdXJzb3JQb3NpdGlvbi5jaCArIHJlc3VsdC5jdXJzb3JPZmZzZXRbMF19O1xuICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKG5ld0N1cnNvclBvc2l0aW9uKTtcbiAgICB9XG5cbiAgICBhc3luYyBtYXJrVGFza09uTGluZXNDeWNsZVJldmVyc2VseShtYXJrOiBzdHJpbmcsIGVkaXRvcjogYW55LCBsaW5lcz86IG51bWJlcltdKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBjb25zdCBzb3VyY2UgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGFjdGl2ZUZpbGUpO1xuICAgIFxuICAgICAgICAvLyBTYXZlIHRoZSBjdXJzb3IgcG9zaXRpb24gYmVmb3JlIG1vZGlmeWluZyB0aGUgZmlsZVxuICAgICAgICBjb25zdCBjdXJzb3JQb3NpdGlvbiA9IGVkaXRvci5nZXRDdXJzb3IoKTtcbiAgICAgICAgaWYgKCFjdXJzb3JQb3NpdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdldCBjdXJzb3IgcG9zaXRpb24nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnRhc2tNYXJrZXIubWFya1Rhc2tJblNvdXJjZUN5Y2xlUmV2ZXJzZWx5KHNvdXJjZSwgbWFyaywgbGluZXMpO1xuICAgICAgICBpZiAoIXJlc3VsdCB8fCAhcmVzdWx0LnVwZGF0ZWRMaW5lVGV4dCB8fCAhcmVzdWx0LmN1cnNvck9mZnNldCkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIG1hcmsgdGFzayBpbiBzb3VyY2UnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoYWN0aXZlRmlsZSwgcmVzdWx0LnVwZGF0ZWRMaW5lVGV4dCk7XG4gICAgXG4gICAgICAgIC8vIExvZyB0aGUgdmFsdWVzIG9mIGN1cnNvclBvc2l0aW9uIGFuZCByZXN1bHQuY3Vyc29yT2Zmc2V0ICAgIFxuICAgICAgICBpZiAoIWN1cnNvclBvc2l0aW9uIHx8ICEoJ2xpbmUnIGluIGN1cnNvclBvc2l0aW9uICYmICdjaCcgaW4gY3Vyc29yUG9zaXRpb24pIHx8ICFBcnJheS5pc0FycmF5KHJlc3VsdC5jdXJzb3JPZmZzZXQpIHx8IHJlc3VsdC5jdXJzb3JPZmZzZXQubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdJbnZhbGlkIGN1cnNvciBwb3NpdGlvbiBvciBvZmZzZXQnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBSZXN0b3JlIHRoZSBjdXJzb3IgcG9zaXRpb24gYWZ0ZXIgbW9kaWZ5aW5nIHRoZSBmaWxlXG4gICAgICAgIGxldCBuZXdDdXJzb3JQb3NpdGlvbiA9IHtsaW5lOiBjdXJzb3JQb3NpdGlvbi5saW5lLCBjaDogY3Vyc29yUG9zaXRpb24uY2ggKyByZXN1bHQuY3Vyc29yT2Zmc2V0WzBdfTtcbiAgICAgICAgZWRpdG9yLnNldEN1cnNvcihuZXdDdXJzb3JQb3NpdGlvbik7XG4gICAgfVxuXG4gICAgYXN5bmMgbWFya1Rhc2tPbkxpbmVzQ3JlYXRlKG1hcms6IHN0cmluZywgZWRpdG9yOiBhbnksIGxpbmVzPzogbnVtYmVyW10pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoYWN0aXZlRmlsZSk7XG4gICAgXG4gICAgICAgIC8vIFNhdmUgdGhlIGN1cnNvciBwb3NpdGlvbiBiZWZvcmUgbW9kaWZ5aW5nIHRoZSBmaWxlXG4gICAgICAgIGNvbnN0IGN1cnNvclBvc2l0aW9uID0gZWRpdG9yLmdldEN1cnNvcigpO1xuICAgICAgICBpZiAoIWN1cnNvclBvc2l0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2V0IGN1cnNvciBwb3NpdGlvbicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMudGFza01hcmtlci5tYXJrVGFza0luU291cmNlQ3JlYXRlKHNvdXJjZSwgbWFyaywgbGluZXMpO1xuICAgICAgICBpZiAoIXJlc3VsdCB8fCAhcmVzdWx0LnVwZGF0ZWRMaW5lVGV4dCB8fCAhcmVzdWx0LmN1cnNvck9mZnNldCkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIG1hcmsgdGFzayBpbiBzb3VyY2UnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoYWN0aXZlRmlsZSwgcmVzdWx0LnVwZGF0ZWRMaW5lVGV4dCk7XG4gICAgXG4gICAgICAgIC8vIExvZyB0aGUgdmFsdWVzIG9mIGN1cnNvclBvc2l0aW9uIGFuZCByZXN1bHQuY3Vyc29yT2Zmc2V0ICAgIFxuICAgICAgICBpZiAoIWN1cnNvclBvc2l0aW9uIHx8ICEoJ2xpbmUnIGluIGN1cnNvclBvc2l0aW9uICYmICdjaCcgaW4gY3Vyc29yUG9zaXRpb24pIHx8ICFBcnJheS5pc0FycmF5KHJlc3VsdC5jdXJzb3JPZmZzZXQpIHx8IHJlc3VsdC5jdXJzb3JPZmZzZXQubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdJbnZhbGlkIGN1cnNvciBwb3NpdGlvbiBvciBvZmZzZXQnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBSZXN0b3JlIHRoZSBjdXJzb3IgcG9zaXRpb24gYWZ0ZXIgbW9kaWZ5aW5nIHRoZSBmaWxlXG4gICAgICAgIGxldCBuZXdDdXJzb3JQb3NpdGlvbiA9IHtsaW5lOiBjdXJzb3JQb3NpdGlvbi5saW5lLCBjaDogY3Vyc29yUG9zaXRpb24uY2ggKyByZXN1bHQuY3Vyc29yT2Zmc2V0WzBdfTtcbiAgICAgICAgZWRpdG9yLnNldEN1cnNvcihuZXdDdXJzb3JQb3NpdGlvbik7XG4gICAgfVxuXG4gICAgYXN5bmMgYXBwZW5kVGV4dE9uTGluZXMobWFyazogc3RyaW5nLCBlZGl0b3I6IGFueSwgbGluZXM/OiBudW1iZXJbXSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgY29uc3Qgc291cmNlID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChhY3RpdmVGaWxlKTtcblxuICAgICAgICAvLyBTYXZlIHRoZSBjdXJzb3IgcG9zaXRpb24gYmVmb3JlIG1vZGlmeWluZyB0aGUgZmlsZVxuICAgICAgICBjb25zdCBjdXJzb3JQb3NpdGlvbiA9IGVkaXRvci5nZXRDdXJzb3IoKTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnRhc2tNYXJrZXIuYXBwZW5kVGV4dEluU291cmNlKHNvdXJjZSwgbWFyaywgbGluZXMpO1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoYWN0aXZlRmlsZSwgcmVzdWx0KTtcblxuICAgICAgICAvLyBSZXN0b3JlIHRoZSBjdXJzb3IgcG9zaXRpb24gYWZ0ZXIgbW9kaWZ5aW5nIHRoZSBmaWxlXG4gICAgICAgIGVkaXRvci5zZXRDdXJzb3IoY3Vyc29yUG9zaXRpb24pO1xuICAgIH1cblxuICAgIGFzeW5jIGFwcGVuZFRleHRPbkxpbmVzVGV4dDIobWFyazogc3RyaW5nLCBlZGl0b3I6IGFueSwgbGluZXM/OiBudW1iZXJbXSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgY29uc3Qgc291cmNlID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChhY3RpdmVGaWxlKTtcblxuICAgICAgICAvLyBTYXZlIHRoZSBjdXJzb3IgcG9zaXRpb24gYmVmb3JlIG1vZGlmeWluZyB0aGUgZmlsZVxuICAgICAgICBjb25zdCBjdXJzb3JQb3NpdGlvbiA9IGVkaXRvci5nZXRDdXJzb3IoKTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnRhc2tNYXJrZXIuYXBwZW5kVGV4dEluU291cmNlVGV4dDIoc291cmNlLCBtYXJrLCBsaW5lcyk7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShhY3RpdmVGaWxlLCByZXN1bHQpO1xuXG4gICAgICAgIC8vIFJlc3RvcmUgdGhlIGN1cnNvciBwb3NpdGlvbiBhZnRlciBtb2RpZnlpbmcgdGhlIGZpbGVcbiAgICAgICAgZWRpdG9yLnNldEN1cnNvcihjdXJzb3JQb3NpdGlvbik7XG4gICAgfVxuXG4gICAgYXN5bmMgYXBwZW5kVGV4dE9uTGluZXNUZXh0MyhtYXJrOiBzdHJpbmcsIGVkaXRvcjogYW55LCBsaW5lcz86IG51bWJlcltdKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBjb25zdCBzb3VyY2UgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGFjdGl2ZUZpbGUpO1xuXG4gICAgICAgIC8vIFNhdmUgdGhlIGN1cnNvciBwb3NpdGlvbiBiZWZvcmUgbW9kaWZ5aW5nIHRoZSBmaWxlXG4gICAgICAgIGNvbnN0IGN1cnNvclBvc2l0aW9uID0gZWRpdG9yLmdldEN1cnNvcigpO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMudGFza01hcmtlci5hcHBlbmRUZXh0SW5Tb3VyY2VUZXh0Myhzb3VyY2UsIG1hcmssIGxpbmVzKTtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGFjdGl2ZUZpbGUsIHJlc3VsdCk7XG5cbiAgICAgICAgLy8gUmVzdG9yZSB0aGUgY3Vyc29yIHBvc2l0aW9uIGFmdGVyIG1vZGlmeWluZyB0aGUgZmlsZVxuICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKGN1cnNvclBvc2l0aW9uKTtcbiAgICB9XG5cbiAgICBhc3luYyBhcHBlbmRUZXh0T25MaW5lc0F1dG8obWFyazogc3RyaW5nLCBlZGl0b3I6IGFueSwgbGluZXM/OiBudW1iZXJbXSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgY29uc3Qgc291cmNlID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChhY3RpdmVGaWxlKTtcblxuICAgICAgICAvLyBTYXZlIHRoZSBjdXJzb3IgcG9zaXRpb24gYmVmb3JlIG1vZGlmeWluZyB0aGUgZmlsZVxuICAgICAgICBjb25zdCBjdXJzb3JQb3NpdGlvbiA9IGVkaXRvci5nZXRDdXJzb3IoKTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnRhc2tNYXJrZXIuYXBwZW5kVGV4dEluU291cmNlQXV0byhzb3VyY2UsIG1hcmssIGxpbmVzKTtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGFjdGl2ZUZpbGUsIHJlc3VsdCk7XG5cbiAgICAgICAgLy8gUmVzdG9yZSB0aGUgY3Vyc29yIHBvc2l0aW9uIGFmdGVyIG1vZGlmeWluZyB0aGUgZmlsZVxuICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKGN1cnNvclBvc2l0aW9uKTtcbiAgICB9XG5cbiAgICAvLyBhc3luYyBtb3ZlQWxsVGFza3MoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgIC8vICAgICBjb25zdCBzb3VyY2UgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGFjdGl2ZUZpbGUpO1xuICAgIC8vICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnRhc2tNYXJrZXIubW92ZUNvbXBsZXRlZFRhc2tzSW5GaWxlKHNvdXJjZSk7XG4gICAgLy8gICAgIHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShhY3RpdmVGaWxlLCByZXN1bHQpO1xuICAgIC8vIH1cblxuICAgIGFzeW5jIGNvbXBsZXRlQWxsVGFza3MoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBjb25zdCBzb3VyY2UgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGFjdGl2ZUZpbGUpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnRhc2tNYXJrZXIubWFya0FsbFRhc2tzQ29tcGxldGUoc291cmNlLCBcInhcIik7XG4gICAgICAgIHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShhY3RpdmVGaWxlLCByZXN1bHQpO1xuICAgIH1cblxuICAgIGFzeW5jIHJlc2V0QWxsVGFza3MoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBjb25zdCBzb3VyY2UgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGFjdGl2ZUZpbGUpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnRhc2tNYXJrZXIucmVzZXRBbGxUYXNrcyhzb3VyY2UpO1xuICAgICAgICB0aGlzLmFwcC52YXVsdC5tb2RpZnkoYWN0aXZlRmlsZSwgcmVzdWx0KTtcbiAgICB9XG5cbiAgICBoYW5kbGVyc1JlZ2lzdGVyZWQgPSBmYWxzZTtcbiAgICBldmVudFJlZjogRXZlbnRSZWY7XG4gICAgcG9zdFByb2Nlc3NvcjogTWFya2Rvd25Qb3N0UHJvY2Vzc29yO1xuICAgIHJlZ2lzdGVySGFuZGxlcnMoKTogdm9pZCB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMudGFza01hcmtlci5pbml0U2V0dGluZ3MucmVnaXN0ZXJIYW5kbGVycyAmJlxuICAgICAgICAgICAgIXRoaXMuaGFuZGxlcnNSZWdpc3RlcmVkXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVyc1JlZ2lzdGVyZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAvLyBTb3VyY2UgLyBFZGl0IG1vZGVcbiAgICAgICAgICAgIGlmICh0aGlzLnRhc2tNYXJrZXIuaW5pdFNldHRpbmdzLnJpZ2h0Q2xpY2tUYXNrTWVudSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuZXZlbnRSZWYgPSB0aGlzLmFwcC53b3Jrc3BhY2Uub24oXG4gICAgICAgICAgICAgICAgICAgICAgICBcImVkaXRvci1tZW51XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAobWVudSwgZWRpdG9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9nZXQgbGluZSBzZWxlY3Rpb25zIGhlcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1aWxkTWVudShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEN1cnJlbnRMaW5lc0Zyb21FZGl0b3IoZWRpdG9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICkpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gUHJldmlldyAvIExpdmUgUHJldmlld1xuICAgICAgICAgICAgdGhpcy5yZWdpc3Rlck1hcmtkb3duUG9zdFByb2Nlc3NvcihcbiAgICAgICAgICAgICAgICAodGhpcy5wb3N0UHJvY2Vzc29yID0gKGVsLCBjdHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hlY2tib3hlcyA9IGVsLnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTElucHV0RWxlbWVudD4oXG4gICAgICAgICAgICAgICAgICAgICAgICBcIi50YXNrLWxpc3QtaXRlbS1jaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2hlY2tib3hlcy5sZW5ndGgpIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWN0aW9uID0gY3R4LmdldFNlY3Rpb25JbmZvKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzZWN0aW9uKSByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBsaW5lU3RhcnQgfSA9IHNlY3Rpb247XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBjaGVja2JveCBvZiBBcnJheS5mcm9tKGNoZWNrYm94ZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5lID0gTnVtYmVyKGNoZWNrYm94LmRhdGFzZXQubGluZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2tNYXJrZXIuaW5pdFNldHRpbmdzLnJpZ2h0Q2xpY2tUYXNrTWVudVxuICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2JveC5wYXJlbnRFbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvbnRleHRtZW51XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZpZXcgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXJrZG93blZpZXdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZpZXcgJiYgdmlldy5lZGl0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1aWxkTWVudShtZW51LCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVTdGFydCArIGxpbmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudS5zaG93QXRNb3VzZUV2ZW50KGV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRhc2tNYXJrZXIuc2V0dGluZ3MucHJldmlld09uQ2xpY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrYm94LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNsaWNrXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzeW5jIChldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXYuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFyayA9IGF3YWl0IHByb21wdEZvck1hcmsoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrTWFya2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hcmspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcmtUYXNrT25MaW5lcyhtYXJrLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVTdGFydCArIGxpbmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1bnJlZ2lzdGVySGFuZGxlcnMoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaGFuZGxlcnNSZWdpc3RlcmVkID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKHRoaXMuZXZlbnRSZWYpIHtcbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vZmZyZWYodGhpcy5ldmVudFJlZik7XG4gICAgICAgICAgICB0aGlzLmV2ZW50UmVmID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnBvc3RQcm9jZXNzb3IpIHtcbiAgICAgICAgICAgIE1hcmtkb3duUHJldmlld1JlbmRlcmVyLnVucmVnaXN0ZXJQb3N0UHJvY2Vzc29yKHRoaXMucG9zdFByb2Nlc3Nvcik7XG4gICAgICAgICAgICB0aGlzLnBvc3RQcm9jZXNzb3IgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb251bmxvYWQoKTogdm9pZCB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwidW5sb2FkaW5nIFRhc2sgTWFya2VyIChUTSlcIik7XG4gICAgfVxuXG4gICAgYXN5bmMgbG9hZFNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oXG4gICAgICAgICAgICB7fSxcbiAgICAgICAgICAgIERFRkFVTFRfU0VUVElOR1MsXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWREYXRhKClcbiAgICAgICAgKTtcbiAgICAgICAgLy8gcmVtb3ZlIG9sZCBhdHRyaWJ1dGVcbiAgICAgICAgaWYgKHNldHRpbmdzLnJpZ2h0Q2xpY2tSZXNldCkge1xuICAgICAgICAgICAgZGVsZXRlIHNldHRpbmdzLnJpZ2h0Q2xpY2tSZXNldDtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEoc2V0dGluZ3MpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGFza01hcmtlci51cGRhdGVTZXR0aW5ncyhzZXR0aW5ncyk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2F2ZVNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMudGFza01hcmtlci5zZXR0aW5ncyk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMudGFza01hcmtlci5pbml0U2V0dGluZ3MucmlnaHRDbGlja1Rhc2tNZW51ICYmXG4gICAgICAgICAgICAhdGhpcy5oYW5kbGVyc1JlZ2lzdGVyZWRcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVySGFuZGxlcnMoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhdGhpcy50YXNrTWFya2VyLmluaXRTZXR0aW5ncy5yaWdodENsaWNrVGFza01lbnUgJiZcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlcnNSZWdpc3RlcmVkXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy51bnJlZ2lzdGVySGFuZGxlcnMoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBBcHAsIG1vbWVudCwgTm90aWNlLCBFZGl0b3IgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7XG4gICAgVGFza01hcmtlclNldHRpbmdzLFxuICAgIENvbXBpbGVkVGFza3NTZXR0aW5ncyxcbn0gZnJvbSBcIi4vdGFza21hcmtlci1TZXR0aW5nc1wiO1xuXG5leHBvcnQgY2xhc3MgVGFza01hcmtlciB7XG4gICAgc2V0dGluZ3M6IFRhc2tNYXJrZXJTZXR0aW5ncztcbiAgICBpbml0U2V0dGluZ3M6IENvbXBpbGVkVGFza3NTZXR0aW5ncztcbiAgICBhbnlMaXN0SXRlbTogUmVnRXhwO1xuICAgIHRhc2tNYXJrOiBSZWdFeHA7XG4gICAgYW55VGFza01hcms6IFJlZ0V4cDtcbiAgICBibG9ja1F1b3RlOiBSZWdFeHA7XG4gICAgYmxvY2tSZWY6IFJlZ0V4cDtcbiAgICBjb250aW51YXRpb246IFJlZ0V4cDtcbiAgICBzdHJpcFRhc2s6IFJlZ0V4cDtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgYXBwOiBBcHApIHtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgICAgIHRoaXMuYW55TGlzdEl0ZW0gPSBuZXcgUmVnRXhwKC9eKFtcXHM+XSpbLSsqXSApKFteXFxcXFtdLiopJC8pO1xuICAgICAgICB0aGlzLmFueVRhc2tNYXJrID0gbmV3IFJlZ0V4cCgvXihbXFxzPl0qWy0rKl0gXFxbKSguKShcXF0gLiopJC8pO1xuICAgICAgICB0aGlzLmJsb2NrUXVvdGUgPSBuZXcgUmVnRXhwKC9eKFxccyo+W1xccz5dKikoLiopJC8pO1xuICAgICAgICB0aGlzLmJsb2NrUmVmID0gbmV3IFJlZ0V4cCgvXiguKj8pKCBcXF5bQS1aYS16MC05LV0rKT8kLyk7XG4gICAgICAgIHRoaXMuY29udGludWF0aW9uID0gbmV3IFJlZ0V4cCgvXiggezIsfXxcXHQpLyk7XG4gICAgICAgIHRoaXMuc3RyaXBUYXNrID0gbmV3IFJlZ0V4cCgvXihbXFxzPl0qWy0rKl0pIFxcWy5cXF0gKC4qKSQvKTtcbiAgICB9XG5cbiAgICB1cGRhdGVTZXR0aW5ncyhzZXR0aW5nczogVGFza01hcmtlclNldHRpbmdzKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgICAgICAgbGV0IG1vbWVudE1hdGNoU3RyaW5nID0gbnVsbDtcblxuICAgICAgICBpZiAoc2V0dGluZ3MuYXBwZW5kRGF0ZUZvcm1hdCkge1xuICAgICAgICAgICAgLy8gWVlZWS1NTS1ERCBvciBERCBNTSwgWVlZWSBvciAuLiBbKF1ZWVlZLU1NLUREWyldIHdoZXJlIHRoZSBzdHVmZiBpbiB0aGUgYnJhY2tldHMgaXMgbGl0ZXJhbFxuICAgICAgICAgICAgY29uc3QgbGl0ZXJhbHMgPSBbXTtcblxuICAgICAgICAgICAgY29uc3QgcmVnZXgxID0gUmVnRXhwKFwiKFxcXFxbLio/XFxcXF1cXFxcXT8pXCIsIFwiZ1wiKTtcbiAgICAgICAgICAgIGxldCBtYXRjaDtcbiAgICAgICAgICAgIGxldCBpID0gMDtcblxuICAgICAgICAgICAgbW9tZW50TWF0Y2hTdHJpbmcgPSBzZXR0aW5ncy5hcHBlbmREYXRlRm9ybWF0O1xuICAgICAgICAgICAgd2hpbGUgKChtYXRjaCA9IHJlZ2V4MS5leGVjKG1vbWVudE1hdGNoU3RyaW5nKSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBtb21lbnRNYXRjaFN0cmluZyA9IG1vbWVudE1hdGNoU3RyaW5nLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoWzBdLFxuICAgICAgICAgICAgICAgICAgICBgJSQke2l9JCVgXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBsaXRlcmFscy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICBtYXRjaFswXVxuICAgICAgICAgICAgICAgICAgICAgICAgLnN1YnN0cmluZygxLCBtYXRjaFswXS5sZW5ndGggLSAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcKC9nLCBcIlxcXFwoXCIpIC8vIGVzY2FwZSBhIG5ha2VkIChcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXCkvZywgXCJcXFxcKVwiKSAvLyBlc2NhcGUgYSBuYWtlZCApXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxbL2csIFwiXFxcXFtcIikgLy8gZXNjYXBlIGEgbmFrZWQgW1xuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcXS9nLCBcIlxcXFxdXCIpXG4gICAgICAgICAgICAgICAgKTsgLy8gZXNjYXBlIGEgbmFrZWQgXVxuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gTm93IGxldCdzIHJlcGxhY2UgbW9tZW50IGRhdGUgZm9ybWF0dGluZ1xuICAgICAgICAgICAgbW9tZW50TWF0Y2hTdHJpbmcgPSBtb21lbnRNYXRjaFN0cmluZ1xuICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiWVlZWVwiLCBcIlxcXFxkezR9XCIpIC8vIDQtZGlnaXQgeWVhclxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiWVlcIiwgXCJcXFxcZHsyfVwiKSAvLyAyLWRpZ2l0IHllYXJcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIkREXCIsIFwiXFxcXGR7Mn1cIikgLy8gZGF5IG9mIG1vbnRoLCBwYWRkZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIkRcIiwgXCJcXFxcZHsxLDJ9XCIpIC8vIGRheSBvZiBtb250aCwgbm90IHBhZGRlZFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiTU1NXCIsIFwiW0EtWmEtel17M31cIikgLy8gbW9udGgsIGFiYnJ2XG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJNTVwiLCBcIlxcXFxkezJ9XCIpIC8vIG1vbnRoLCBwYWRkZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIk1cIiwgXCJcXFxcZHsxLDJ9XCIpIC8vIG1vbnRoLCBub3QgcGFkZGVkXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJISFwiLCBcIlxcXFxkezJ9XCIpIC8vIDI0LWhvdXIsIHBhZGRlZFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiSFwiLCBcIlxcXFxkezEsMn1cIikgLy8gMjQtaG91ciwgbm90IHBhZGRlZFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiaGhcIiwgXCJcXFxcZHsyfVwiKSAvLyAxMi1ob3VyLCBwYWRkZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcImhcIiwgXCJcXFxcZHsxLDJ9XCIpIC8vIDEyLWhvdXIsIG5vdCBwYWRkZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIm1tXCIsIFwiXFxcXGR7Mn1cIikgLy8gbWludXRlLCBwYWRkZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIm1cIiwgXCJcXFxcZHsxLDJ9XCIpOyAvLyBtaW51dGUsIG5vdCBwYWRkZWRcblxuICAgICAgICAgICAgaWYgKGxpdGVyYWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpdGVyYWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vbWVudE1hdGNoU3RyaW5nID0gbW9tZW50TWF0Y2hTdHJpbmcucmVwbGFjZShcbiAgICAgICAgICAgICAgICAgICAgICAgIGAlJCR7aX0kJWAsXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXRlcmFsc1tpXVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1vbWVudE1hdGNoU3RyaW5nID0gYFxcXFxzKiR7bW9tZW50TWF0Y2hTdHJpbmd9XFxcXHMqYDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZXR0aW5ncy5hcHBlbmRUZXh0Rm9ybWF0TWFyaykge1xuICAgICAgICAgICAgLy8gWVlZWS1NTS1ERCBvciBERCBNTSwgWVlZWSBvciAuLiBbKF1ZWVlZLU1NLUREWyldIHdoZXJlIHRoZSBzdHVmZiBpbiB0aGUgYnJhY2tldHMgaXMgbGl0ZXJhbFxuICAgICAgICAgICAgY29uc3QgbGl0ZXJhbHMgPSBbXTtcblxuICAgICAgICAgICAgY29uc3QgcmVnZXgxID0gUmVnRXhwKFwiKFxcXFxbLio/XFxcXF1cXFxcXT8pXCIsIFwiZ1wiKTtcbiAgICAgICAgICAgIGxldCBtYXRjaDtcbiAgICAgICAgICAgIGxldCBpID0gMDtcblxuICAgICAgICAgICAgbW9tZW50TWF0Y2hTdHJpbmcgPSBzZXR0aW5ncy5hcHBlbmRUZXh0Rm9ybWF0TWFyaztcbiAgICAgICAgICAgIHdoaWxlICgobWF0Y2ggPSByZWdleDEuZXhlYyhtb21lbnRNYXRjaFN0cmluZykpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbW9tZW50TWF0Y2hTdHJpbmcgPSBtb21lbnRNYXRjaFN0cmluZy5yZXBsYWNlKFxuICAgICAgICAgICAgICAgICAgICBtYXRjaFswXSxcbiAgICAgICAgICAgICAgICAgICAgYCUkJHtpfSQlYFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgbGl0ZXJhbHMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hbMF1cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zdWJzdHJpbmcoMSwgbWF0Y2hbMF0ubGVuZ3RoIC0gMSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXCgvZywgXCJcXFxcKFwiKSAvLyBlc2NhcGUgYSBuYWtlZCAoXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFwpL2csIFwiXFxcXClcIikgLy8gZXNjYXBlIGEgbmFrZWQgKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcWy9nLCBcIlxcXFxbXCIpIC8vIGVzY2FwZSBhIG5ha2VkIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXF0vZywgXCJcXFxcXVwiKVxuICAgICAgICAgICAgICAgICk7IC8vIGVzY2FwZSBhIG5ha2VkIF1cbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIE5vdyBsZXQncyByZXBsYWNlIG1vbWVudCBkYXRlIGZvcm1hdHRpbmdcbiAgICAgICAgICAgIG1vbWVudE1hdGNoU3RyaW5nID0gbW9tZW50TWF0Y2hTdHJpbmdcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIllZWVlcIiwgXCJcXFxcZHs0fVwiKSAvLyA0LWRpZ2l0IHllYXJcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIllZXCIsIFwiXFxcXGR7Mn1cIikgLy8gMi1kaWdpdCB5ZWFyXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJERFwiLCBcIlxcXFxkezJ9XCIpIC8vIGRheSBvZiBtb250aCwgcGFkZGVkXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJEXCIsIFwiXFxcXGR7MSwyfVwiKSAvLyBkYXkgb2YgbW9udGgsIG5vdCBwYWRkZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIk1NTVwiLCBcIltBLVphLXpdezN9XCIpIC8vIG1vbnRoLCBhYmJydlxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiTU1cIiwgXCJcXFxcZHsyfVwiKSAvLyBtb250aCwgcGFkZGVkXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJNXCIsIFwiXFxcXGR7MSwyfVwiKSAvLyBtb250aCwgbm90IHBhZGRlZFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiSEhcIiwgXCJcXFxcZHsyfVwiKSAvLyAyNC1ob3VyLCBwYWRkZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIkhcIiwgXCJcXFxcZHsxLDJ9XCIpIC8vIDI0LWhvdXIsIG5vdCBwYWRkZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcImhoXCIsIFwiXFxcXGR7Mn1cIikgLy8gMTItaG91ciwgcGFkZGVkXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJoXCIsIFwiXFxcXGR7MSwyfVwiKSAvLyAxMi1ob3VyLCBub3QgcGFkZGVkXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJtbVwiLCBcIlxcXFxkezJ9XCIpIC8vIG1pbnV0ZSwgcGFkZGVkXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJtXCIsIFwiXFxcXGR7MSwyfVwiKTsgLy8gbWludXRlLCBub3QgcGFkZGVkXG5cbiAgICAgICAgICAgIGlmIChsaXRlcmFscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXRlcmFscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBtb21lbnRNYXRjaFN0cmluZyA9IG1vbWVudE1hdGNoU3RyaW5nLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICBgJSQke2l9JCVgLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGl0ZXJhbHNbaV1cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtb21lbnRNYXRjaFN0cmluZyA9IGBcXFxccyoke21vbWVudE1hdGNoU3RyaW5nfVxcXFxzKmA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2V0dGluZ3MuYXBwZW5kVGV4dEZvcm1hdE1hcmtSb3cyKSB7XG4gICAgICAgICAgICAvLyBZWVlZLU1NLUREIG9yIEREIE1NLCBZWVlZIG9yIC4uIFsoXVlZWVktTU0tRERbKV0gd2hlcmUgdGhlIHN0dWZmIGluIHRoZSBicmFja2V0cyBpcyBsaXRlcmFsXG4gICAgICAgICAgICBjb25zdCBsaXRlcmFscyA9IFtdO1xuXG4gICAgICAgICAgICBjb25zdCByZWdleDEgPSBSZWdFeHAoXCIoXFxcXFsuKj9cXFxcXVxcXFxdPylcIiwgXCJnXCIpO1xuICAgICAgICAgICAgbGV0IG1hdGNoO1xuICAgICAgICAgICAgbGV0IGkgPSAwO1xuXG4gICAgICAgICAgICBtb21lbnRNYXRjaFN0cmluZyA9IHNldHRpbmdzLmFwcGVuZFRleHRGb3JtYXRNYXJrUm93MjtcbiAgICAgICAgICAgIHdoaWxlICgobWF0Y2ggPSByZWdleDEuZXhlYyhtb21lbnRNYXRjaFN0cmluZykpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbW9tZW50TWF0Y2hTdHJpbmcgPSBtb21lbnRNYXRjaFN0cmluZy5yZXBsYWNlKFxuICAgICAgICAgICAgICAgICAgICBtYXRjaFswXSxcbiAgICAgICAgICAgICAgICAgICAgYCUkJHtpfSQlYFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgbGl0ZXJhbHMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hbMF1cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zdWJzdHJpbmcoMSwgbWF0Y2hbMF0ubGVuZ3RoIC0gMSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXCgvZywgXCJcXFxcKFwiKSAvLyBlc2NhcGUgYSBuYWtlZCAoXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFwpL2csIFwiXFxcXClcIikgLy8gZXNjYXBlIGEgbmFrZWQgKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcWy9nLCBcIlxcXFxbXCIpIC8vIGVzY2FwZSBhIG5ha2VkIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXF0vZywgXCJcXFxcXVwiKVxuICAgICAgICAgICAgICAgICk7IC8vIGVzY2FwZSBhIG5ha2VkIF1cbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIE5vdyBsZXQncyByZXBsYWNlIG1vbWVudCBkYXRlIGZvcm1hdHRpbmdcbiAgICAgICAgICAgIG1vbWVudE1hdGNoU3RyaW5nID0gbW9tZW50TWF0Y2hTdHJpbmdcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIllZWVlcIiwgXCJcXFxcZHs0fVwiKSAvLyA0LWRpZ2l0IHllYXJcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIllZXCIsIFwiXFxcXGR7Mn1cIikgLy8gMi1kaWdpdCB5ZWFyXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJERFwiLCBcIlxcXFxkezJ9XCIpIC8vIGRheSBvZiBtb250aCwgcGFkZGVkXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJEXCIsIFwiXFxcXGR7MSwyfVwiKSAvLyBkYXkgb2YgbW9udGgsIG5vdCBwYWRkZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIk1NTVwiLCBcIltBLVphLXpdezN9XCIpIC8vIG1vbnRoLCBhYmJydlxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiTU1cIiwgXCJcXFxcZHsyfVwiKSAvLyBtb250aCwgcGFkZGVkXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJNXCIsIFwiXFxcXGR7MSwyfVwiKSAvLyBtb250aCwgbm90IHBhZGRlZFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiSEhcIiwgXCJcXFxcZHsyfVwiKSAvLyAyNC1ob3VyLCBwYWRkZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIkhcIiwgXCJcXFxcZHsxLDJ9XCIpIC8vIDI0LWhvdXIsIG5vdCBwYWRkZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcImhoXCIsIFwiXFxcXGR7Mn1cIikgLy8gMTItaG91ciwgcGFkZGVkXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJoXCIsIFwiXFxcXGR7MSwyfVwiKSAvLyAxMi1ob3VyLCBub3QgcGFkZGVkXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJtbVwiLCBcIlxcXFxkezJ9XCIpIC8vIG1pbnV0ZSwgcGFkZGVkXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJtXCIsIFwiXFxcXGR7MSwyfVwiKTsgLy8gbWludXRlLCBub3QgcGFkZGVkXG5cbiAgICAgICAgICAgIGlmIChsaXRlcmFscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXRlcmFscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBtb21lbnRNYXRjaFN0cmluZyA9IG1vbWVudE1hdGNoU3RyaW5nLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICBgJSQke2l9JCVgLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGl0ZXJhbHNbaV1cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtb21lbnRNYXRjaFN0cmluZyA9IGBcXFxccyoke21vbWVudE1hdGNoU3RyaW5nfVxcXFxzKmA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2V0dGluZ3MuYXBwZW5kVGV4dEZvcm1hdENyZWF0aW9uKSB7XG4gICAgICAgICAgICAvLyBZWVlZLU1NLUREIG9yIEREIE1NLCBZWVlZIG9yIC4uIFsoXVlZWVktTU0tRERbKV0gd2hlcmUgdGhlIHN0dWZmIGluIHRoZSBicmFja2V0cyBpcyBsaXRlcmFsXG4gICAgICAgICAgICBjb25zdCBsaXRlcmFscyA9IFtdO1xuXG4gICAgICAgICAgICBjb25zdCByZWdleDEgPSBSZWdFeHAoXCIoXFxcXFsuKj9cXFxcXVxcXFxdPylcIiwgXCJnXCIpO1xuICAgICAgICAgICAgbGV0IG1hdGNoO1xuICAgICAgICAgICAgbGV0IGkgPSAwO1xuXG4gICAgICAgICAgICBtb21lbnRNYXRjaFN0cmluZyA9IHNldHRpbmdzLmFwcGVuZFRleHRGb3JtYXRDcmVhdGlvbjtcbiAgICAgICAgICAgIHdoaWxlICgobWF0Y2ggPSByZWdleDEuZXhlYyhtb21lbnRNYXRjaFN0cmluZykpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbW9tZW50TWF0Y2hTdHJpbmcgPSBtb21lbnRNYXRjaFN0cmluZy5yZXBsYWNlKFxuICAgICAgICAgICAgICAgICAgICBtYXRjaFswXSxcbiAgICAgICAgICAgICAgICAgICAgYCUkJHtpfSQlYFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgbGl0ZXJhbHMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hbMF1cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zdWJzdHJpbmcoMSwgbWF0Y2hbMF0ubGVuZ3RoIC0gMSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXCgvZywgXCJcXFxcKFwiKSAvLyBlc2NhcGUgYSBuYWtlZCAoXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFwpL2csIFwiXFxcXClcIikgLy8gZXNjYXBlIGEgbmFrZWQgKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcWy9nLCBcIlxcXFxbXCIpIC8vIGVzY2FwZSBhIG5ha2VkIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXF0vZywgXCJcXFxcXVwiKVxuICAgICAgICAgICAgICAgICk7IC8vIGVzY2FwZSBhIG5ha2VkIF1cbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIE5vdyBsZXQncyByZXBsYWNlIG1vbWVudCBkYXRlIGZvcm1hdHRpbmdcbiAgICAgICAgICAgIG1vbWVudE1hdGNoU3RyaW5nID0gbW9tZW50TWF0Y2hTdHJpbmdcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIllZWVlcIiwgXCJcXFxcZHs0fVwiKSAvLyA0LWRpZ2l0IHllYXJcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIllZXCIsIFwiXFxcXGR7Mn1cIikgLy8gMi1kaWdpdCB5ZWFyXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJERFwiLCBcIlxcXFxkezJ9XCIpIC8vIGRheSBvZiBtb250aCwgcGFkZGVkXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJEXCIsIFwiXFxcXGR7MSwyfVwiKSAvLyBkYXkgb2YgbW9udGgsIG5vdCBwYWRkZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIk1NTVwiLCBcIltBLVphLXpdezN9XCIpIC8vIG1vbnRoLCBhYmJydlxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiTU1cIiwgXCJcXFxcZHsyfVwiKSAvLyBtb250aCwgcGFkZGVkXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJNXCIsIFwiXFxcXGR7MSwyfVwiKSAvLyBtb250aCwgbm90IHBhZGRlZFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiSEhcIiwgXCJcXFxcZHsyfVwiKSAvLyAyNC1ob3VyLCBwYWRkZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIkhcIiwgXCJcXFxcZHsxLDJ9XCIpIC8vIDI0LWhvdXIsIG5vdCBwYWRkZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcImhoXCIsIFwiXFxcXGR7Mn1cIikgLy8gMTItaG91ciwgcGFkZGVkXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJoXCIsIFwiXFxcXGR7MSwyfVwiKSAvLyAxMi1ob3VyLCBub3QgcGFkZGVkXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJtbVwiLCBcIlxcXFxkezJ9XCIpIC8vIG1pbnV0ZSwgcGFkZGVkXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJtXCIsIFwiXFxcXGR7MSwyfVwiKTsgLy8gbWludXRlLCBub3QgcGFkZGVkXG5cbiAgICAgICAgICAgIGlmIChsaXRlcmFscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXRlcmFscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBtb21lbnRNYXRjaFN0cmluZyA9IG1vbWVudE1hdGNoU3RyaW5nLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICBgJSQke2l9JCVgLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGl0ZXJhbHNbaV1cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtb21lbnRNYXRjaFN0cmluZyA9IGBcXFxccyoke21vbWVudE1hdGNoU3RyaW5nfVxcXFxzKmA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2V0dGluZ3MuYXBwZW5kVGV4dEZvcm1hdEFwcGVuZCkge1xuICAgICAgICAgICAgLy8gWVlZWS1NTS1ERCBvciBERCBNTSwgWVlZWSBvciAuLiBbKF1ZWVlZLU1NLUREWyldIHdoZXJlIHRoZSBzdHVmZiBpbiB0aGUgYnJhY2tldHMgaXMgbGl0ZXJhbFxuICAgICAgICAgICAgY29uc3QgbGl0ZXJhbHMgPSBbXTtcblxuICAgICAgICAgICAgY29uc3QgcmVnZXgxID0gUmVnRXhwKFwiKFxcXFxbLio/XFxcXF1cXFxcXT8pXCIsIFwiZ1wiKTtcbiAgICAgICAgICAgIGxldCBtYXRjaDtcbiAgICAgICAgICAgIGxldCBpID0gMDtcblxuICAgICAgICAgICAgbW9tZW50TWF0Y2hTdHJpbmcgPSBzZXR0aW5ncy5hcHBlbmRUZXh0Rm9ybWF0QXBwZW5kO1xuICAgICAgICAgICAgd2hpbGUgKChtYXRjaCA9IHJlZ2V4MS5leGVjKG1vbWVudE1hdGNoU3RyaW5nKSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBtb21lbnRNYXRjaFN0cmluZyA9IG1vbWVudE1hdGNoU3RyaW5nLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoWzBdLFxuICAgICAgICAgICAgICAgICAgICBgJSQke2l9JCVgXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBsaXRlcmFscy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICBtYXRjaFswXVxuICAgICAgICAgICAgICAgICAgICAgICAgLnN1YnN0cmluZygxLCBtYXRjaFswXS5sZW5ndGggLSAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcKC9nLCBcIlxcXFwoXCIpIC8vIGVzY2FwZSBhIG5ha2VkIChcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXCkvZywgXCJcXFxcKVwiKSAvLyBlc2NhcGUgYSBuYWtlZCApXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxbL2csIFwiXFxcXFtcIikgLy8gZXNjYXBlIGEgbmFrZWQgW1xuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcXS9nLCBcIlxcXFxdXCIpXG4gICAgICAgICAgICAgICAgKTsgLy8gZXNjYXBlIGEgbmFrZWQgXVxuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gTm93IGxldCdzIHJlcGxhY2UgbW9tZW50IGRhdGUgZm9ybWF0dGluZ1xuICAgICAgICAgICAgbW9tZW50TWF0Y2hTdHJpbmcgPSBtb21lbnRNYXRjaFN0cmluZ1xuICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiWVlZWVwiLCBcIlxcXFxkezR9XCIpIC8vIDQtZGlnaXQgeWVhclxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiWVlcIiwgXCJcXFxcZHsyfVwiKSAvLyAyLWRpZ2l0IHllYXJcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIkREXCIsIFwiXFxcXGR7Mn1cIikgLy8gZGF5IG9mIG1vbnRoLCBwYWRkZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIkRcIiwgXCJcXFxcZHsxLDJ9XCIpIC8vIGRheSBvZiBtb250aCwgbm90IHBhZGRlZFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiTU1NXCIsIFwiW0EtWmEtel17M31cIikgLy8gbW9udGgsIGFiYnJ2XG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJNTVwiLCBcIlxcXFxkezJ9XCIpIC8vIG1vbnRoLCBwYWRkZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIk1cIiwgXCJcXFxcZHsxLDJ9XCIpIC8vIG1vbnRoLCBub3QgcGFkZGVkXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJISFwiLCBcIlxcXFxkezJ9XCIpIC8vIDI0LWhvdXIsIHBhZGRlZFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiSFwiLCBcIlxcXFxkezEsMn1cIikgLy8gMjQtaG91ciwgbm90IHBhZGRlZFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiaGhcIiwgXCJcXFxcZHsyfVwiKSAvLyAxMi1ob3VyLCBwYWRkZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcImhcIiwgXCJcXFxcZHsxLDJ9XCIpIC8vIDEyLWhvdXIsIG5vdCBwYWRkZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIm1tXCIsIFwiXFxcXGR7Mn1cIikgLy8gbWludXRlLCBwYWRkZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIm1cIiwgXCJcXFxcZHsxLDJ9XCIpOyAvLyBtaW51dGUsIG5vdCBwYWRkZWRcblxuICAgICAgICAgICAgaWYgKGxpdGVyYWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpdGVyYWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vbWVudE1hdGNoU3RyaW5nID0gbW9tZW50TWF0Y2hTdHJpbmcucmVwbGFjZShcbiAgICAgICAgICAgICAgICAgICAgICAgIGAlJCR7aX0kJWAsXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXRlcmFsc1tpXVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1vbWVudE1hdGNoU3RyaW5nID0gYFxcXFxzKiR7bW9tZW50TWF0Y2hTdHJpbmd9XFxcXHMqYDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZXR0aW5ncy5hcHBlbmRUZXh0Rm9ybWF0QXBwZW5kVGV4dDIpIHtcbiAgICAgICAgICAgIC8vIFlZWVktTU0tREQgb3IgREQgTU0sIFlZWVkgb3IgLi4gWyhdWVlZWS1NTS1ERFspXSB3aGVyZSB0aGUgc3R1ZmYgaW4gdGhlIGJyYWNrZXRzIGlzIGxpdGVyYWxcbiAgICAgICAgICAgIGNvbnN0IGxpdGVyYWxzID0gW107XG5cbiAgICAgICAgICAgIGNvbnN0IHJlZ2V4MSA9IFJlZ0V4cChcIihcXFxcWy4qP1xcXFxdXFxcXF0/KVwiLCBcImdcIik7XG4gICAgICAgICAgICBsZXQgbWF0Y2g7XG4gICAgICAgICAgICBsZXQgaSA9IDA7XG5cbiAgICAgICAgICAgIG1vbWVudE1hdGNoU3RyaW5nID0gc2V0dGluZ3MuYXBwZW5kVGV4dEZvcm1hdEFwcGVuZFRleHQyO1xuICAgICAgICAgICAgd2hpbGUgKChtYXRjaCA9IHJlZ2V4MS5leGVjKG1vbWVudE1hdGNoU3RyaW5nKSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBtb21lbnRNYXRjaFN0cmluZyA9IG1vbWVudE1hdGNoU3RyaW5nLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoWzBdLFxuICAgICAgICAgICAgICAgICAgICBgJSQke2l9JCVgXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBsaXRlcmFscy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICBtYXRjaFswXVxuICAgICAgICAgICAgICAgICAgICAgICAgLnN1YnN0cmluZygxLCBtYXRjaFswXS5sZW5ndGggLSAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcKC9nLCBcIlxcXFwoXCIpIC8vIGVzY2FwZSBhIG5ha2VkIChcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXCkvZywgXCJcXFxcKVwiKSAvLyBlc2NhcGUgYSBuYWtlZCApXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxbL2csIFwiXFxcXFtcIikgLy8gZXNjYXBlIGEgbmFrZWQgW1xuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcXS9nLCBcIlxcXFxdXCIpXG4gICAgICAgICAgICAgICAgKTsgLy8gZXNjYXBlIGEgbmFrZWQgXVxuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gTm93IGxldCdzIHJlcGxhY2UgbW9tZW50IGRhdGUgZm9ybWF0dGluZ1xuICAgICAgICAgICAgbW9tZW50TWF0Y2hTdHJpbmcgPSBtb21lbnRNYXRjaFN0cmluZ1xuICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiWVlZWVwiLCBcIlxcXFxkezR9XCIpIC8vIDQtZGlnaXQgeWVhclxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiWVlcIiwgXCJcXFxcZHsyfVwiKSAvLyAyLWRpZ2l0IHllYXJcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIkREXCIsIFwiXFxcXGR7Mn1cIikgLy8gZGF5IG9mIG1vbnRoLCBwYWRkZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIkRcIiwgXCJcXFxcZHsxLDJ9XCIpIC8vIGRheSBvZiBtb250aCwgbm90IHBhZGRlZFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiTU1NXCIsIFwiW0EtWmEtel17M31cIikgLy8gbW9udGgsIGFiYnJ2XG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJNTVwiLCBcIlxcXFxkezJ9XCIpIC8vIG1vbnRoLCBwYWRkZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIk1cIiwgXCJcXFxcZHsxLDJ9XCIpIC8vIG1vbnRoLCBub3QgcGFkZGVkXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJISFwiLCBcIlxcXFxkezJ9XCIpIC8vIDI0LWhvdXIsIHBhZGRlZFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiSFwiLCBcIlxcXFxkezEsMn1cIikgLy8gMjQtaG91ciwgbm90IHBhZGRlZFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiaGhcIiwgXCJcXFxcZHsyfVwiKSAvLyAxMi1ob3VyLCBwYWRkZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcImhcIiwgXCJcXFxcZHsxLDJ9XCIpIC8vIDEyLWhvdXIsIG5vdCBwYWRkZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIm1tXCIsIFwiXFxcXGR7Mn1cIikgLy8gbWludXRlLCBwYWRkZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIm1cIiwgXCJcXFxcZHsxLDJ9XCIpOyAvLyBtaW51dGUsIG5vdCBwYWRkZWRcblxuICAgICAgICAgICAgaWYgKGxpdGVyYWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpdGVyYWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vbWVudE1hdGNoU3RyaW5nID0gbW9tZW50TWF0Y2hTdHJpbmcucmVwbGFjZShcbiAgICAgICAgICAgICAgICAgICAgICAgIGAlJCR7aX0kJWAsXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXRlcmFsc1tpXVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1vbWVudE1hdGNoU3RyaW5nID0gYFxcXFxzKiR7bW9tZW50TWF0Y2hTdHJpbmd9XFxcXHMqYDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZXR0aW5ncy5hcHBlbmRUZXh0Rm9ybWF0QXBwZW5kVGV4dDMpIHtcbiAgICAgICAgICAgIC8vIFlZWVktTU0tREQgb3IgREQgTU0sIFlZWVkgb3IgLi4gWyhdWVlZWS1NTS1ERFspXSB3aGVyZSB0aGUgc3R1ZmYgaW4gdGhlIGJyYWNrZXRzIGlzIGxpdGVyYWxcbiAgICAgICAgICAgIGNvbnN0IGxpdGVyYWxzID0gW107XG5cbiAgICAgICAgICAgIGNvbnN0IHJlZ2V4MSA9IFJlZ0V4cChcIihcXFxcWy4qP1xcXFxdXFxcXF0/KVwiLCBcImdcIik7XG4gICAgICAgICAgICBsZXQgbWF0Y2g7XG4gICAgICAgICAgICBsZXQgaSA9IDA7XG5cbiAgICAgICAgICAgIG1vbWVudE1hdGNoU3RyaW5nID0gc2V0dGluZ3MuYXBwZW5kVGV4dEZvcm1hdEFwcGVuZFRleHQzO1xuICAgICAgICAgICAgd2hpbGUgKChtYXRjaCA9IHJlZ2V4MS5leGVjKG1vbWVudE1hdGNoU3RyaW5nKSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBtb21lbnRNYXRjaFN0cmluZyA9IG1vbWVudE1hdGNoU3RyaW5nLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoWzBdLFxuICAgICAgICAgICAgICAgICAgICBgJSQke2l9JCVgXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBsaXRlcmFscy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICBtYXRjaFswXVxuICAgICAgICAgICAgICAgICAgICAgICAgLnN1YnN0cmluZygxLCBtYXRjaFswXS5sZW5ndGggLSAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcKC9nLCBcIlxcXFwoXCIpIC8vIGVzY2FwZSBhIG5ha2VkIChcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXCkvZywgXCJcXFxcKVwiKSAvLyBlc2NhcGUgYSBuYWtlZCApXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxbL2csIFwiXFxcXFtcIikgLy8gZXNjYXBlIGEgbmFrZWQgW1xuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcXS9nLCBcIlxcXFxdXCIpXG4gICAgICAgICAgICAgICAgKTsgLy8gZXNjYXBlIGEgbmFrZWQgXVxuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gTm93IGxldCdzIHJlcGxhY2UgbW9tZW50IGRhdGUgZm9ybWF0dGluZ1xuICAgICAgICAgICAgbW9tZW50TWF0Y2hTdHJpbmcgPSBtb21lbnRNYXRjaFN0cmluZ1xuICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiWVlZWVwiLCBcIlxcXFxkezR9XCIpIC8vIDQtZGlnaXQgeWVhclxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiWVlcIiwgXCJcXFxcZHsyfVwiKSAvLyAyLWRpZ2l0IHllYXJcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIkREXCIsIFwiXFxcXGR7Mn1cIikgLy8gZGF5IG9mIG1vbnRoLCBwYWRkZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIkRcIiwgXCJcXFxcZHsxLDJ9XCIpIC8vIGRheSBvZiBtb250aCwgbm90IHBhZGRlZFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiTU1NXCIsIFwiW0EtWmEtel17M31cIikgLy8gbW9udGgsIGFiYnJ2XG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJNTVwiLCBcIlxcXFxkezJ9XCIpIC8vIG1vbnRoLCBwYWRkZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIk1cIiwgXCJcXFxcZHsxLDJ9XCIpIC8vIG1vbnRoLCBub3QgcGFkZGVkXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJISFwiLCBcIlxcXFxkezJ9XCIpIC8vIDI0LWhvdXIsIHBhZGRlZFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiSFwiLCBcIlxcXFxkezEsMn1cIikgLy8gMjQtaG91ciwgbm90IHBhZGRlZFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiaGhcIiwgXCJcXFxcZHsyfVwiKSAvLyAxMi1ob3VyLCBwYWRkZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcImhcIiwgXCJcXFxcZHsxLDJ9XCIpIC8vIDEyLWhvdXIsIG5vdCBwYWRkZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIm1tXCIsIFwiXFxcXGR7Mn1cIikgLy8gbWludXRlLCBwYWRkZWRcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIm1cIiwgXCJcXFxcZHsxLDJ9XCIpOyAvLyBtaW51dGUsIG5vdCBwYWRkZWRcblxuICAgICAgICAgICAgaWYgKGxpdGVyYWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpdGVyYWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vbWVudE1hdGNoU3RyaW5nID0gbW9tZW50TWF0Y2hTdHJpbmcucmVwbGFjZShcbiAgICAgICAgICAgICAgICAgICAgICAgIGAlJCR7aX0kJWAsXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXRlcmFsc1tpXVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1vbWVudE1hdGNoU3RyaW5nID0gYFxcXFxzKiR7bW9tZW50TWF0Y2hTdHJpbmd9XFxcXHMqYDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNvbXBsZXRlZFRhc2tzID1cbiAgICAgICAgICAgICh0aGlzLnNldHRpbmdzLm9ubHlMb3dlcmNhc2VYID8gXCJ4XCIgOiBcInhYXCIpICtcbiAgICAgICAgICAgICh0aGlzLnNldHRpbmdzLnN1cHBvcnRDYW5jZWxlZFRhc2tzID8gXCItXCIgOiBcIlwiKTtcblxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5pbmNvbXBsZXRlVGFza1ZhbHVlcy5pbmRleE9mKFwiIFwiKSA8IDApIHsgLy8gTm8gbmVlZCB0byBoYW5kbGUgUm93MlxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5pbmNvbXBsZXRlVGFza1ZhbHVlcyA9XG4gICAgICAgICAgICAgICAgXCIgXCIgKyB0aGlzLnNldHRpbmdzLmluY29tcGxldGVUYXNrVmFsdWVzOyAvLyBOb3Qgd29ya2luZyBpZiByZW1vdmluZyBzcGFjZVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmlnaHRDbGlja1Rhc2tNZW51ID1cbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MucmlnaHRDbGlja0NvbXBsZXRlIHx8XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLnJpZ2h0Q2xpY2tNYXJrIHx8XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLnJpZ2h0Q2xpY2tDeWNsZSB8fFxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5yaWdodENsaWNrQ3ljbGVMaXN0MSB8fFxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5yaWdodENsaWNrQ3ljbGVMaXN0MiB8fFxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5yaWdodENsaWNrQ3ljbGVMaXN0MyB8fFxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5yaWdodENsaWNrQ3ljbGVSZXZlcnNlbHkgfHxcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MucmlnaHRDbGlja0NyZWF0ZSB8fFxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5yaWdodENsaWNrQXBwZW5kIHx8XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLnJpZ2h0Q2xpY2tBcHBlbmRUZXh0MiB8fFxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5yaWdodENsaWNrQXBwZW5kVGV4dDMgfHxcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MucmlnaHRDbGlja0FwcGVuZFRleHRBdXRvIHx8XG4gICAgICAgICAgICAvLyB0aGlzLnNldHRpbmdzLnJpZ2h0Q2xpY2tNb3ZlIHx8XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLnJpZ2h0Q2xpY2tSZXNldFRhc2sgfHxcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MucmlnaHRDbGlja1Jlc2V0QWxsIHx8XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLnJpZ2h0Q2xpY2tUb2dnbGVBbGw7XG5cbiAgICAgICAgdGhpcy5pbml0U2V0dGluZ3MgPSB7XG4gICAgICAgICAgICByZW1vdmVSZWdFeHA6IHRoaXMudHJ5Q3JlYXRlUmVtb3ZlUmVnZXgoXG4gICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5yZW1vdmVFeHByZXNzaW9uXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgcmVzZXRSZWdFeHA6IHRoaXMudHJ5Q3JlYXRlUmVzZXRSZWdleChtb21lbnRNYXRjaFN0cmluZyksXG4gICAgICAgICAgICBpbmNvbXBsZXRlVGFza1JlZ0V4cDogdGhpcy50cnlDcmVhdGVJbmNvbXBsZXRlUmVnZXgoXG4gICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5pbmNvbXBsZXRlVGFza1ZhbHVlc1xuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIGluY29tcGxldGVUYXNrUmVnRXhwUm93MjogdGhpcy50cnlDcmVhdGVJbmNvbXBsZXRlUmVnZXgoXG4gICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5pbmNvbXBsZXRlVGFza1ZhbHVlc1JvdzJcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICByaWdodENsaWNrVGFza01lbnU6IHJpZ2h0Q2xpY2tUYXNrTWVudSxcbiAgICAgICAgICAgIHJlZ2lzdGVySGFuZGxlcnM6XG4gICAgICAgICAgICAgICAgcmlnaHRDbGlja1Rhc2tNZW51IHx8IHRoaXMuc2V0dGluZ3MucHJldmlld09uQ2xpY2ssXG4gICAgICAgICAgICBjb21wbGV0ZWRUYXNrczogY29tcGxldGVkVGFza3MsXG4gICAgICAgICAgICBjb21wbGV0ZWRUYXNrUmVnRXhwOiB0aGlzLnRyeUNyZWF0ZUNvbXBsZXRlUmVnZXgoY29tcGxldGVkVGFza3MpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zb2xlLmRlYnVnKFxuICAgICAgICAgICAgXCJUYXNrIE1hcmtlcjogdXBkYXRlZCBjb25maWd1cmF0aW9uICVvLCAlb1wiLFxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncyxcbiAgICAgICAgICAgIHRoaXMuaW5pdFNldHRpbmdzXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgdHJ5Q3JlYXRlUmVtb3ZlUmVnZXgocGFyYW06IHN0cmluZyk6IFJlZ0V4cCB7XG4gICAgICAgIHJldHVybiBwYXJhbSA/IG5ldyBSZWdFeHAocGFyYW0sIFwiZ1wiKSA6IG51bGw7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB0cnlDcmVhdGVSZXNldFJlZ2V4KHBhcmFtOiBzdHJpbmcpOiBSZWdFeHAge1xuICAgICAgICByZXR1cm4gcGFyYW0gPyBuZXcgUmVnRXhwKHBhcmFtICsgXCIoIFxcXFxeW0EtWmEtejAtOS1dKyk/JFwiKSA6IG51bGw7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB0cnlDcmVhdGVDb21wbGV0ZVJlZ2V4KHBhcmFtOiBzdHJpbmcpOiBSZWdFeHAge1xuICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChgXihbXFxcXHM+XSotIFxcXFxbKVske3BhcmFtfV0oXFxcXF0gLiopJGApO1xuICAgIH1cblxuICAgIHByaXZhdGUgdHJ5Q3JlYXRlSW5jb21wbGV0ZVJlZ2V4KHBhcmFtOiBzdHJpbmcpOiBSZWdFeHAge1xuICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChgXihbXFxcXHM+XSotIFxcXFxbKVske3BhcmFtfV0oXFxcXF0gLiopJGApO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVtb3ZlQ2hlY2tib3hGcm9tTGluZShsaW5lVGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGxpbmVUZXh0LnJlcGxhY2UodGhpcy5zdHJpcFRhc2ssIFwiJDEgJDJcIik7XG4gICAgfVxuXG4gICAgLyoqIF9Db21wbGV0ZV8gYSB0YXNrOiBhcHBlbmQgY29tcGxldGlvbiB0ZXh0LCByZW1vdmUgY29uZmlndXJlZCBzdHJpbmdzICovXG4gICAgcHJpdmF0ZSBjb21wbGV0ZVRhc2tMaW5lKGxpbmVUZXh0OiBzdHJpbmcsIG1hcmsgPSBcInhcIik6IHN0cmluZyB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoXCJUYXNrIE1hcmtlcjogY29tcGxldGUgdGFzayB3aXRoICVzOiAlc1wiLCBtYXJrLCBsaW5lVGV4dCk7XG4gICAgICAgIGxldCBtYXJrZWQgPSBsaW5lVGV4dC5yZXBsYWNlKHRoaXMuYW55VGFza01hcmssIGAkMSR7bWFya30kM2ApO1xuICAgICAgICBpZiAodGhpcy5pbml0U2V0dGluZ3MucmVtb3ZlUmVnRXhwKSB7XG4gICAgICAgICAgICBtYXJrZWQgPSBtYXJrZWQucmVwbGFjZSh0aGlzLmluaXRTZXR0aW5ncy5yZW1vdmVSZWdFeHAsIFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmFwcGVuZERhdGVGb3JtYXQpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmljdExpbmVFbmRpbmcgPSBsaW5lVGV4dC5lbmRzV2l0aChcIiAgXCIpO1xuICAgICAgICAgICAgbGV0IGJsb2NraWQgPSBcIlwiO1xuICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSB0aGlzLmJsb2NrUmVmLmV4ZWMobWFya2VkKTtcbiAgICAgICAgICAgIGlmIChtYXRjaCAmJiBtYXRjaFsyXSkge1xuICAgICAgICAgICAgICAgIG1hcmtlZCA9IG1hdGNoWzFdO1xuICAgICAgICAgICAgICAgIGJsb2NraWQgPSBtYXRjaFsyXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghbWFya2VkLmVuZHNXaXRoKFwiIFwiKSkge1xuICAgICAgICAgICAgICAgIG1hcmtlZCArPSBcIiBcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1hcmtlZCArPSBtb21lbnQoKS5mb3JtYXQodGhpcy5zZXR0aW5ncy5hcHBlbmREYXRlRm9ybWF0KSArIGJsb2NraWQ7XG4gICAgICAgICAgICBpZiAoc3RyaWN0TGluZUVuZGluZykge1xuICAgICAgICAgICAgICAgIG1hcmtlZCArPSBcIiAgXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1hcmtlZDtcbiAgICB9XG5cbiAgICBtYXJrQWxsVGFza3NDb21wbGV0ZShzb3VyY2U6IHN0cmluZywgbWFyazogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgbGluZXMgPSBzb3VyY2Uuc3BsaXQoXCJcXG5cIik7XG4gICAgICAgIGNvbnN0IHJlc3VsdDogc3RyaW5nW10gPSBbXTtcblxuICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmluaXRTZXR0aW5ncy5pbmNvbXBsZXRlVGFza1JlZ0V4cC5leGVjKGxpbmUpKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godGhpcy5jb21wbGV0ZVRhc2tMaW5lKGxpbmUsIG1hcmspKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5pbml0U2V0dGluZ3MuaW5jb21wbGV0ZVRhc2tSZWdFeHBSb3cyLmV4ZWMobGluZSkpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh0aGlzLmNvbXBsZXRlVGFza0xpbmUobGluZSwgbWFyaykpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChsaW5lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0LmpvaW4oXCJcXG5cIik7XG4gICAgfVxuXG4gICAgbWFya1Rhc2tJblNvdXJjZShcbiAgICAgICAgc291cmNlOiBzdHJpbmcsXG4gICAgICAgIG1hcms6IHN0cmluZyxcbiAgICAgICAgbGluZXM6IG51bWJlcltdID0gW11cbiAgICApOiB7IHVwZGF0ZWRMaW5lVGV4dDogc3RyaW5nLCBjdXJzb3JPZmZzZXQ6IG51bWJlcltdIH0ge1xuICAgICAgICBjb25zdCBzcGxpdCA9IHNvdXJjZS5zcGxpdChcIlxcblwiKTtcbiAgICAgICAgY29uc3QgY3Vyc29yT2Zmc2V0OiBudW1iZXJbXSA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgbGluZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMubWFya1Rhc2tMaW5lKHNwbGl0W25dLCBtYXJrKTtcbiAgICAgICAgICAgIHNwbGl0W25dID0gcmVzdWx0LnVwZGF0ZWRMaW5lVGV4dDtcbiAgICAgICAgICAgIGN1cnNvck9mZnNldC5wdXNoKHJlc3VsdC5jdXJzb3JPZmZzZXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHVwZGF0ZWRMaW5lVGV4dDogc3BsaXQuam9pbihcIlxcblwiKSwgY3Vyc29yT2Zmc2V0OiBjdXJzb3JPZmZzZXQgfTtcbiAgICB9XG5cbiAgICBtYXJrVGFza0luU291cmNlQ3ljbGUoXG4gICAgICAgIHNvdXJjZTogc3RyaW5nLFxuICAgICAgICBtYXJrOiBzdHJpbmcsXG4gICAgICAgIGxpbmVzOiBudW1iZXJbXSA9IFtdXG4gICAgKTogeyB1cGRhdGVkTGluZVRleHQ6IHN0cmluZywgY3Vyc29yT2Zmc2V0OiBudW1iZXJbXSB9IHtcbiAgICAgICAgY29uc3Qgc3BsaXQgPSBzb3VyY2Uuc3BsaXQoXCJcXG5cIik7XG4gICAgICAgIGNvbnN0IGN1cnNvck9mZnNldDogbnVtYmVyW10gPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIGxpbmVzKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLm1hcmtUYXNrTGluZUN5Y2xlKHNwbGl0W25dLCBtYXJrKTtcbiAgICAgICAgICAgIHNwbGl0W25dID0gcmVzdWx0LnVwZGF0ZWRMaW5lVGV4dDtcbiAgICAgICAgICAgIGN1cnNvck9mZnNldC5wdXNoKHJlc3VsdC5jdXJzb3JPZmZzZXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHVwZGF0ZWRMaW5lVGV4dDogc3BsaXQuam9pbihcIlxcblwiKSwgY3Vyc29yT2Zmc2V0OiBjdXJzb3JPZmZzZXQgfTtcbiAgICB9XG4gICAgbWFya1Rhc2tJblNvdXJjZUN5Y2xlTGlzdDEoXG4gICAgICAgIHNvdXJjZTogc3RyaW5nLFxuICAgICAgICBtYXJrOiBzdHJpbmcsXG4gICAgICAgIGxpbmVzOiBudW1iZXJbXSA9IFtdXG4gICAgKTogeyB1cGRhdGVkTGluZVRleHQ6IHN0cmluZywgY3Vyc29yT2Zmc2V0OiBudW1iZXJbXSB9IHtcbiAgICAgICAgY29uc3Qgc3BsaXQgPSBzb3VyY2Uuc3BsaXQoXCJcXG5cIik7XG4gICAgICAgIGNvbnN0IGN1cnNvck9mZnNldDogbnVtYmVyW10gPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIGxpbmVzKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLm1hcmtUYXNrTGluZUN5Y2xlTGlzdDEoc3BsaXRbbl0sIG1hcmspO1xuICAgICAgICAgICAgc3BsaXRbbl0gPSByZXN1bHQudXBkYXRlZExpbmVUZXh0O1xuICAgICAgICAgICAgY3Vyc29yT2Zmc2V0LnB1c2gocmVzdWx0LmN1cnNvck9mZnNldCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdXBkYXRlZExpbmVUZXh0OiBzcGxpdC5qb2luKFwiXFxuXCIpLCBjdXJzb3JPZmZzZXQ6IGN1cnNvck9mZnNldCB9O1xuICAgIH1cbiAgICBtYXJrVGFza0luU291cmNlQ3ljbGVMaXN0MihcbiAgICAgICAgc291cmNlOiBzdHJpbmcsXG4gICAgICAgIG1hcms6IHN0cmluZyxcbiAgICAgICAgbGluZXM6IG51bWJlcltdID0gW11cbiAgICApOiB7IHVwZGF0ZWRMaW5lVGV4dDogc3RyaW5nLCBjdXJzb3JPZmZzZXQ6IG51bWJlcltdIH0ge1xuICAgICAgICBjb25zdCBzcGxpdCA9IHNvdXJjZS5zcGxpdChcIlxcblwiKTtcbiAgICAgICAgY29uc3QgY3Vyc29yT2Zmc2V0OiBudW1iZXJbXSA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgbGluZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMubWFya1Rhc2tMaW5lQ3ljbGVMaXN0MihzcGxpdFtuXSwgbWFyayk7XG4gICAgICAgICAgICBzcGxpdFtuXSA9IHJlc3VsdC51cGRhdGVkTGluZVRleHQ7XG4gICAgICAgICAgICBjdXJzb3JPZmZzZXQucHVzaChyZXN1bHQuY3Vyc29yT2Zmc2V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB1cGRhdGVkTGluZVRleHQ6IHNwbGl0LmpvaW4oXCJcXG5cIiksIGN1cnNvck9mZnNldDogY3Vyc29yT2Zmc2V0IH07XG4gICAgfVxuICAgIG1hcmtUYXNrSW5Tb3VyY2VDeWNsZUxpc3QzKFxuICAgICAgICBzb3VyY2U6IHN0cmluZyxcbiAgICAgICAgbWFyazogc3RyaW5nLFxuICAgICAgICBsaW5lczogbnVtYmVyW10gPSBbXVxuICAgICk6IHsgdXBkYXRlZExpbmVUZXh0OiBzdHJpbmcsIGN1cnNvck9mZnNldDogbnVtYmVyW10gfSB7XG4gICAgICAgIGNvbnN0IHNwbGl0ID0gc291cmNlLnNwbGl0KFwiXFxuXCIpO1xuICAgICAgICBjb25zdCBjdXJzb3JPZmZzZXQ6IG51bWJlcltdID0gW107XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiBsaW5lcykge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5tYXJrVGFza0xpbmVDeWNsZUxpc3QzKHNwbGl0W25dLCBtYXJrKTtcbiAgICAgICAgICAgIHNwbGl0W25dID0gcmVzdWx0LnVwZGF0ZWRMaW5lVGV4dDtcbiAgICAgICAgICAgIGN1cnNvck9mZnNldC5wdXNoKHJlc3VsdC5jdXJzb3JPZmZzZXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHVwZGF0ZWRMaW5lVGV4dDogc3BsaXQuam9pbihcIlxcblwiKSwgY3Vyc29yT2Zmc2V0OiBjdXJzb3JPZmZzZXQgfTtcbiAgICB9XG5cbiAgICBtYXJrVGFza0luU291cmNlQ3ljbGVSZXZlcnNlbHkoXG4gICAgICAgIHNvdXJjZTogc3RyaW5nLFxuICAgICAgICBtYXJrOiBzdHJpbmcsXG4gICAgICAgIGxpbmVzOiBudW1iZXJbXSA9IFtdXG4gICAgKTogeyB1cGRhdGVkTGluZVRleHQ6IHN0cmluZywgY3Vyc29yT2Zmc2V0OiBudW1iZXJbXSB9IHtcbiAgICAgICAgY29uc3Qgc3BsaXQgPSBzb3VyY2Uuc3BsaXQoXCJcXG5cIik7XG4gICAgICAgIGNvbnN0IGN1cnNvck9mZnNldDogbnVtYmVyW10gPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIGxpbmVzKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLm1hcmtUYXNrTGluZUN5Y2xlUmV2ZXJzZWx5KHNwbGl0W25dLCBtYXJrKTtcbiAgICAgICAgICAgIHNwbGl0W25dID0gcmVzdWx0LnVwZGF0ZWRMaW5lVGV4dDtcbiAgICAgICAgICAgIGN1cnNvck9mZnNldC5wdXNoKHJlc3VsdC5jdXJzb3JPZmZzZXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHVwZGF0ZWRMaW5lVGV4dDogc3BsaXQuam9pbihcIlxcblwiKSwgY3Vyc29yT2Zmc2V0OiBjdXJzb3JPZmZzZXQgfTtcbiAgICB9XG5cbiAgICBtYXJrVGFza0luU291cmNlQ3JlYXRlKFxuICAgICAgICBzb3VyY2U6IHN0cmluZyxcbiAgICAgICAgbWFyazogc3RyaW5nLFxuICAgICAgICBsaW5lczogbnVtYmVyW10gPSBbXVxuICAgICk6IHsgdXBkYXRlZExpbmVUZXh0OiBzdHJpbmcsIGN1cnNvck9mZnNldDogbnVtYmVyW10gfSB7XG4gICAgICAgIGNvbnN0IHNwbGl0ID0gc291cmNlLnNwbGl0KFwiXFxuXCIpO1xuICAgICAgICBjb25zdCBjdXJzb3JPZmZzZXQ6IG51bWJlcltdID0gW107XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiBsaW5lcykge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5tYXJrVGFza0xpbmVDcmVhdGUoc3BsaXRbbl0sIG1hcmspO1xuICAgICAgICAgICAgc3BsaXRbbl0gPSByZXN1bHQudXBkYXRlZExpbmVUZXh0O1xuICAgICAgICAgICAgY3Vyc29yT2Zmc2V0LnB1c2gocmVzdWx0LmN1cnNvck9mZnNldCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdXBkYXRlZExpbmVUZXh0OiBzcGxpdC5qb2luKFwiXFxuXCIpLCBjdXJzb3JPZmZzZXQ6IGN1cnNvck9mZnNldCB9O1xuICAgIH1cblxuICAgIGFwcGVuZFRleHRJblNvdXJjZShcbiAgICAgICAgc291cmNlOiBzdHJpbmcsXG4gICAgICAgIG1hcms6IHN0cmluZyxcbiAgICAgICAgbGluZXM6IG51bWJlcltdID0gW11cbiAgICApOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBzcGxpdCA9IHNvdXJjZS5zcGxpdChcIlxcblwiKTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIGxpbmVzKSB7XG4gICAgICAgICAgICBzcGxpdFtuXSA9IHRoaXMuYXBwZW5kVGV4dExpbmUoc3BsaXRbbl0sIG1hcmspO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzcGxpdC5qb2luKFwiXFxuXCIpO1xuICAgIH1cblxuICAgIGFwcGVuZFRleHRJblNvdXJjZVRleHQyKFxuICAgICAgICBzb3VyY2U6IHN0cmluZyxcbiAgICAgICAgbWFyazogc3RyaW5nLFxuICAgICAgICBsaW5lczogbnVtYmVyW10gPSBbXVxuICAgICk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHNwbGl0ID0gc291cmNlLnNwbGl0KFwiXFxuXCIpO1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgbGluZXMpIHtcbiAgICAgICAgICAgIHNwbGl0W25dID0gdGhpcy5hcHBlbmRUZXh0TGluZVRleHQyKHNwbGl0W25dLCBtYXJrKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3BsaXQuam9pbihcIlxcblwiKTtcbiAgICB9XG5cbiAgICBhcHBlbmRUZXh0SW5Tb3VyY2VUZXh0MyhcbiAgICAgICAgc291cmNlOiBzdHJpbmcsXG4gICAgICAgIG1hcms6IHN0cmluZyxcbiAgICAgICAgbGluZXM6IG51bWJlcltdID0gW11cbiAgICApOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBzcGxpdCA9IHNvdXJjZS5zcGxpdChcIlxcblwiKTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIGxpbmVzKSB7XG4gICAgICAgICAgICBzcGxpdFtuXSA9IHRoaXMuYXBwZW5kVGV4dExpbmVUZXh0MyhzcGxpdFtuXSwgbWFyayk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNwbGl0LmpvaW4oXCJcXG5cIik7XG4gICAgfVxuXG4gICAgYXBwZW5kVGV4dEluU291cmNlQXV0byhcbiAgICAgICAgc291cmNlOiBzdHJpbmcsXG4gICAgICAgIG1hcms6IHN0cmluZyxcbiAgICAgICAgbGluZXM6IG51bWJlcltdID0gW11cbiAgICApOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBzcGxpdCA9IHNvdXJjZS5zcGxpdChcIlxcblwiKTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIGxpbmVzKSB7XG4gICAgICAgICAgICBzcGxpdFtuXSA9IHRoaXMuYXBwZW5kVGV4dExpbmVBdXRvKHNwbGl0W25dLCBtYXJrKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3BsaXQuam9pbihcIlxcblwiKTtcbiAgICB9XG5cbiAgICBtYXJrVGFza0xpbmUobGluZVRleHQ6IHN0cmluZywgbWFyazogc3RyaW5nKToge3VwZGF0ZWRMaW5lVGV4dDogc3RyaW5nLCBjdXJzb3JPZmZzZXQ6IG51bWJlcn0ge1xuICAgICAgICBjb25zdCB0YXNrTWF0Y2ggPSB0aGlzLmFueVRhc2tNYXJrLmV4ZWMobGluZVRleHQpO1xuICAgICAgICBjb25zdCB0YXNrUHJlZml4ID0gYCR7bGluZVRleHQudHJpbSgpLmNoYXJBdCgwKX0gW2A7XG5cbiAgICAgICAgY29uc3QgbWFya1N0cmluZyA9IHRhc2tQcmVmaXggKyBtYXJrICsgXCJdIFwiO1xuXG4gICAgICAgIGxldCBjdXJzb3JPZmZzZXQgPSAwO1xuXG4gICAgICAgIGlmIChtYXJrID09PSBcIkJhY2tzcGFjZVwiKSB7XG4gICAgICAgICAgICBsaW5lVGV4dCA9IHRoaXMucmVtb3ZlQ2hlY2tib3hGcm9tTGluZShsaW5lVGV4dCk7XG4gICAgICAgIH0gZWxzZSBpZiAodGFza01hdGNoKSB7XG4gICAgICAgICAgICBjb25zdCBjb21wbGV0ZU1hcmsgPVxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdFNldHRpbmdzLmNvbXBsZXRlZFRhc2tzLmluZGV4T2YobWFyaykgPj0gMDtcblxuICAgICAgICAgICAgaWYgKG1hcmsgIT09IFwiIFwiKSB7IC8vIE1hcmsgdGFza3NcbiAgICAgICAgICAgICAgICBpZiAobGluZVRleHQudHJpbSgpLnN0YXJ0c1dpdGgobWFya1N0cmluZykpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgVGFzayBNYXJrZXI6IHRhc2sgYWxyZWFkeSBtYXJrZWQgd2l0aCB0aGUgc2FtZSBzdGF0dXMgXCIke21hcmt9XCIhYCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gTWFyayB0YXNrc1xuICAgICAgICAgICAgICAgICAgICBsZXQgbWFya2VkID0gbGluZVRleHQucmVwbGFjZSh0aGlzLmFueVRhc2tNYXJrLCBgJDEke21hcmt9JDNgKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5pdFNldHRpbmdzLnJlbW92ZVJlZ0V4cCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VkID0gbWFya2VkLnJlcGxhY2UodGhpcy5pbml0U2V0dGluZ3MucmVtb3ZlUmVnRXhwLCBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5hcHBlbmREYXRlRm9ybWF0ICYmIGNvbXBsZXRlTWFyaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyaWN0TGluZUVuZGluZyA9IGxpbmVUZXh0LmVuZHNXaXRoKFwiICBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgYmxvY2tpZCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaCA9IHRoaXMuYmxvY2tSZWYuZXhlYyhtYXJrZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoWzJdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VkID0gbWF0Y2hbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tpZCA9IG1hdGNoWzJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXJrZWQuZW5kc1dpdGgoXCIgXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VkICs9IFwiIFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VkICs9IG1vbWVudCgpLmZvcm1hdCh0aGlzLnNldHRpbmdzLmFwcGVuZERhdGVGb3JtYXQpICsgYmxvY2tpZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHJpY3RMaW5lRW5kaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VkICs9IFwiICBcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNldHRpbmdzLmFwcGVuZFRleHRGb3JtYXRNYXJrICYmIHRoaXMuc2V0dGluZ3MuaW5jb21wbGV0ZVRhc2tWYWx1ZXMuaW5kZXhPZihtYXJrKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJpY3RMaW5lRW5kaW5nID0gbGluZVRleHQuZW5kc1dpdGgoXCIgIFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBibG9ja2lkID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gdGhpcy5ibG9ja1JlZi5leGVjKG1hcmtlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMl0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZWQgPSBtYXRjaFsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja2lkID0gbWF0Y2hbMl07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1hcmtlZC5lbmRzV2l0aChcIiBcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZWQgKz0gXCIgXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZWQgKz0gbW9tZW50KCkuZm9ybWF0KHRoaXMuc2V0dGluZ3MuYXBwZW5kVGV4dEZvcm1hdE1hcmspICsgYmxvY2tpZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHJpY3RMaW5lRW5kaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VkICs9IFwiICBcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNldHRpbmdzLmFwcGVuZFRleHRGb3JtYXRNYXJrUm93MiAmJiB0aGlzLnNldHRpbmdzLmluY29tcGxldGVUYXNrVmFsdWVzUm93Mi5pbmRleE9mKG1hcmspID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cmljdExpbmVFbmRpbmcgPSBsaW5lVGV4dC5lbmRzV2l0aChcIiAgXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGJsb2NraWQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSB0aGlzLmJsb2NrUmVmLmV4ZWMobWFya2VkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCAmJiBtYXRjaFsyXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlZCA9IG1hdGNoWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NraWQgPSBtYXRjaFsyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWFya2VkLmVuZHNXaXRoKFwiIFwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlZCArPSBcIiBcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlZCArPSBtb21lbnQoKS5mb3JtYXQodGhpcy5zZXR0aW5ncy5hcHBlbmRUZXh0Rm9ybWF0TWFya1JvdzIpICsgYmxvY2tpZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHJpY3RMaW5lRW5kaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VkICs9IFwiICBcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsaW5lVGV4dCA9IG1hcmtlZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1hcmsgPT09IFwiIFwiKSB7IC8vIFJlc2V0IHRhc2tzXG4gICAgICAgICAgICAgICAgbGluZVRleHQgPSB0aGlzLnJlc2V0VGFza0xpbmUobGluZVRleHQsIG1hcmspOyAvLyBPcmlnaW5hbCBjb2RlXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFRhc2sgTWFya2VyOiB1bmtub3duIG1hcmsgJHttYXJrfSFgKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgXCJUYXNrIE1hcmtlcjogdW5rbm93biBtYXJrICglcyksIGxlYXZpbmcgdW5jaGFuZ2VkOiAlc1wiLFxuICAgICAgICAgICAgICAgICAgICBtYXJrLFxuICAgICAgICAgICAgICAgICAgICBsaW5lVGV4dFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAobWFyayAhPT0gXCJCYWNrc3BhY2VcIikge1xuICAgICAgICAgICAgY29uc3QgbGlzdE1hdGNoID0gdGhpcy5hbnlMaXN0SXRlbS5leGVjKGxpbmVUZXh0KTtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tQcmVmaXggPSBgJHtsaW5lVGV4dC50cmltKCkuY2hhckF0KDApfSBbYDtcblxuICAgICAgICAgICAgaWYgKChsaXN0TWF0Y2ggJiYgbGlzdE1hdGNoWzJdKSB8fCBsaW5lVGV4dC50cmltKCkuc3RhcnRzV2l0aCh0YXNrUHJlZml4KSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoXCJUYXNrIE1hcmtlcjogbGlzdCBpdGVtLCBjb252ZXJ0IHRvIGEgdGFzayAlc1wiLCBsaW5lVGV4dCk7XG5cbiAgICAgICAgICAgICAgICBjdXJzb3JPZmZzZXQgPSA0OyAvLyBGb3IgcmV0YWluaW5nIGN1cnNvciBwb3NpdGlvblxuXG4gICAgICAgICAgICAgICAgLy8gY29udmVydCB0byBhIHRhc2ssIGFuZCB0aGVuIG1hcmtcbiAgICAgICAgICAgICAgICBpZiAoKGxpc3RNYXRjaCAmJiBsaXN0TWF0Y2hbMl0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXJrZWQgPSBgJHtsaXN0TWF0Y2hbMV19WyBdICR7bGlzdE1hdGNoWzJdfWA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsaW5lVGV4dC50cmltKCkuc3RhcnRzV2l0aCh0YXNrUHJlZml4KSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbGlzdEluZGV4ID0gbGluZVRleHQuaW5kZXhPZih0YXNrUHJlZml4KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlZCA9IGxpbmVUZXh0LnNsaWNlKDAsIGxpc3RJbmRleCsxKSArICcgWyBdICcgKyBsaW5lVGV4dC5zbGljZShsaXN0SW5kZXgrMik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IHRoaXMubWFya1Rhc2tMaW5lKG1hcmtlZCwgbWFyayk7XG4gICAgICAgICAgICAgICAgbGluZVRleHQgPSByZXN1bHQudXBkYXRlZExpbmVUZXh0O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBUYXNrIE1hcmtlcjogbm90IGEgdGFzayBvciBsaXN0IGl0ZW0hYCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyhcIlRhc2sgTWFya2VyOiBub3QgYSB0YXNrIG9yIGxpc3QgaXRlbSAlc1wiLCBsaW5lVGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdXBkYXRlZExpbmVUZXh0OiBsaW5lVGV4dCwgY3Vyc29yT2Zmc2V0OiBjdXJzb3JPZmZzZXQgfTtcbiAgICB9XG5cbiAgICBtYXJrVGFza0xpbmVDeWNsZShsaW5lVGV4dDogc3RyaW5nLCBtYXJrOiBzdHJpbmcpOiB7IHVwZGF0ZWRMaW5lVGV4dDogc3RyaW5nOyBjdXJzb3JPZmZzZXQ6IG51bWJlcjsgfSB7XG5cbiAgICAgICAgY29uc3QgdGFza01hdGNoID0gdGhpcy5hbnlUYXNrTWFyay5leGVjKGxpbmVUZXh0KTtcbiAgICAgICAgY29uc3QgdGFza1ByZWZpeCA9IGAke2xpbmVUZXh0LnRyaW0oKS5jaGFyQXQoMCl9IFtgO1xuICAgICAgICBjb25zdCBsaXN0TWF0Y2ggPSB0aGlzLmFueUxpc3RJdGVtLmV4ZWMobGluZVRleHQpO1xuICAgICAgICBjb25zdCBtYXJrVmFsdWUgPSB0aGlzLnNldHRpbmdzLmN5Y2xlVGFza1ZhbHVlcztcbiAgICAgICAgY29uc3QgbWFya1ZhbHVlTGVuZ3RoID0gbWFya1ZhbHVlLmxlbmd0aDtcbiAgICAgICAgY29uc3QgY3ljbGVXaXRoTGlzdCA9IHRoaXMuc2V0dGluZ3Muc3VwcG9ydEN5Y2xpbmdXaXRoTGlzdEl0ZW1cblxuICAgICAgICBsZXQgY3Vyc29yT2Zmc2V0ID0gMDtcblxuICAgICAgICAvLyBSZWdyb3VwIG1hcmsgYXMgc3RyaW5nIGFycmF5XG4gICAgICAgIGxldCBtYXJrU3RyaW5nQXJyYXkgPSBuZXcgQXJyYXk8c3RyaW5nPihtYXJrVmFsdWVMZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hcmtWYWx1ZUxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBtYXJrU3RyaW5nQXJyYXlbaV0gPSBgJHtsaW5lVGV4dC50cmltKCkuY2hhckF0KDApfSBbJHttYXJrVmFsdWVbaV19XSBgO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRmluZCB0aGUgbmV4dCBpbmRleFxuICAgICAgICBsZXQgbWFya0luZGV4ID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXJrVmFsdWVMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGxpbmVUZXh0LnRyaW0oKS5zdGFydHNXaXRoKG1hcmtTdHJpbmdBcnJheVtpXSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoaSArIDIgPD0gbWFya1ZhbHVlTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtJbmRleCA9IGkgKyAxO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjeWNsZVdpdGhMaXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrSW5kZXggPSAtMTsgIC8vIGN5Y2xlIHdpdGggbGlzdFxuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yT2Zmc2V0ID0gLTQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrSW5kZXggPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFVwZGF0ZSBuZXh0IGluZGV4IGJhc2VkIG9uIGl0ZW0gdHlwZVxuICAgICAgICBpZiAobWFya0luZGV4ID09PSAwKSB7XG4gICAgICAgICAgICBpZiAodGFza01hdGNoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGN5Y2xlV2l0aExpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgbWFya0luZGV4ID0gLTE7ICAvLyBjeWNsZSB3aXRoIGxpc3RcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yT2Zmc2V0ID0gLTQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBDeWNsZSB0YXNrIHN0YXR1c2VzXG4gICAgICAgIGlmICh0YXNrTWF0Y2gpIHtcbiAgICAgICAgICAgIGlmIChtYXJrSW5kZXggPT09IC0xKSB7ICAvLyBjb252ZXJ0IHRhc2sgdG8gbGlzdFxuICAgICAgICAgICAgICAgIGxldCBsaXN0SW5kZXggPSBsaW5lVGV4dC5pbmRleE9mKHRhc2tQcmVmaXgpO1xuICAgICAgICAgICAgICAgIHZhciBtYXJrZWQgPSBsaW5lVGV4dC5zbGljZSgwLCBsaXN0SW5kZXgrMSkgKyAnICcgKyBsaW5lVGV4dC5zbGljZShsaXN0SW5kZXgrNik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBtYXJrZWQgPSBsaW5lVGV4dC5yZXBsYWNlKHRoaXMuYW55VGFza01hcmssIGAkMSR7bWFya1ZhbHVlW21hcmtJbmRleF19JDNgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgc3RyaWN0TGluZUVuZGluZyA9IGxpbmVUZXh0LmVuZHNXaXRoKFwiICBcIik7XG4gICAgICAgICAgICBsZXQgYmxvY2tpZCA9IFwiXCI7XG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IHRoaXMuYmxvY2tSZWYuZXhlYyhtYXJrZWQpO1xuICAgICAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoWzJdKSB7XG4gICAgICAgICAgICAgICAgbWFya2VkID0gbWF0Y2hbMV07XG4gICAgICAgICAgICAgICAgYmxvY2tpZCA9IG1hdGNoWzJdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWFya2VkICs9IGJsb2NraWQ7XG4gICAgICAgICAgICBpZiAoc3RyaWN0TGluZUVuZGluZykge1xuICAgICAgICAgICAgICAgIG1hcmtlZCArPSBcIiAgXCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxpbmVUZXh0ID0gbWFya2VkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKChsaXN0TWF0Y2ggJiYgbGlzdE1hdGNoWzJdKSB8fCBsaW5lVGV4dC50cmltKCkuc3RhcnRzV2l0aCh0YXNrUHJlZml4KSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoXCJUYXNrIE1hcmtlcjogbGlzdCBpdGVtLCBjb252ZXJ0IHRvIGEgdGFzayAlc1wiLCBsaW5lVGV4dCk7XG5cbiAgICAgICAgICAgICAgICBjdXJzb3JPZmZzZXQgPSA0OyAvLyBGb3IgcmV0YWluaW5nIGN1cnNvciBwb3NpdGlvblxuXG4gICAgICAgICAgICAgICAgLy8gY29udmVydCB0byBhIHRhc2ssIGFuZCB0aGVuIG1hcmtcbiAgICAgICAgICAgICAgICBpZiAoKGxpc3RNYXRjaCAmJiBsaXN0TWF0Y2hbMl0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXJrZWQgPSBgJHtsaXN0TWF0Y2hbMV19WyR7bWFya1ZhbHVlWzBdfV0gJHtsaXN0TWF0Y2hbMl19YDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpbmVUZXh0LnRyaW0oKS5zdGFydHNXaXRoKHRhc2tQcmVmaXgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBsaXN0SW5kZXggPSBsaW5lVGV4dC5pbmRleE9mKHRhc2tQcmVmaXgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWFya2VkID0gbGluZVRleHQuc2xpY2UoMCwgbGlzdEluZGV4KzEpICsgJyBbJyArIGAke21hcmtWYWx1ZVswXX1gICsgJ10gJyArIGxpbmVUZXh0LnNsaWNlKGxpc3RJbmRleCsyKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBzdHJpY3RMaW5lRW5kaW5nID0gbGluZVRleHQuZW5kc1dpdGgoXCIgIFwiKTtcbiAgICAgICAgICAgICAgICBsZXQgYmxvY2tpZCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSB0aGlzLmJsb2NrUmVmLmV4ZWMobWFya2VkKTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMl0pIHtcbiAgICAgICAgICAgICAgICAgICAgbWFya2VkID0gbWF0Y2hbMV07XG4gICAgICAgICAgICAgICAgICAgIGJsb2NraWQgPSBtYXRjaFsyXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbWFya2VkICs9IGJsb2NraWQ7XG4gICAgICAgICAgICAgICAgaWYgKHN0cmljdExpbmVFbmRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgbWFya2VkICs9IFwiICBcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbGluZVRleHQgPSBtYXJrZWQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFRhc2sgTWFya2VyOiBub3QgYSB0YXNrIG9yIGxpc3QgaXRlbSFgKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKFwiVGFzayBNYXJrZXI6IG5vdCBhIHRhc2sgb3IgbGlzdCBpdGVtICVzXCIsIGxpbmVUZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7IHVwZGF0ZWRMaW5lVGV4dDogbGluZVRleHQsIGN1cnNvck9mZnNldDogY3Vyc29yT2Zmc2V0IH07XG4gICAgfVxuXG4gICAgbWFya1Rhc2tMaW5lQ3ljbGVMaXN0MShsaW5lVGV4dDogc3RyaW5nLCBtYXJrOiBzdHJpbmcpOiB7IHVwZGF0ZWRMaW5lVGV4dDogc3RyaW5nLCBjdXJzb3JPZmZzZXQ6IG51bWJlciB9IHtcblxuICAgICAgICBjb25zdCB0YXNrTWF0Y2ggPSB0aGlzLmFueVRhc2tNYXJrLmV4ZWMobGluZVRleHQpO1xuICAgICAgICBjb25zdCB0YXNrUHJlZml4ID0gYCR7bGluZVRleHQudHJpbSgpLmNoYXJBdCgwKX0gW2A7XG4gICAgICAgIGNvbnN0IGxpc3RNYXRjaCA9IHRoaXMuYW55TGlzdEl0ZW0uZXhlYyhsaW5lVGV4dCk7XG4gICAgICAgIGNvbnN0IG1hcmtWYWx1ZSA9IHRoaXMuc2V0dGluZ3MuY3ljbGVUYXNrVmFsdWVzTGlzdDE7XG4gICAgICAgIGNvbnN0IG1hcmtWYWx1ZUxlbmd0aCA9IG1hcmtWYWx1ZS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGN5Y2xlV2l0aExpc3QgPSB0aGlzLnNldHRpbmdzLnN1cHBvcnRDeWNsaW5nV2l0aExpc3RJdGVtXG5cbiAgICAgICAgbGV0IGN1cnNvck9mZnNldCA9IDA7XG5cbiAgICAgICAgLy8gUmVncm91cCBtYXJrIGFzIHN0cmluZyBhcnJheVxuICAgICAgICBsZXQgbWFya1N0cmluZ0FycmF5ID0gbmV3IEFycmF5PHN0cmluZz4obWFya1ZhbHVlTGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXJrVmFsdWVMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbWFya1N0cmluZ0FycmF5W2ldID0gYCR7bGluZVRleHQudHJpbSgpLmNoYXJBdCgwKX0gWyR7bWFya1ZhbHVlW2ldfV0gYDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpbmQgdGhlIG5leHQgaW5kZXhcbiAgICAgICAgbGV0IG1hcmtJbmRleCA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWFya1ZhbHVlTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChsaW5lVGV4dC50cmltKCkuc3RhcnRzV2l0aChtYXJrU3RyaW5nQXJyYXlbaV0pKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgKyAyIDw9IG1hcmtWYWx1ZUxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBtYXJrSW5kZXggPSBpICsgMTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3ljbGVXaXRoTGlzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFya0luZGV4ID0gLTE7ICAvLyBjeWNsZSB3aXRoIGxpc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvck9mZnNldCA9IC00O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFya0luZGV4ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBVcGRhdGUgbmV4dCBpbmRleCBiYXNlZCBvbiBpdGVtIHR5cGVcbiAgICAgICAgaWYgKG1hcmtJbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgaWYgKHRhc2tNYXRjaCkge1xuICAgICAgICAgICAgICAgIGlmIChjeWNsZVdpdGhMaXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtJbmRleCA9IC0xOyAgLy8gY3ljbGUgd2l0aCBsaXN0XG4gICAgICAgICAgICAgICAgICAgIGN1cnNvck9mZnNldCA9IC00O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQ3ljbGUgdGFzayBzdGF0dXNlc1xuICAgICAgICBpZiAodGFza01hdGNoKSB7XG4gICAgICAgICAgICBpZiAobWFya0luZGV4ID09PSAtMSkgeyAgLy8gY29udmVydCB0YXNrIHRvIGxpc3RcbiAgICAgICAgICAgICAgICBsZXQgbGlzdEluZGV4ID0gbGluZVRleHQuaW5kZXhPZih0YXNrUHJlZml4KTtcbiAgICAgICAgICAgICAgICB2YXIgbWFya2VkID0gbGluZVRleHQuc2xpY2UoMCwgbGlzdEluZGV4KzEpICsgJyAnICsgbGluZVRleHQuc2xpY2UobGlzdEluZGV4KzYpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgbWFya2VkID0gbGluZVRleHQucmVwbGFjZSh0aGlzLmFueVRhc2tNYXJrLCBgJDEke21hcmtWYWx1ZVttYXJrSW5kZXhdfSQzYCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHN0cmljdExpbmVFbmRpbmcgPSBsaW5lVGV4dC5lbmRzV2l0aChcIiAgXCIpO1xuICAgICAgICAgICAgbGV0IGJsb2NraWQgPSBcIlwiO1xuICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSB0aGlzLmJsb2NrUmVmLmV4ZWMobWFya2VkKTtcbiAgICAgICAgICAgIGlmIChtYXRjaCAmJiBtYXRjaFsyXSkge1xuICAgICAgICAgICAgICAgIG1hcmtlZCA9IG1hdGNoWzFdO1xuICAgICAgICAgICAgICAgIGJsb2NraWQgPSBtYXRjaFsyXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1hcmtlZCArPSBibG9ja2lkO1xuICAgICAgICAgICAgaWYgKHN0cmljdExpbmVFbmRpbmcpIHtcbiAgICAgICAgICAgICAgICBtYXJrZWQgKz0gXCIgIFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBsaW5lVGV4dCA9IG1hcmtlZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICgobGlzdE1hdGNoICYmIGxpc3RNYXRjaFsyXSkgfHwgbGluZVRleHQudHJpbSgpLnN0YXJ0c1dpdGgodGFza1ByZWZpeCkpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKFwiVGFzayBNYXJrZXI6IGxpc3QgaXRlbSwgY29udmVydCB0byBhIHRhc2sgJXNcIiwgbGluZVRleHQpO1xuXG4gICAgICAgICAgICAgICAgY3Vyc29yT2Zmc2V0ID0gNDsgLy8gRm9yIHJldGFpbmluZyBjdXJzb3IgcG9zaXRpb25cblxuICAgICAgICAgICAgICAgIC8vIGNvbnZlcnQgdG8gYSB0YXNrLCBhbmQgdGhlbiBtYXJrXG4gICAgICAgICAgICAgICAgaWYgKChsaXN0TWF0Y2ggJiYgbGlzdE1hdGNoWzJdKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWFya2VkID0gYCR7bGlzdE1hdGNoWzFdfVske21hcmtWYWx1ZVswXX1dICR7bGlzdE1hdGNoWzJdfWA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsaW5lVGV4dC50cmltKCkuc3RhcnRzV2l0aCh0YXNrUHJlZml4KSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbGlzdEluZGV4ID0gbGluZVRleHQuaW5kZXhPZih0YXNrUHJlZml4KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlZCA9IGxpbmVUZXh0LnNsaWNlKDAsIGxpc3RJbmRleCsxKSArICcgWycgKyBgJHttYXJrVmFsdWVbMF19YCArICddICcgKyBsaW5lVGV4dC5zbGljZShsaXN0SW5kZXgrMik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyaWN0TGluZUVuZGluZyA9IGxpbmVUZXh0LmVuZHNXaXRoKFwiICBcIik7XG4gICAgICAgICAgICAgICAgbGV0IGJsb2NraWQgPSBcIlwiO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gdGhpcy5ibG9ja1JlZi5leGVjKG1hcmtlZCk7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoWzJdKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtlZCA9IG1hdGNoWzFdO1xuICAgICAgICAgICAgICAgICAgICBibG9ja2lkID0gbWF0Y2hbMl07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG1hcmtlZCArPSBibG9ja2lkO1xuICAgICAgICAgICAgICAgIGlmIChzdHJpY3RMaW5lRW5kaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtlZCArPSBcIiAgXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxpbmVUZXh0ID0gbWFya2VkO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBUYXNrIE1hcmtlcjogbm90IGEgdGFzayBvciBsaXN0IGl0ZW0hYCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyhcIlRhc2sgTWFya2VyOiBub3QgYSB0YXNrIG9yIGxpc3QgaXRlbSAlc1wiLCBsaW5lVGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4geyB1cGRhdGVkTGluZVRleHQ6IGxpbmVUZXh0LCBjdXJzb3JPZmZzZXQ6IGN1cnNvck9mZnNldCB9O1xuICAgIH1cbiAgICBtYXJrVGFza0xpbmVDeWNsZUxpc3QyKGxpbmVUZXh0OiBzdHJpbmcsIG1hcms6IHN0cmluZyk6IHsgdXBkYXRlZExpbmVUZXh0OiBzdHJpbmcsIGN1cnNvck9mZnNldDogbnVtYmVyIH0ge1xuXG4gICAgICAgIGNvbnN0IHRhc2tNYXRjaCA9IHRoaXMuYW55VGFza01hcmsuZXhlYyhsaW5lVGV4dCk7XG4gICAgICAgIGNvbnN0IHRhc2tQcmVmaXggPSBgJHtsaW5lVGV4dC50cmltKCkuY2hhckF0KDApfSBbYDtcbiAgICAgICAgY29uc3QgbGlzdE1hdGNoID0gdGhpcy5hbnlMaXN0SXRlbS5leGVjKGxpbmVUZXh0KTtcbiAgICAgICAgY29uc3QgbWFya1ZhbHVlID0gdGhpcy5zZXR0aW5ncy5jeWNsZVRhc2tWYWx1ZXNMaXN0MjtcbiAgICAgICAgY29uc3QgbWFya1ZhbHVlTGVuZ3RoID0gbWFya1ZhbHVlLmxlbmd0aDtcbiAgICAgICAgY29uc3QgY3ljbGVXaXRoTGlzdCA9IHRoaXMuc2V0dGluZ3Muc3VwcG9ydEN5Y2xpbmdXaXRoTGlzdEl0ZW1cblxuICAgICAgICBsZXQgY3Vyc29yT2Zmc2V0ID0gMDtcblxuICAgICAgICAvLyBSZWdyb3VwIG1hcmsgYXMgc3RyaW5nIGFycmF5XG4gICAgICAgIGxldCBtYXJrU3RyaW5nQXJyYXkgPSBuZXcgQXJyYXk8c3RyaW5nPihtYXJrVmFsdWVMZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hcmtWYWx1ZUxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBtYXJrU3RyaW5nQXJyYXlbaV0gPSBgJHtsaW5lVGV4dC50cmltKCkuY2hhckF0KDApfSBbJHttYXJrVmFsdWVbaV19XSBgO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRmluZCB0aGUgbmV4dCBpbmRleFxuICAgICAgICBsZXQgbWFya0luZGV4ID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXJrVmFsdWVMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGxpbmVUZXh0LnRyaW0oKS5zdGFydHNXaXRoKG1hcmtTdHJpbmdBcnJheVtpXSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoaSArIDIgPD0gbWFya1ZhbHVlTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtJbmRleCA9IGkgKyAxO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjeWNsZVdpdGhMaXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrSW5kZXggPSAtMTsgIC8vIGN5Y2xlIHdpdGggbGlzdFxuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yT2Zmc2V0ID0gLTQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrSW5kZXggPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFVwZGF0ZSBuZXh0IGluZGV4IGJhc2VkIG9uIGl0ZW0gdHlwZVxuICAgICAgICBpZiAobWFya0luZGV4ID09PSAwKSB7XG4gICAgICAgICAgICBpZiAodGFza01hdGNoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGN5Y2xlV2l0aExpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgbWFya0luZGV4ID0gLTE7ICAvLyBjeWNsZSB3aXRoIGxpc3RcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yT2Zmc2V0ID0gLTQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBDeWNsZSB0YXNrIHN0YXR1c2VzXG4gICAgICAgIGlmICh0YXNrTWF0Y2gpIHtcbiAgICAgICAgICAgIGlmIChtYXJrSW5kZXggPT09IC0xKSB7ICAvLyBjb252ZXJ0IHRhc2sgdG8gbGlzdFxuICAgICAgICAgICAgICAgIGxldCBsaXN0SW5kZXggPSBsaW5lVGV4dC5pbmRleE9mKHRhc2tQcmVmaXgpO1xuICAgICAgICAgICAgICAgIHZhciBtYXJrZWQgPSBsaW5lVGV4dC5zbGljZSgwLCBsaXN0SW5kZXgrMSkgKyAnICcgKyBsaW5lVGV4dC5zbGljZShsaXN0SW5kZXgrNik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBtYXJrZWQgPSBsaW5lVGV4dC5yZXBsYWNlKHRoaXMuYW55VGFza01hcmssIGAkMSR7bWFya1ZhbHVlW21hcmtJbmRleF19JDNgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgc3RyaWN0TGluZUVuZGluZyA9IGxpbmVUZXh0LmVuZHNXaXRoKFwiICBcIik7XG4gICAgICAgICAgICBsZXQgYmxvY2tpZCA9IFwiXCI7XG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IHRoaXMuYmxvY2tSZWYuZXhlYyhtYXJrZWQpO1xuICAgICAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoWzJdKSB7XG4gICAgICAgICAgICAgICAgbWFya2VkID0gbWF0Y2hbMV07XG4gICAgICAgICAgICAgICAgYmxvY2tpZCA9IG1hdGNoWzJdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWFya2VkICs9IGJsb2NraWQ7XG4gICAgICAgICAgICBpZiAoc3RyaWN0TGluZUVuZGluZykge1xuICAgICAgICAgICAgICAgIG1hcmtlZCArPSBcIiAgXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxpbmVUZXh0ID0gbWFya2VkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKChsaXN0TWF0Y2ggJiYgbGlzdE1hdGNoWzJdKSB8fCBsaW5lVGV4dC50cmltKCkuc3RhcnRzV2l0aCh0YXNrUHJlZml4KSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoXCJUYXNrIE1hcmtlcjogbGlzdCBpdGVtLCBjb252ZXJ0IHRvIGEgdGFzayAlc1wiLCBsaW5lVGV4dCk7XG5cbiAgICAgICAgICAgICAgICBjdXJzb3JPZmZzZXQgPSA0OyAvLyBGb3IgcmV0YWluaW5nIGN1cnNvciBwb3NpdGlvblxuXG4gICAgICAgICAgICAgICAgLy8gY29udmVydCB0byBhIHRhc2ssIGFuZCB0aGVuIG1hcmtcbiAgICAgICAgICAgICAgICBpZiAoKGxpc3RNYXRjaCAmJiBsaXN0TWF0Y2hbMl0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXJrZWQgPSBgJHtsaXN0TWF0Y2hbMV19WyR7bWFya1ZhbHVlWzBdfV0gJHtsaXN0TWF0Y2hbMl19YDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpbmVUZXh0LnRyaW0oKS5zdGFydHNXaXRoKHRhc2tQcmVmaXgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBsaXN0SW5kZXggPSBsaW5lVGV4dC5pbmRleE9mKHRhc2tQcmVmaXgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWFya2VkID0gbGluZVRleHQuc2xpY2UoMCwgbGlzdEluZGV4KzEpICsgJyBbJyArIGAke21hcmtWYWx1ZVswXX1gICsgJ10gJyArIGxpbmVUZXh0LnNsaWNlKGxpc3RJbmRleCsyKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBzdHJpY3RMaW5lRW5kaW5nID0gbGluZVRleHQuZW5kc1dpdGgoXCIgIFwiKTtcbiAgICAgICAgICAgICAgICBsZXQgYmxvY2tpZCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSB0aGlzLmJsb2NrUmVmLmV4ZWMobWFya2VkKTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMl0pIHtcbiAgICAgICAgICAgICAgICAgICAgbWFya2VkID0gbWF0Y2hbMV07XG4gICAgICAgICAgICAgICAgICAgIGJsb2NraWQgPSBtYXRjaFsyXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbWFya2VkICs9IGJsb2NraWQ7XG4gICAgICAgICAgICAgICAgaWYgKHN0cmljdExpbmVFbmRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgbWFya2VkICs9IFwiICBcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbGluZVRleHQgPSBtYXJrZWQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFRhc2sgTWFya2VyOiBub3QgYSB0YXNrIG9yIGxpc3QgaXRlbSFgKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKFwiVGFzayBNYXJrZXI6IG5vdCBhIHRhc2sgb3IgbGlzdCBpdGVtICVzXCIsIGxpbmVUZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7IHVwZGF0ZWRMaW5lVGV4dDogbGluZVRleHQsIGN1cnNvck9mZnNldDogY3Vyc29yT2Zmc2V0IH07XG4gICAgfVxuICAgIG1hcmtUYXNrTGluZUN5Y2xlTGlzdDMobGluZVRleHQ6IHN0cmluZywgbWFyazogc3RyaW5nKTogeyB1cGRhdGVkTGluZVRleHQ6IHN0cmluZywgY3Vyc29yT2Zmc2V0OiBudW1iZXIgfSB7XG5cbiAgICAgICAgY29uc3QgdGFza01hdGNoID0gdGhpcy5hbnlUYXNrTWFyay5leGVjKGxpbmVUZXh0KTtcbiAgICAgICAgY29uc3QgdGFza1ByZWZpeCA9IGAke2xpbmVUZXh0LnRyaW0oKS5jaGFyQXQoMCl9IFtgO1xuICAgICAgICBjb25zdCBsaXN0TWF0Y2ggPSB0aGlzLmFueUxpc3RJdGVtLmV4ZWMobGluZVRleHQpO1xuICAgICAgICBjb25zdCBtYXJrVmFsdWUgPSB0aGlzLnNldHRpbmdzLmN5Y2xlVGFza1ZhbHVlc0xpc3QzO1xuICAgICAgICBjb25zdCBtYXJrVmFsdWVMZW5ndGggPSBtYXJrVmFsdWUubGVuZ3RoO1xuICAgICAgICBjb25zdCBjeWNsZVdpdGhMaXN0ID0gdGhpcy5zZXR0aW5ncy5zdXBwb3J0Q3ljbGluZ1dpdGhMaXN0SXRlbVxuXG4gICAgICAgIGxldCBjdXJzb3JPZmZzZXQgPSAwO1xuXG4gICAgICAgIC8vIFJlZ3JvdXAgbWFyayBhcyBzdHJpbmcgYXJyYXlcbiAgICAgICAgbGV0IG1hcmtTdHJpbmdBcnJheSA9IG5ldyBBcnJheTxzdHJpbmc+KG1hcmtWYWx1ZUxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWFya1ZhbHVlTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG1hcmtTdHJpbmdBcnJheVtpXSA9IGAke2xpbmVUZXh0LnRyaW0oKS5jaGFyQXQoMCl9IFske21hcmtWYWx1ZVtpXX1dIGA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGaW5kIHRoZSBuZXh0IGluZGV4XG4gICAgICAgIGxldCBtYXJrSW5kZXggPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hcmtWYWx1ZUxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAobGluZVRleHQudHJpbSgpLnN0YXJ0c1dpdGgobWFya1N0cmluZ0FycmF5W2ldKSkge1xuICAgICAgICAgICAgICAgIGlmIChpICsgMiA8PSBtYXJrVmFsdWVMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgbWFya0luZGV4ID0gaSArIDE7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN5Y2xlV2l0aExpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtJbmRleCA9IC0xOyAgLy8gY3ljbGUgd2l0aCBsaXN0XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3JPZmZzZXQgPSAtNDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtJbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gVXBkYXRlIG5leHQgaW5kZXggYmFzZWQgb24gaXRlbSB0eXBlXG4gICAgICAgIGlmIChtYXJrSW5kZXggPT09IDApIHtcbiAgICAgICAgICAgIGlmICh0YXNrTWF0Y2gpIHtcbiAgICAgICAgICAgICAgICBpZiAoY3ljbGVXaXRoTGlzdCkge1xuICAgICAgICAgICAgICAgICAgICBtYXJrSW5kZXggPSAtMTsgIC8vIGN5Y2xlIHdpdGggbGlzdFxuICAgICAgICAgICAgICAgICAgICBjdXJzb3JPZmZzZXQgPSAtNDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEN5Y2xlIHRhc2sgc3RhdHVzZXNcbiAgICAgICAgaWYgKHRhc2tNYXRjaCkge1xuICAgICAgICAgICAgaWYgKG1hcmtJbmRleCA9PT0gLTEpIHsgIC8vIGNvbnZlcnQgdGFzayB0byBsaXN0XG4gICAgICAgICAgICAgICAgbGV0IGxpc3RJbmRleCA9IGxpbmVUZXh0LmluZGV4T2YodGFza1ByZWZpeCk7XG4gICAgICAgICAgICAgICAgdmFyIG1hcmtlZCA9IGxpbmVUZXh0LnNsaWNlKDAsIGxpc3RJbmRleCsxKSArICcgJyArIGxpbmVUZXh0LnNsaWNlKGxpc3RJbmRleCs2KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hcmtlZCA9IGxpbmVUZXh0LnJlcGxhY2UodGhpcy5hbnlUYXNrTWFyaywgYCQxJHttYXJrVmFsdWVbbWFya0luZGV4XX0kM2ApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBzdHJpY3RMaW5lRW5kaW5nID0gbGluZVRleHQuZW5kc1dpdGgoXCIgIFwiKTtcbiAgICAgICAgICAgIGxldCBibG9ja2lkID0gXCJcIjtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gdGhpcy5ibG9ja1JlZi5leGVjKG1hcmtlZCk7XG4gICAgICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMl0pIHtcbiAgICAgICAgICAgICAgICBtYXJrZWQgPSBtYXRjaFsxXTtcbiAgICAgICAgICAgICAgICBibG9ja2lkID0gbWF0Y2hbMl07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtYXJrZWQgKz0gYmxvY2tpZDtcbiAgICAgICAgICAgIGlmIChzdHJpY3RMaW5lRW5kaW5nKSB7XG4gICAgICAgICAgICAgICAgbWFya2VkICs9IFwiICBcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGluZVRleHQgPSBtYXJrZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoKGxpc3RNYXRjaCAmJiBsaXN0TWF0Y2hbMl0pIHx8IGxpbmVUZXh0LnRyaW0oKS5zdGFydHNXaXRoKHRhc2tQcmVmaXgpKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyhcIlRhc2sgTWFya2VyOiBsaXN0IGl0ZW0sIGNvbnZlcnQgdG8gYSB0YXNrICVzXCIsIGxpbmVUZXh0KTtcblxuICAgICAgICAgICAgICAgIGN1cnNvck9mZnNldCA9IDQ7IC8vIEZvciByZXRhaW5pbmcgY3Vyc29yIHBvc2l0aW9uXG5cbiAgICAgICAgICAgICAgICAvLyBjb252ZXJ0IHRvIGEgdGFzaywgYW5kIHRoZW4gbWFya1xuICAgICAgICAgICAgICAgIGlmICgobGlzdE1hdGNoICYmIGxpc3RNYXRjaFsyXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlZCA9IGAke2xpc3RNYXRjaFsxXX1bJHttYXJrVmFsdWVbMF19XSAke2xpc3RNYXRjaFsyXX1gO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGluZVRleHQudHJpbSgpLnN0YXJ0c1dpdGgodGFza1ByZWZpeCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxpc3RJbmRleCA9IGxpbmVUZXh0LmluZGV4T2YodGFza1ByZWZpeCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXJrZWQgPSBsaW5lVGV4dC5zbGljZSgwLCBsaXN0SW5kZXgrMSkgKyAnIFsnICsgYCR7bWFya1ZhbHVlWzBdfWAgKyAnXSAnICsgbGluZVRleHQuc2xpY2UobGlzdEluZGV4KzIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IHN0cmljdExpbmVFbmRpbmcgPSBsaW5lVGV4dC5lbmRzV2l0aChcIiAgXCIpO1xuICAgICAgICAgICAgICAgIGxldCBibG9ja2lkID0gXCJcIjtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXRjaCA9IHRoaXMuYmxvY2tSZWYuZXhlYyhtYXJrZWQpO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaCAmJiBtYXRjaFsyXSkge1xuICAgICAgICAgICAgICAgICAgICBtYXJrZWQgPSBtYXRjaFsxXTtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tpZCA9IG1hdGNoWzJdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBtYXJrZWQgKz0gYmxvY2tpZDtcbiAgICAgICAgICAgICAgICBpZiAoc3RyaWN0TGluZUVuZGluZykge1xuICAgICAgICAgICAgICAgICAgICBtYXJrZWQgKz0gXCIgIFwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBsaW5lVGV4dCA9IG1hcmtlZDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgVGFzayBNYXJrZXI6IG5vdCBhIHRhc2sgb3IgbGlzdCBpdGVtIWApO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoXCJUYXNrIE1hcmtlcjogbm90IGEgdGFzayBvciBsaXN0IGl0ZW0gJXNcIiwgbGluZVRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHsgdXBkYXRlZExpbmVUZXh0OiBsaW5lVGV4dCwgY3Vyc29yT2Zmc2V0OiBjdXJzb3JPZmZzZXQgfTtcbiAgICB9XG5cbiAgICBtYXJrVGFza0xpbmVDeWNsZVJldmVyc2VseShsaW5lVGV4dDogc3RyaW5nLCBtYXJrOiBzdHJpbmcpOiB7IHVwZGF0ZWRMaW5lVGV4dDogc3RyaW5nLCBjdXJzb3JPZmZzZXQ6IG51bWJlciB9IHtcblxuICAgICAgICBjb25zdCB0YXNrTWF0Y2ggPSB0aGlzLmFueVRhc2tNYXJrLmV4ZWMobGluZVRleHQpO1xuICAgICAgICBjb25zdCB0YXNrUHJlZml4ID0gYCR7bGluZVRleHQudHJpbSgpLmNoYXJBdCgwKX0gW2A7XG4gICAgICAgIGNvbnN0IGxpc3RNYXRjaCA9IHRoaXMuYW55TGlzdEl0ZW0uZXhlYyhsaW5lVGV4dCk7XG4gICAgICAgIHZhciBtYXJrVmFsdWUgPSB0aGlzLnNldHRpbmdzLmN5Y2xlVGFza1ZhbHVlcztcbiAgICAgICAgY29uc3QgbWFya1ZhbHVlTGVuZ3RoID0gbWFya1ZhbHVlLmxlbmd0aDtcbiAgICAgICAgY29uc3QgY3ljbGVXaXRoTGlzdCA9IHRoaXMuc2V0dGluZ3Muc3VwcG9ydEN5Y2xpbmdXaXRoTGlzdEl0ZW1cblxuICAgICAgICBsZXQgY3Vyc29yT2Zmc2V0ID0gMDtcblxuICAgICAgICBsZXQgcmV2ZXJzZVN0cmluZyA9IFwiXCI7XG4gICAgICAgIGZvciAobGV0IGNoYXIgb2YgbWFya1ZhbHVlKSB7XG4gICAgICAgICAgICByZXZlcnNlU3RyaW5nID0gY2hhciArIHJldmVyc2VTdHJpbmc7XG4gICAgICAgIH1cbiAgICAgICAgbWFya1ZhbHVlID0gcmV2ZXJzZVN0cmluZztcblxuICAgICAgICAvLyBSZWdyb3VwIG1hcmsgYXMgc3RyaW5nIGFycmF5XG4gICAgICAgIGxldCBtYXJrU3RyaW5nQXJyYXkgPSBuZXcgQXJyYXk8c3RyaW5nPihtYXJrVmFsdWVMZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hcmtWYWx1ZUxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBtYXJrU3RyaW5nQXJyYXlbaV0gPSBgJHtsaW5lVGV4dC50cmltKCkuY2hhckF0KDApfSBbJHttYXJrVmFsdWVbaV19XSBgO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRmluZCB0aGUgbmV4dCBpbmRleFxuICAgICAgICBsZXQgbWFya0luZGV4ID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXJrVmFsdWVMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGxpbmVUZXh0LnRyaW0oKS5zdGFydHNXaXRoKG1hcmtTdHJpbmdBcnJheVtpXSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoaSArIDIgPD0gbWFya1ZhbHVlTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtJbmRleCA9IGkgKyAxO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjeWNsZVdpdGhMaXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrSW5kZXggPSAtMTsgIC8vIGN5Y2xlIHdpdGggbGlzdFxuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yT2Zmc2V0ID0gLTQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrSW5kZXggPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFVwZGF0ZSBuZXh0IGluZGV4IGJhc2VkIG9uIGl0ZW0gdHlwZVxuICAgICAgICBpZiAobWFya0luZGV4ID09PSAwKSB7XG4gICAgICAgICAgICBpZiAodGFza01hdGNoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGN5Y2xlV2l0aExpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgbWFya0luZGV4ID0gLTE7ICAvLyBjeWNsZSB3aXRoIGxpc3RcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yT2Zmc2V0ID0gLTQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBDeWNsZSB0YXNrIHN0YXR1c2VzXG4gICAgICAgIGlmICh0YXNrTWF0Y2gpIHtcbiAgICAgICAgICAgIGlmIChtYXJrSW5kZXggPT09IC0xKSB7ICAvLyBjb252ZXJ0IHRhc2sgdG8gbGlzdFxuICAgICAgICAgICAgICAgIGxldCBsaXN0SW5kZXggPSBsaW5lVGV4dC5pbmRleE9mKHRhc2tQcmVmaXgpO1xuICAgICAgICAgICAgICAgIHZhciBtYXJrZWQgPSBsaW5lVGV4dC5zbGljZSgwLCBsaXN0SW5kZXgrMSkgKyAnICcgKyBsaW5lVGV4dC5zbGljZShsaXN0SW5kZXgrNik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBtYXJrZWQgPSBsaW5lVGV4dC5yZXBsYWNlKHRoaXMuYW55VGFza01hcmssIGAkMSR7bWFya1ZhbHVlW21hcmtJbmRleF19JDNgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgc3RyaWN0TGluZUVuZGluZyA9IGxpbmVUZXh0LmVuZHNXaXRoKFwiICBcIik7XG4gICAgICAgICAgICBsZXQgYmxvY2tpZCA9IFwiXCI7XG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IHRoaXMuYmxvY2tSZWYuZXhlYyhtYXJrZWQpO1xuICAgICAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoWzJdKSB7XG4gICAgICAgICAgICAgICAgbWFya2VkID0gbWF0Y2hbMV07XG4gICAgICAgICAgICAgICAgYmxvY2tpZCA9IG1hdGNoWzJdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWFya2VkICs9IGJsb2NraWQ7XG4gICAgICAgICAgICBpZiAoc3RyaWN0TGluZUVuZGluZykge1xuICAgICAgICAgICAgICAgIG1hcmtlZCArPSBcIiAgXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxpbmVUZXh0ID0gbWFya2VkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKChsaXN0TWF0Y2ggJiYgbGlzdE1hdGNoWzJdKSB8fCBsaW5lVGV4dC50cmltKCkuc3RhcnRzV2l0aCh0YXNrUHJlZml4KSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoXCJUYXNrIE1hcmtlcjogbGlzdCBpdGVtLCBjb252ZXJ0IHRvIGEgdGFzayAlc1wiLCBsaW5lVGV4dCk7XG5cbiAgICAgICAgICAgICAgICBjdXJzb3JPZmZzZXQgPSA0OyAvLyBGb3IgcmV0YWluaW5nIGN1cnNvciBwb3NpdGlvblxuXG4gICAgICAgICAgICAgICAgLy8gY29udmVydCB0byBhIHRhc2ssIGFuZCB0aGVuIG1hcmtcbiAgICAgICAgICAgICAgICBpZiAoKGxpc3RNYXRjaCAmJiBsaXN0TWF0Y2hbMl0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXJrZWQgPSBgJHtsaXN0TWF0Y2hbMV19WyR7bWFya1ZhbHVlW21hcmtJbmRleF19XSAke2xpc3RNYXRjaFsyXX1gO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGluZVRleHQudHJpbSgpLnN0YXJ0c1dpdGgodGFza1ByZWZpeCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxpc3RJbmRleCA9IGxpbmVUZXh0LmluZGV4T2YodGFza1ByZWZpeCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXJrZWQgPSBsaW5lVGV4dC5zbGljZSgwLCBsaXN0SW5kZXgrMSkgKyBgIFske21hcmtWYWx1ZVttYXJrSW5kZXhdfV0gYCArIGxpbmVUZXh0LnNsaWNlKGxpc3RJbmRleCsyKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBzdHJpY3RMaW5lRW5kaW5nID0gbGluZVRleHQuZW5kc1dpdGgoXCIgIFwiKTtcbiAgICAgICAgICAgICAgICBsZXQgYmxvY2tpZCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSB0aGlzLmJsb2NrUmVmLmV4ZWMobWFya2VkKTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMl0pIHtcbiAgICAgICAgICAgICAgICAgICAgbWFya2VkID0gbWF0Y2hbMV07XG4gICAgICAgICAgICAgICAgICAgIGJsb2NraWQgPSBtYXRjaFsyXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbWFya2VkICs9IGJsb2NraWQ7XG4gICAgICAgICAgICAgICAgaWYgKHN0cmljdExpbmVFbmRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgbWFya2VkICs9IFwiICBcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbGluZVRleHQgPSBtYXJrZWQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFRhc2sgTWFya2VyOiBub3QgYSB0YXNrIG9yIGxpc3QgaXRlbSFgKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKFwiVGFzayBNYXJrZXI6IG5vdCBhIHRhc2sgb3IgbGlzdCBpdGVtICVzXCIsIGxpbmVUZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7IHVwZGF0ZWRMaW5lVGV4dDogbGluZVRleHQsIGN1cnNvck9mZnNldDogY3Vyc29yT2Zmc2V0IH07XG4gICAgfVxuXG4gICAgbWFya1Rhc2tMaW5lQ3JlYXRlKGxpbmVUZXh0OiBzdHJpbmcsIG1hcms6IHN0cmluZyk6IHsgdXBkYXRlZExpbmVUZXh0OiBzdHJpbmcsIGN1cnNvck9mZnNldDogbnVtYmVyIH0ge1xuICAgICAgICBjb25zdCB0YXNrTWF0Y2ggPSB0aGlzLmFueVRhc2tNYXJrLmV4ZWMobGluZVRleHQpO1xuICAgICAgICBjb25zdCB0YXNrUHJlZml4ID0gYCR7bGluZVRleHQudHJpbSgpLmNoYXJBdCgwKX0gWyBdIGA7XG5cbiAgICAgICAgbGV0IGN1cnNvck9mZnNldCA9IDA7XG5cbiAgICAgICAgaWYgKHRhc2tNYXRjaCkge1xuICAgICAgICAgICAgaWYgKCFsaW5lVGV4dC50cmltKCkuc3RhcnRzV2l0aCh0YXNrUHJlZml4KSkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFRhc2sgTWFya2VyOiB0YXNrIGFscmVhZHkgbWFya2VkIWApO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVGFzayBNYXJrZXI6IHRhc2sgYWxyZWFkeSBtYXJrZWQsIGxlYXZpbmcgdW5jaGFuZ2VkOiAlc1wiLCBsaW5lVGV4dCk7XG4gICAgICAgICAgICAvLyB9IGVsc2UgaWYgKGxpbmVUZXh0LnRyaW0oKS5zdGFydHNXaXRoKFwiLSBbIF0gXCIpKSB7XG4gICAgICAgICAgICAvLyAgICAgbmV3IE5vdGljZShgVGFzayBNYXJrZXI6IHRhc2sgYWxyZWFkeSBjcmVhdGVkIWApO1xuICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKFwiVGFzayBNYXJrZXI6IHRhc2sgYWxyZWFkeSBjcmVhdGVkLCBsZWF2aW5nIHVuY2hhbmdlZDogJXNcIiwgbGluZVRleHQpO1xuICAgICAgICAgICAgfSBlbHNlIHsgLy8gQ3JlYXRlIHRhc2sgYW5kIGFwcGVuZCB0ZXh0XG4gICAgICAgICAgICAgICAgbGV0IG1hcmtlZCA9IGxpbmVUZXh0LnJlcGxhY2UodGhpcy5hbnlUYXNrTWFyaywgYCQxJHttYXJrfSQzYCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuYXBwZW5kVGV4dEZvcm1hdENyZWF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cmljdExpbmVFbmRpbmcgPSBsaW5lVGV4dC5lbmRzV2l0aChcIiAgXCIpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgYmxvY2tpZCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gdGhpcy5ibG9ja1JlZi5leGVjKG1hcmtlZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCAmJiBtYXRjaFsyXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VkID0gbWF0Y2hbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja2lkID0gbWF0Y2hbMl07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXJrZWQuZW5kc1dpdGgoXCIgXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZWQgKz0gXCIgXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbWFya2VkICs9IG1vbWVudCgpLmZvcm1hdCh0aGlzLnNldHRpbmdzLmFwcGVuZFRleHRGb3JtYXRDcmVhdGlvbikgKyBibG9ja2lkO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RyaWN0TGluZUVuZGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VkICs9IFwiICBcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVGFzayBNYXJrZXI6IGFwcGVuZGluZyBzdHJpbmcgZW1wdHksIG5vdGhpbmcgYXBwZW5kZWQ6ICVzXCIsIGxpbmVUZXh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGluZVRleHQgPSBtYXJrZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBsaXN0TWF0Y2ggPSB0aGlzLmFueUxpc3RJdGVtLmV4ZWMobGluZVRleHQpO1xuICAgICAgICAgICAgY29uc3QgdGFza1ByZWZpeCA9IGAke2xpbmVUZXh0LnRyaW0oKS5jaGFyQXQoMCl9IFtgO1xuXG4gICAgICAgICAgICBpZiAoKGxpc3RNYXRjaCAmJiBsaXN0TWF0Y2hbMl0pIHx8IGxpbmVUZXh0LnRyaW0oKS5zdGFydHNXaXRoKHRhc2tQcmVmaXgpKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyhcIlRhc2sgTWFya2VyOiBsaXN0IGl0ZW0sIGNvbnZlcnQgdG8gYSB0YXNrICVzXCIsIGxpbmVUZXh0KTtcblxuICAgICAgICAgICAgICAgIGN1cnNvck9mZnNldCA9IDQ7XG5cbiAgICAgICAgICAgICAgICAvLyBjb252ZXJ0IHRvIGEgdGFzaywgYW5kIHRoZW4gbWFya1xuICAgICAgICAgICAgICAgIGlmICgobGlzdE1hdGNoICYmIGxpc3RNYXRjaFsyXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlZCA9IGAke2xpc3RNYXRjaFsxXX1bIF0gJHtsaXN0TWF0Y2hbMl19YDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpbmVUZXh0LnRyaW0oKS5zdGFydHNXaXRoKHRhc2tQcmVmaXgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBsaXN0SW5kZXggPSBsaW5lVGV4dC5pbmRleE9mKHRhc2tQcmVmaXgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWFya2VkID0gbGluZVRleHQuc2xpY2UoMCwgbGlzdEluZGV4KzEpICsgJyBbIF0gJyArIGxpbmVUZXh0LnNsaWNlKGxpc3RJbmRleCsyKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5hcHBlbmRUZXh0Rm9ybWF0Q3JlYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyaWN0TGluZUVuZGluZyA9IGxpbmVUZXh0LmVuZHNXaXRoKFwiICBcIik7XG4gICAgICAgICAgICAgICAgICAgIGxldCBibG9ja2lkID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSB0aGlzLmJsb2NrUmVmLmV4ZWMobWFya2VkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoWzJdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZWQgPSBtYXRjaFsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NraWQgPSBtYXRjaFsyXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIW1hcmtlZC5lbmRzV2l0aChcIiBcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlZCArPSBcIiBcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBtYXJrZWQgKz0gbW9tZW50KCkuZm9ybWF0KHRoaXMuc2V0dGluZ3MuYXBwZW5kVGV4dEZvcm1hdENyZWF0aW9uKSArIGJsb2NraWQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdHJpY3RMaW5lRW5kaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZWQgKz0gXCIgIFwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJUYXNrIE1hcmtlcjogYXBwZW5kaW5nIHN0cmluZyBlbXB0eSwgbm90aGluZyBhcHBlbmRlZDogJXNcIiwgbGluZVRleHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsaW5lVGV4dCA9IG1hcmtlZDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgVGFzayBNYXJrZXI6IG5vdCBhIHRhc2sgb3IgbGlzdCBpdGVtIWApO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoXCJUYXNrIE1hcmtlcjogbm90IGEgdGFzayBvciBsaXN0IGl0ZW0gJXNcIiwgbGluZVRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHVwZGF0ZWRMaW5lVGV4dDogbGluZVRleHQsIGN1cnNvck9mZnNldDogY3Vyc29yT2Zmc2V0IH07XG4gICAgfVxuXG4gICAgYXBwZW5kVGV4dExpbmVGdW5jdGlvbihsaW5lVGV4dDogc3RyaW5nLCBhcHBlbmRUZXh0Rm9ybWF0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBsZXQgbWFya2VkID0gbGluZVRleHQ7XG5cbiAgICAgICAgY29uc3Qgc3RyaWN0TGluZUVuZGluZyA9IGxpbmVUZXh0LmVuZHNXaXRoKFwiICBcIik7XG4gICAgICAgIGxldCBibG9ja2lkID0gXCJcIjtcbiAgICAgICAgY29uc3QgbWF0Y2ggPSB0aGlzLmJsb2NrUmVmLmV4ZWMobWFya2VkKTtcbiAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoWzJdKSB7XG4gICAgICAgICAgICBtYXJrZWQgPSBtYXRjaFsxXTtcbiAgICAgICAgICAgIGJsb2NraWQgPSBtYXRjaFsyXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW1hcmtlZC5lbmRzV2l0aChcIiBcIikpIHtcbiAgICAgICAgICAgIG1hcmtlZCArPSBcIiBcIjtcbiAgICAgICAgfVxuICAgICAgICBtYXJrZWQgKz0gbW9tZW50KCkuZm9ybWF0KGFwcGVuZFRleHRGb3JtYXQpICsgYmxvY2tpZDtcbiAgICAgICAgaWYgKHN0cmljdExpbmVFbmRpbmcpIHtcbiAgICAgICAgICAgIG1hcmtlZCArPSBcIiAgXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1hcmtlZDtcbiAgICB9XG5cbiAgICBhcHBlbmRUZXh0TGluZShsaW5lVGV4dDogc3RyaW5nLCBtYXJrOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBsZXQgbWFya2VkID0gbGluZVRleHQ7XG5cbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuYXBwZW5kVGV4dEZvcm1hdEFwcGVuZCkge1xuICAgICAgICAgICAgbWFya2VkID0gdGhpcy5hcHBlbmRUZXh0TGluZUZ1bmN0aW9uKGxpbmVUZXh0LCB0aGlzLnNldHRpbmdzLmFwcGVuZFRleHRGb3JtYXRBcHBlbmQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgVGFzayBNYXJrZXI6IGFwcGVuZGluZyBzdHJpbmcgZW1wdHkhYCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRhc2sgTWFya2VyOiBhcHBlbmRpbmcgc3RyaW5nIGVtcHR5LCBub3RoaW5nIGFwcGVuZGVkOiAlc1wiLCBsaW5lVGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgbGluZVRleHQgPSBtYXJrZWQ7XG4gICAgICAgIHJldHVybiBsaW5lVGV4dDtcbiAgICB9XG5cbiAgICBhcHBlbmRUZXh0TGluZVRleHQyKGxpbmVUZXh0OiBzdHJpbmcsIG1hcms6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGxldCBtYXJrZWQgPSBsaW5lVGV4dDtcblxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5hcHBlbmRUZXh0Rm9ybWF0QXBwZW5kVGV4dDIpIHtcbiAgICAgICAgICAgIG1hcmtlZCA9IHRoaXMuYXBwZW5kVGV4dExpbmVGdW5jdGlvbihsaW5lVGV4dCwgdGhpcy5zZXR0aW5ncy5hcHBlbmRUZXh0Rm9ybWF0QXBwZW5kVGV4dDIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgVGFzayBNYXJrZXI6IGFwcGVuZGluZyBzdHJpbmcgZW1wdHkhYCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRhc2sgTWFya2VyOiBhcHBlbmRpbmcgc3RyaW5nIGVtcHR5LCBub3RoaW5nIGFwcGVuZGVkOiAlc1wiLCBsaW5lVGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgbGluZVRleHQgPSBtYXJrZWQ7XG4gICAgICAgIHJldHVybiBsaW5lVGV4dDtcbiAgICB9XG5cbiAgICBhcHBlbmRUZXh0TGluZVRleHQzKGxpbmVUZXh0OiBzdHJpbmcsIG1hcms6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGxldCBtYXJrZWQgPSBsaW5lVGV4dDtcblxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5hcHBlbmRUZXh0Rm9ybWF0QXBwZW5kVGV4dDMpIHtcbiAgICAgICAgICAgIG1hcmtlZCA9IHRoaXMuYXBwZW5kVGV4dExpbmVGdW5jdGlvbihsaW5lVGV4dCwgdGhpcy5zZXR0aW5ncy5hcHBlbmRUZXh0Rm9ybWF0QXBwZW5kVGV4dDMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgVGFzayBNYXJrZXI6IGFwcGVuZGluZyBzdHJpbmcgZW1wdHkhYCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRhc2sgTWFya2VyOiBhcHBlbmRpbmcgc3RyaW5nIGVtcHR5LCBub3RoaW5nIGFwcGVuZGVkOiAlc1wiLCBsaW5lVGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgbGluZVRleHQgPSBtYXJrZWQ7XG4gICAgICAgIHJldHVybiBsaW5lVGV4dDtcbiAgICB9XG5cbiAgICBhcHBlbmRUZXh0TGluZUF1dG8obGluZVRleHQ6IHN0cmluZywgbWFyazogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IG1hcmtlZCA9IGxpbmVUZXh0O1xuICAgICAgICBjb25zdCB0YXNrTWF0Y2ggPSB0aGlzLmFueVRhc2tNYXJrLmV4ZWMobGluZVRleHQpO1xuXG4gICAgICAgIGlmICh0YXNrTWF0Y2gpIHtcbiAgICAgICAgICAgIC8vIERldGVybWluZSB0YXNrIG1hcmtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tNYXJrID0gbGluZVRleHQudHJpbSgpWzNdO1xuXG4gICAgICAgICAgICBjb25zdCBjcmVhdGVNYXJrID0gdGFza01hcmsgPT09IFwiIFwiOyAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgY29tcGxldGVNYXJrID0gdGhpcy5pbml0U2V0dGluZ3MuY29tcGxldGVkVGFza3MuaW5kZXhPZih0YXNrTWFyaykgPj0gMDtcbiAgICAgICAgICAgIGNvbnN0IG1hcmtSb3cxTWFyayA9IHRoaXMuc2V0dGluZ3MuaW5jb21wbGV0ZVRhc2tWYWx1ZXMuaW5kZXhPZih0YXNrTWFyaykgPj0gMDtcbiAgICAgICAgICAgIGNvbnN0IG1hcmtSb3cyTWFyayA9IHRoaXMuc2V0dGluZ3MuaW5jb21wbGV0ZVRhc2tWYWx1ZXNSb3cyLmluZGV4T2YodGFza01hcmspID49IDA7XG5cbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRUYXNrVGV4dFJvd3MxMiA9IHRoaXMuc2V0dGluZ3MuYXBwZW5kVGV4dEF1dG9UYXNrRGVmYXVsdCA9PT0gXCJ0ZXh0LXJvd3MtMS0yXCI7XG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0VGFza1RleHRSb3dTdHJpbmcgPSB0aGlzLnNldHRpbmdzLmFwcGVuZFRleHRBdXRvVGFza0RlZmF1bHQgPT09IFwidGV4dC1yb3ctc3RyaW5nXCI7XG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0VGFza1RleHRSb3cxID0gdGhpcy5zZXR0aW5ncy5hcHBlbmRUZXh0QXV0b1Rhc2tEZWZhdWx0ID09PSBcInRleHQtcm93LTFcIjtcbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRUYXNrVGV4dFJvdzIgPSB0aGlzLnNldHRpbmdzLmFwcGVuZFRleHRBdXRvVGFza0RlZmF1bHQgPT09IFwidGV4dC1yb3ctMlwiO1xuICAgICAgICAgICAgY29uc3QgZGVmYXVsdFRhc2tOb25lID0gdGhpcy5zZXR0aW5ncy5hcHBlbmRUZXh0QXV0b1Rhc2tEZWZhdWx0ID09PSBcIm5vbmVcIjtcblxuICAgICAgICAgICAgaWYgKGNyZWF0ZU1hcmsgJiYgdGhpcy5zZXR0aW5ncy5hcHBlbmRUZXh0Rm9ybWF0Q3JlYXRpb24pIHtcbiAgICAgICAgICAgICAgICBtYXJrZWQgPSB0aGlzLmFwcGVuZFRleHRMaW5lRnVuY3Rpb24obGluZVRleHQsIHRoaXMuc2V0dGluZ3MuYXBwZW5kVGV4dEZvcm1hdENyZWF0aW9uKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29tcGxldGVNYXJrICYmIHRoaXMuc2V0dGluZ3MuYXBwZW5kRGF0ZUZvcm1hdCkge1xuICAgICAgICAgICAgICAgIG1hcmtlZCA9IHRoaXMuYXBwZW5kVGV4dExpbmVGdW5jdGlvbihsaW5lVGV4dCwgdGhpcy5zZXR0aW5ncy5hcHBlbmREYXRlRm9ybWF0KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobWFya1JvdzFNYXJrIHx8IG1hcmtSb3cyTWFyaykge1xuICAgICAgICAgICAgICAgIGlmIChkZWZhdWx0VGFza1RleHRSb3dzMTIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hcmtSb3cxTWFyayAmJiB0aGlzLnNldHRpbmdzLmFwcGVuZFRleHRGb3JtYXRNYXJrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZWQgPSB0aGlzLmFwcGVuZFRleHRMaW5lRnVuY3Rpb24obGluZVRleHQsIHRoaXMuc2V0dGluZ3MuYXBwZW5kVGV4dEZvcm1hdE1hcmspO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1hcmtSb3cyTWFyayAmJiB0aGlzLnNldHRpbmdzLmFwcGVuZFRleHRGb3JtYXRNYXJrUm93Mikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VkID0gdGhpcy5hcHBlbmRUZXh0TGluZUZ1bmN0aW9uKGxpbmVUZXh0LCB0aGlzLnNldHRpbmdzLmFwcGVuZFRleHRGb3JtYXRNYXJrUm93Mik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBUYXNrIE1hcmtlcjogZW1wdHkgYXBwZW5kaW5nIHN0cmluZyFgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoXCJUYXNrIE1hcmtlcjogZW1wdHkgYXBwZW5kaW5nIHN0cmluZyFcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRlZmF1bHRUYXNrVGV4dFJvd1N0cmluZykge1xuICAgICAgICAgICAgICAgICAgICBpZiAobWFya1JvdzFNYXJrICYmIHRoaXMuc2V0dGluZ3MuYXBwZW5kVGV4dEZvcm1hdE1hcmspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlZCA9IHRoaXMuYXBwZW5kVGV4dExpbmVGdW5jdGlvbihsaW5lVGV4dCwgdGhpcy5zZXR0aW5ncy5hcHBlbmRUZXh0Rm9ybWF0TWFyayk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWFya1JvdzFNYXJrICYmICF0aGlzLnNldHRpbmdzLmFwcGVuZFRleHRGb3JtYXRNYXJrICYmIHRoaXMuc2V0dGluZ3MuYXBwZW5kVGV4dEZvcm1hdE1hcmtSb3cyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZWQgPSB0aGlzLmFwcGVuZFRleHRMaW5lRnVuY3Rpb24obGluZVRleHQsIHRoaXMuc2V0dGluZ3MuYXBwZW5kVGV4dEZvcm1hdE1hcmtSb3cyKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtYXJrUm93Mk1hcmsgJiYgdGhpcy5zZXR0aW5ncy5hcHBlbmRUZXh0Rm9ybWF0TWFya1JvdzIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlZCA9IHRoaXMuYXBwZW5kVGV4dExpbmVGdW5jdGlvbihsaW5lVGV4dCwgdGhpcy5zZXR0aW5ncy5hcHBlbmRUZXh0Rm9ybWF0TWFya1JvdzIpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1hcmtSb3cyTWFyayAmJiAhdGhpcy5zZXR0aW5ncy5hcHBlbmRUZXh0Rm9ybWF0TWFya1JvdzIgJiYgdGhpcy5zZXR0aW5ncy5hcHBlbmRUZXh0Rm9ybWF0TWFyaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VkID0gdGhpcy5hcHBlbmRUZXh0TGluZUZ1bmN0aW9uKGxpbmVUZXh0LCB0aGlzLnNldHRpbmdzLmFwcGVuZFRleHRGb3JtYXRNYXJrKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFRhc2sgTWFya2VyOiBlbXB0eSBhcHBlbmRpbmcgc3RyaW5nIWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyhcIlRhc2sgTWFya2VyOiBlbXB0eSBhcHBlbmRpbmcgc3RyaW5nIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVmYXVsdFRhc2tUZXh0Um93MSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobWFya1JvdzFNYXJrICYmIHRoaXMuc2V0dGluZ3MuYXBwZW5kVGV4dEZvcm1hdE1hcmspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlZCA9IHRoaXMuYXBwZW5kVGV4dExpbmVGdW5jdGlvbihsaW5lVGV4dCwgdGhpcy5zZXR0aW5ncy5hcHBlbmRUZXh0Rm9ybWF0TWFyayk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWFya1JvdzJNYXJrICYmIHRoaXMuc2V0dGluZ3MuYXBwZW5kVGV4dEZvcm1hdE1hcmspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlZCA9IHRoaXMuYXBwZW5kVGV4dExpbmVGdW5jdGlvbihsaW5lVGV4dCwgdGhpcy5zZXR0aW5ncy5hcHBlbmRUZXh0Rm9ybWF0TWFyayk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBUYXNrIE1hcmtlcjogZW1wdHkgYXBwZW5kaW5nIHN0cmluZyBpbiByb3cgMSFgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoXCJUYXNrIE1hcmtlcjogZW1wdHkgYXBwZW5kaW5nIHN0cmluZyBpbiByb3cgMSFcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRlZmF1bHRUYXNrVGV4dFJvdzIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hcmtSb3cxTWFyayAmJiB0aGlzLnNldHRpbmdzLmFwcGVuZFRleHRGb3JtYXRNYXJrUm93Mikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VkID0gdGhpcy5hcHBlbmRUZXh0TGluZUZ1bmN0aW9uKGxpbmVUZXh0LCB0aGlzLnNldHRpbmdzLmFwcGVuZFRleHRGb3JtYXRNYXJrUm93Mik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWFya1JvdzJNYXJrICYmIHRoaXMuc2V0dGluZ3MuYXBwZW5kVGV4dEZvcm1hdE1hcmtSb3cyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZWQgPSB0aGlzLmFwcGVuZFRleHRMaW5lRnVuY3Rpb24obGluZVRleHQsIHRoaXMuc2V0dGluZ3MuYXBwZW5kVGV4dEZvcm1hdE1hcmtSb3cyKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFRhc2sgTWFya2VyOiBlbXB0eSBhcHBlbmRpbmcgc3RyaW5nIGluIHJvdyAyIWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyhcIlRhc2sgTWFya2VyOiBlbXB0eSBhcHBlbmRpbmcgc3RyaW5nIGluIHJvdyAyIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVmYXVsdFRhc2tOb25lKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFRhc2sgTWFya2VyOiBzZXQgdG8gYXBwZW5kIG5vdGhpbmchYCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVGFzayBNYXJrZXI6IHNldCB0byBhcHBlbmQgbm90aGluZyFcIik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgVGFzayBNYXJrZXI6IG5vdGhpbmcgdG8gYXBwZW5kIWApO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRhc2sgTWFya2VyOiBub3RoaW5nIHRvIGFwcGVuZCFcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBUYXNrIE1hcmtlcjogdW5kZWZpbmVkIG1hcmsgb3IgZW1wdHkgYXBwZW5kaW5nIHN0cmluZyFgKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKFwiVGFzayBNYXJrZXI6IHVuZGVmaW5lZCBtYXJrIG9yIGVtcHR5IGFwcGVuZGluZyBzdHJpbmchXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZGVmYXVsdExpbmVUZXh0MSA9IHRoaXMuc2V0dGluZ3MuYXBwZW5kVGV4dEF1dG9MaW5lRGVmYXVsdCA9PT0gXCJ0ZXh0LTFcIjtcbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRMaW5lVGV4dDIgPSB0aGlzLnNldHRpbmdzLmFwcGVuZFRleHRBdXRvTGluZURlZmF1bHQgPT09IFwidGV4dC0yXCI7XG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0TGluZVRleHQzID0gdGhpcy5zZXR0aW5ncy5hcHBlbmRUZXh0QXV0b0xpbmVEZWZhdWx0ID09PSBcInRleHQtM1wiO1xuICAgICAgICAgICAgY29uc3QgZGVmYXVsdExpbmVOb25lID0gdGhpcy5zZXR0aW5ncy5hcHBlbmRUZXh0QXV0b0xpbmVEZWZhdWx0ID09PSBcIm5vbmVcIjtcblxuICAgICAgICAgICAgaWYgKGRlZmF1bHRMaW5lVGV4dDEpIHtcbiAgICAgICAgICAgICAgICBtYXJrZWQgPSB0aGlzLmFwcGVuZFRleHRMaW5lKG1hcmtlZCwgXCJ5XCIpOyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVmYXVsdExpbmVUZXh0Mikge1xuICAgICAgICAgICAgICAgIG1hcmtlZCA9IHRoaXMuYXBwZW5kVGV4dExpbmVUZXh0MihtYXJrZWQsIFwieVwiKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVmYXVsdExpbmVUZXh0Mykge1xuICAgICAgICAgICAgICAgIG1hcmtlZCA9IHRoaXMuYXBwZW5kVGV4dExpbmVUZXh0MyhtYXJrZWQsIFwieVwiKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVmYXVsdExpbmVOb25lKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgVGFzayBNYXJrZXI6IG5vdCBhIHRhc2ssIGFuZCBzZXQgdG8gYXBwZW5kIG5vdGhpbmchYCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJUYXNrIE1hcmtlcjogbm90IGEgdGFzaywgYW5kIHNldCB0byBhcHBlbmQgbm90aGluZyFcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFRhc2sgTWFya2VyOiBub3QgYSB0YXNrLCBhbmQgbm90aGluZyB0byBhcHBlbmQhYCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJUYXNrIE1hcmtlcjogbm90IGEgdGFzaywgYW5kIG5vdGhpbmcgdG8gYXBwZW5kIVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsaW5lVGV4dCA9IG1hcmtlZDtcbiAgICAgICAgcmV0dXJuIGxpbmVUZXh0O1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVzZXRUYXNrTGluZShsaW5lVGV4dDogc3RyaW5nLCBtYXJrID0gXCIgXCIpOiBzdHJpbmcge1xuICAgICAgICBjb25zb2xlLmRlYnVnKFwiVGFzayBNYXJrZXI6IHJlc2V0IHRhc2sgd2l0aCAlczogJXNcIiwgbWFyaywgbGluZVRleHQpO1xuICAgICAgICBsaW5lVGV4dCA9IGxpbmVUZXh0LnJlcGxhY2UodGhpcy5hbnlUYXNrTWFyaywgYCQxJHttYXJrfSQzYCk7XG4gICAgICAgIGNvbnN0IHN0cmljdExpbmVFbmRpbmcgPSBsaW5lVGV4dC5lbmRzV2l0aChcIiAgXCIpO1xuXG4gICAgICAgIGxldCBibG9ja2lkID0gXCJcIjtcbiAgICAgICAgY29uc3QgbWF0Y2ggPSB0aGlzLmJsb2NrUmVmLmV4ZWMobGluZVRleHQpO1xuICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMl0pIHtcbiAgICAgICAgICAgIGxpbmVUZXh0ID0gbWF0Y2hbMV07XG4gICAgICAgICAgICBibG9ja2lkID0gbWF0Y2hbMl07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaW5pdFNldHRpbmdzLnJlc2V0UmVnRXhwKSB7XG4gICAgICAgICAgICBsaW5lVGV4dCA9IGxpbmVUZXh0LnJlcGxhY2UodGhpcy5pbml0U2V0dGluZ3MucmVzZXRSZWdFeHAsIFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIGxpbmVUZXh0ID0gbGluZVRleHQucmVwbGFjZSgvXFxzKiQvLCBibG9ja2lkKTtcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuYXBwZW5kUmVtb3ZlQWxsVGFza3MgJiYgbWFyayAhPT0gXCIgXCIpIHtcbiAgICAgICAgICAgIC8vIGNsZWFyIHByZXZpb3VzIGFwcGVuZGVkIHRleHRcbiAgICAgICAgICAgIGxpbmVUZXh0ID0gdGhpcy5jb21wbGV0ZVRhc2tMaW5lKGxpbmVUZXh0LCBtYXJrKTtcbiAgICAgICAgICAgIC8vIGxpbmVUZXh0ID0gdGhpcy5tYXJrVGFza0xpbmUobGluZVRleHQsIG1hcmspO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdHJpY3RMaW5lRW5kaW5nKSB7XG4gICAgICAgICAgICBsaW5lVGV4dCArPSBcIiAgXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpbmVUZXh0O1xuICAgIH1cblxuICAgIHJlc2V0QWxsVGFza3Moc291cmNlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICAvLyBjb25zdCBMT0dfSEVBRElORyA9IHRoaXMuc2V0dGluZ3MuY29tcGxldGVkQXJlYUhlYWRlciB8fCBcIiMjIExvZ1wiO1xuICAgICAgICBjb25zdCBsaW5lcyA9IHNvdXJjZS5zcGxpdChcIlxcblwiKTtcblxuICAgICAgICBjb25zdCByZXN1bHQ6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGxldCBpbkNvbXBsZXRlZFNlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgICAgICAgICBpZiAoaW5Db21wbGV0ZWRTZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxpbmUuc3RhcnRzV2l0aChcIiNcIikgfHwgbGluZS50cmltKCkgPT09IFwiLS0tXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5Db21wbGV0ZWRTZWN0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGxpbmUpO1xuICAgICAgICAgICAgLy8gfSBlbHNlIGlmIChsaW5lLnRyaW0oKSA9PT0gTE9HX0hFQURJTkcpIHtcbiAgICAgICAgICAgIC8vICAgICBpbkNvbXBsZXRlZFNlY3Rpb24gPSB0cnVlO1xuICAgICAgICAgICAgLy8gICAgIHJlc3VsdC5wdXNoKGxpbmUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzQ29tcGxldGVkVGFza0xpbmUobGluZSkpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh0aGlzLnJlc2V0VGFza0xpbmUobGluZSkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChsaW5lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0LmpvaW4oXCJcXG5cIik7XG4gICAgfVxuXG4gICAgLy8gbW92ZUNvbXBsZXRlZFRhc2tzSW5GaWxlKHNvdXJjZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyAgICAgY29uc3QgTE9HX0hFQURJTkcgPSB0aGlzLnNldHRpbmdzLmNvbXBsZXRlZEFyZWFIZWFkZXIgfHwgXCIjIyBMb2dcIjtcbiAgICAvLyAgICAgY29uc3QgbGluZXMgPSBzb3VyY2Uuc3BsaXQoXCJcXG5cIik7XG5cbiAgICAvLyAgICAgaWYgKHNvdXJjZS5pbmRleE9mKExPR19IRUFESU5HKSA8IDApIHtcbiAgICAvLyAgICAgICAgIGlmIChsaW5lc1tsaW5lcy5sZW5ndGggLSAxXS50cmltKCkgIT09IFwiXCIpIHtcbiAgICAvLyAgICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICAgICAgbGluZXMucHVzaChMT0dfSEVBRElORyk7XG4gICAgLy8gICAgIH1cblxuICAgIC8vICAgICBjb25zdCByZW1haW5pbmcgPSBbXTtcbiAgICAvLyAgICAgY29uc3QgY29tcGxldGVkU2VjdGlvbiA9IFtdO1xuICAgIC8vICAgICBjb25zdCBuZXdUYXNrcyA9IFtdO1xuICAgIC8vICAgICBsZXQgaW5Db21wbGV0ZWRTZWN0aW9uID0gZmFsc2U7XG4gICAgLy8gICAgIGxldCBpblRhc2sgPSBmYWxzZTtcbiAgICAvLyAgICAgbGV0IGluQ2FsbG91dCA9IGZhbHNlO1xuICAgIC8vICAgICBsZXQgY29tcGxldGVkVGFza3NJbmRleCA9IGxpbmVzLmxlbmd0aDtcblxuICAgIC8vICAgICBmb3IgKGxldCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgLy8gICAgICAgICBpZiAoaW5Db21wbGV0ZWRTZWN0aW9uKSB7XG4gICAgLy8gICAgICAgICAgICAgaWYgKGxpbmUuc3RhcnRzV2l0aChcIiNcIikgfHwgbGluZS50cmltKCkgPT09IFwiLS0tXCIpIHtcbiAgICAvLyAgICAgICAgICAgICAgICAgaW5Db21wbGV0ZWRTZWN0aW9uID0gZmFsc2U7XG4gICAgLy8gICAgICAgICAgICAgICAgIHJlbWFpbmluZy5wdXNoKGxpbmUpO1xuICAgIC8vICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgLy8gICAgICAgICAgICAgICAgIGNvbXBsZXRlZFNlY3Rpb24ucHVzaChsaW5lKTtcbiAgICAvLyAgICAgICAgICAgICB9XG4gICAgLy8gICAgICAgICB9IGVsc2UgaWYgKGxpbmUudHJpbSgpID09PSBMT0dfSEVBRElORykge1xuICAgIC8vICAgICAgICAgICAgIGluQ29tcGxldGVkU2VjdGlvbiA9IHRydWU7XG4gICAgLy8gICAgICAgICAgICAgY29tcGxldGVkVGFza3NJbmRleCA9IHJlbWFpbmluZy5wdXNoKGxpbmUpO1xuICAgIC8vICAgICAgICAgICAgIHJlbWFpbmluZy5wdXNoKFwiJSUlQ09NUExFVEVEX0lURU1TX0dPX0hFUkUlJSVcIik7XG4gICAgLy8gICAgICAgICB9IGVsc2Uge1xuICAgIC8vICAgICAgICAgICAgIGlmICh0aGlzLmlzQ29tcGxldGVkVGFza0xpbmUobGluZSkpIHtcbiAgICAvLyAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuY29tcGxldGVkQXJlYVJlbW92ZUNoZWNrYm94KSB7XG4gICAgLy8gICAgICAgICAgICAgICAgICAgICBsaW5lID0gdGhpcy5yZW1vdmVDaGVja2JveEZyb21MaW5lKGxpbmUpO1xuICAgIC8vICAgICAgICAgICAgICAgICB9XG4gICAgLy8gICAgICAgICAgICAgICAgIGluVGFzayA9IHRydWU7XG4gICAgLy8gICAgICAgICAgICAgICAgIGluQ2FsbG91dCA9IHRoaXMuaXNDYWxsb3V0KGxpbmUpOyAvLyBpcyB0YXNrIF9pbnNpZGVfIHRoZSBjYWxsb3V0XG4gICAgLy8gICAgICAgICAgICAgICAgIG5ld1Rhc2tzLnB1c2gobGluZSk7XG4gICAgLy8gICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAvLyAgICAgICAgICAgICAgICAgaW5UYXNrICYmXG4gICAgLy8gICAgICAgICAgICAgICAgICF0aGlzLmlzVGFza0xpbmUobGluZSkgJiZcbiAgICAvLyAgICAgICAgICAgICAgICAgdGhpcy5pc0NvbnRpbnVhdGlvbihsaW5lLCBpbkNhbGxvdXQpXG4gICAgLy8gICAgICAgICAgICAgKSB7XG4gICAgLy8gICAgICAgICAgICAgICAgIG5ld1Rhc2tzLnB1c2gobGluZSk7XG4gICAgLy8gICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAvLyAgICAgICAgICAgICAgICAgaW5UYXNrID0gZmFsc2U7XG4gICAgLy8gICAgICAgICAgICAgICAgIGluQ2FsbG91dCA9IGZhbHNlO1xuICAgIC8vICAgICAgICAgICAgICAgICByZW1haW5pbmcucHVzaChsaW5lKTtcbiAgICAvLyAgICAgICAgICAgICB9XG4gICAgLy8gICAgICAgICB9XG4gICAgLy8gICAgIH1cblxuICAgIC8vICAgICBsZXQgcmVzdWx0ID0gcmVtYWluaW5nXG4gICAgLy8gICAgICAgICAuc2xpY2UoMCwgY29tcGxldGVkVGFza3NJbmRleClcbiAgICAvLyAgICAgICAgIC5jb25jYXQoLi4ubmV3VGFza3MpXG4gICAgLy8gICAgICAgICAuY29uY2F0KC4uLmNvbXBsZXRlZFNlY3Rpb24pO1xuICAgIC8vICAgICBpZiAoY29tcGxldGVkVGFza3NJbmRleCA8IHJlbWFpbmluZy5sZW5ndGggLSAxKSB7XG4gICAgLy8gICAgICAgICByZXN1bHQgPSByZXN1bHQuY29uY2F0KHJlbWFpbmluZy5zbGljZShjb21wbGV0ZWRUYXNrc0luZGV4ICsgMSkpO1xuICAgIC8vICAgICB9XG4gICAgLy8gICAgIHJldHVybiByZXN1bHQuam9pbihcIlxcblwiKTtcbiAgICAvLyB9XG5cbiAgICBwcml2YXRlIGlzQ29tcGxldGVkVGFza0xpbmUobGluZVRleHQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5pbml0U2V0dGluZ3MuY29tcGxldGVkVGFza1JlZ0V4cC50ZXN0KGxpbmVUZXh0KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzSW5jb21wbGV0ZVRhc2tMaW5lKGxpbmVUZXh0OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5pdFNldHRpbmdzLmluY29tcGxldGVUYXNrUmVnRXhwLnRlc3QobGluZVRleHQpIHx8IHRoaXMuaW5pdFNldHRpbmdzLmluY29tcGxldGVUYXNrUmVnRXhwUm93Mi50ZXN0KGxpbmVUZXh0KTsgLy8gQWRkIFJvdzIgaGVyZSBvciBub3Q/IFllcy5cbiAgICB9XG5cbiAgICBwcml2YXRlIGlzVGFza0xpbmUobGluZVRleHQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5hbnlUYXNrTWFyay50ZXN0KGxpbmVUZXh0KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzQ29udGludWF0aW9uKGxpbmVUZXh0OiBzdHJpbmcsIGluQ2FsbG91dDogYm9vbGVhbik6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoaW5DYWxsb3V0KSB7XG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IHRoaXMuYmxvY2tRdW90ZS5leGVjKGxpbmVUZXh0KTtcbiAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoWzFdLmVuZHNXaXRoKFwiPlwiKSB8fFxuICAgICAgICAgICAgICAgICAgICBtYXRjaFsxXS5lbmRzV2l0aChcIiAgXCIpIHx8XG4gICAgICAgICAgICAgICAgICAgIG1hdGNoWzFdLmVuZHNXaXRoKFwiXFx0XCIpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jb250aW51YXRpb24udGVzdChsaW5lVGV4dCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc0NhbGxvdXQobGluZVRleHQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5ibG9ja1F1b3RlLnRlc3QobGluZVRleHQpO1xuICAgIH1cbn1cbiIsICJleHBvcnQgaW50ZXJmYWNlIFRhc2tNYXJrZXJTZXR0aW5ncyB7XG4gICAgLy8gY29tcGxldGVkQXJlYUhlYWRlcjogc3RyaW5nO1xuICAgIHJlbW92ZUV4cHJlc3Npb246IHN0cmluZztcbiAgICBhcHBlbmREYXRlRm9ybWF0OiBzdHJpbmc7XG4gICAgYXBwZW5kVGV4dEZvcm1hdE1hcms6IHN0cmluZztcbiAgICBhcHBlbmRUZXh0Rm9ybWF0TWFya1JvdzI6IHN0cmluZztcbiAgICBhcHBlbmRUZXh0Rm9ybWF0Q3JlYXRpb246IHN0cmluZztcbiAgICBhcHBlbmRUZXh0Rm9ybWF0QXBwZW5kOiBzdHJpbmc7XG4gICAgYXBwZW5kVGV4dEZvcm1hdEFwcGVuZFRleHQyOiBzdHJpbmc7XG4gICAgYXBwZW5kVGV4dEZvcm1hdEFwcGVuZFRleHQzOiBzdHJpbmc7XG4gICAgYXBwZW5kUmVtb3ZlQWxsVGFza3M6IGJvb2xlYW47XG4gICAgaW5jb21wbGV0ZVRhc2tWYWx1ZXM6IHN0cmluZztcbiAgICBpbmNvbXBsZXRlVGFza1ZhbHVlc1JvdzI6IHN0cmluZztcbiAgICBjeWNsZVRhc2tWYWx1ZXM6IHN0cmluZztcbiAgICBjeWNsZVRhc2tWYWx1ZXNMaXN0MTogc3RyaW5nO1xuICAgIGN5Y2xlVGFza1ZhbHVlc0xpc3QyOiBzdHJpbmc7XG4gICAgY3ljbGVUYXNrVmFsdWVzTGlzdDM6IHN0cmluZztcbiAgICBzdXBwb3J0Q2FuY2VsZWRUYXNrczogYm9vbGVhbjtcbiAgICBzdXBwb3J0Q3ljbGluZ1Rhc2tzUmV2ZXJzZWx5OiBib29sZWFuO1xuICAgIHN1cHBvcnRDeWNsaW5nV2l0aExpc3RJdGVtOiBib29sZWFuO1xuICAgIHN1cHBvcnRBcHBlbmRpbmdUZXh0QXV0b21hdGljYWxseTogYm9vbGVhbjtcbiAgICBhcHBlbmRUZXh0QXV0b0xpbmVEZWZhdWx0OiBzdHJpbmc7XG4gICAgYXBwZW5kVGV4dEF1dG9UYXNrRGVmYXVsdDogc3RyaW5nO1xuICAgIHByZXZpZXdPbkNsaWNrOiBib29sZWFuO1xuICAgIHJpZ2h0Q2xpY2tDb21wbGV0ZTogYm9vbGVhbjtcbiAgICByaWdodENsaWNrTWFyazogYm9vbGVhbjtcbiAgICByaWdodENsaWNrQ3ljbGU6IGJvb2xlYW47XG4gICAgcmlnaHRDbGlja0N5Y2xlTGlzdDE6IGJvb2xlYW47XG4gICAgcmlnaHRDbGlja0N5Y2xlTGlzdDI6IGJvb2xlYW47XG4gICAgcmlnaHRDbGlja0N5Y2xlTGlzdDM6IGJvb2xlYW47XG4gICAgcmlnaHRDbGlja0N5Y2xlUmV2ZXJzZWx5OiBib29sZWFuO1xuICAgIHJpZ2h0Q2xpY2tDcmVhdGU6IGJvb2xlYW47XG4gICAgcmlnaHRDbGlja0FwcGVuZDogYm9vbGVhbjtcbiAgICByaWdodENsaWNrQXBwZW5kVGV4dDI6IGJvb2xlYW47XG4gICAgcmlnaHRDbGlja0FwcGVuZFRleHQzOiBib29sZWFuO1xuICAgIHJpZ2h0Q2xpY2tBcHBlbmRUZXh0QXV0bzogYm9vbGVhbjtcbiAgICAvLyByaWdodENsaWNrTW92ZTogYm9vbGVhbjtcbiAgICByaWdodENsaWNrUmVzZXRUYXNrOiBib29sZWFuO1xuICAgIHJpZ2h0Q2xpY2tSZXNldEFsbDogYm9vbGVhbjtcbiAgICByaWdodENsaWNrVG9nZ2xlQWxsOiBib29sZWFuO1xuICAgIC8vIGNvbXBsZXRlZEFyZWFSZW1vdmVDaGVja2JveDogYm9vbGVhbjtcbiAgICBvbmx5TG93ZXJjYXNlWDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFRhc2tNYXJrZXJTZXR0aW5ncyA9IHtcbiAgICAvLyBjb21wbGV0ZWRBcmVhSGVhZGVyOiBcIiMjIExvZ1wiLFxuICAgIHJlbW92ZUV4cHJlc3Npb246IFwiXCIsXG4gICAgYXBwZW5kRGF0ZUZvcm1hdDogXCJcIixcbiAgICBhcHBlbmRUZXh0Rm9ybWF0TWFyazogXCJcIixcbiAgICBhcHBlbmRUZXh0Rm9ybWF0TWFya1JvdzI6IFwiXCIsXG4gICAgYXBwZW5kVGV4dEZvcm1hdENyZWF0aW9uOiBcIlwiLFxuICAgIGFwcGVuZFRleHRGb3JtYXRBcHBlbmQ6IFwiXCIsXG4gICAgYXBwZW5kVGV4dEZvcm1hdEFwcGVuZFRleHQyOiBcIlwiLFxuICAgIGFwcGVuZFRleHRGb3JtYXRBcHBlbmRUZXh0MzogXCJcIixcbiAgICBhcHBlbmRSZW1vdmVBbGxUYXNrczogZmFsc2UsXG4gICAgaW5jb21wbGV0ZVRhc2tWYWx1ZXM6IFwiIFwiLFxuICAgIGluY29tcGxldGVUYXNrVmFsdWVzUm93MjogXCJcIiwgLy8gRm9yIGNob29zaW5nIHdoZXRoZXIgdG8gc2hvdyBpbiB0aGUgc2Vjb25kIHJvd1xuICAgIGN5Y2xlVGFza1ZhbHVlczogXCJcIixcbiAgICBjeWNsZVRhc2tWYWx1ZXNMaXN0MTogXCJcIixcbiAgICBjeWNsZVRhc2tWYWx1ZXNMaXN0MjogXCJcIixcbiAgICBjeWNsZVRhc2tWYWx1ZXNMaXN0MzogXCJcIixcbiAgICBvbmx5TG93ZXJjYXNlWDogZmFsc2UsXG4gICAgc3VwcG9ydENhbmNlbGVkVGFza3M6IHRydWUsXG4gICAgc3VwcG9ydEN5Y2xpbmdUYXNrc1JldmVyc2VseTogZmFsc2UsXG4gICAgc3VwcG9ydEN5Y2xpbmdXaXRoTGlzdEl0ZW06IGZhbHNlLFxuICAgIHN1cHBvcnRBcHBlbmRpbmdUZXh0QXV0b21hdGljYWxseTogZmFsc2UsXG4gICAgYXBwZW5kVGV4dEF1dG9MaW5lRGVmYXVsdDogXCJub25lXCIsXG4gICAgYXBwZW5kVGV4dEF1dG9UYXNrRGVmYXVsdDogXCJub25lXCIsXG4gICAgcHJldmlld09uQ2xpY2s6IGZhbHNlLFxuICAgIHJpZ2h0Q2xpY2tDb21wbGV0ZTogZmFsc2UsXG4gICAgcmlnaHRDbGlja01hcms6IGZhbHNlLFxuICAgIHJpZ2h0Q2xpY2tDeWNsZTogZmFsc2UsXG4gICAgcmlnaHRDbGlja0N5Y2xlTGlzdDE6IGZhbHNlLFxuICAgIHJpZ2h0Q2xpY2tDeWNsZUxpc3QyOiBmYWxzZSxcbiAgICByaWdodENsaWNrQ3ljbGVMaXN0MzogZmFsc2UsXG4gICAgcmlnaHRDbGlja0N5Y2xlUmV2ZXJzZWx5OiBmYWxzZSxcbiAgICByaWdodENsaWNrQ3JlYXRlOiBmYWxzZSxcbiAgICByaWdodENsaWNrQXBwZW5kOiBmYWxzZSxcbiAgICByaWdodENsaWNrQXBwZW5kVGV4dDI6IGZhbHNlLFxuICAgIHJpZ2h0Q2xpY2tBcHBlbmRUZXh0MzogZmFsc2UsXG4gICAgcmlnaHRDbGlja0FwcGVuZFRleHRBdXRvOiBmYWxzZSxcbiAgICAvLyByaWdodENsaWNrTW92ZTogZmFsc2UsXG4gICAgcmlnaHRDbGlja1Jlc2V0VGFzazogZmFsc2UsXG4gICAgcmlnaHRDbGlja1Jlc2V0QWxsOiBmYWxzZSxcbiAgICByaWdodENsaWNrVG9nZ2xlQWxsOiBmYWxzZSxcbiAgICAvLyBjb21wbGV0ZWRBcmVhUmVtb3ZlQ2hlY2tib3g6IGZhbHNlLFxufTtcbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGlsZWRUYXNrc1NldHRpbmdzIHtcbiAgICByZW1vdmVSZWdFeHA6IFJlZ0V4cDtcbiAgICByZXNldFJlZ0V4cDogUmVnRXhwO1xuICAgIGluY29tcGxldGVUYXNrUmVnRXhwOiBSZWdFeHA7XG4gICAgaW5jb21wbGV0ZVRhc2tSZWdFeHBSb3cyOiBSZWdFeHA7XG4gICAgLy8gY3JlYXRlVGFza1JlZ0V4cDogUmVnRXhwOyAvLyBNYXliZSBub3QgbmVlZGVkXG4gICAgcmlnaHRDbGlja1Rhc2tNZW51OiBib29sZWFuO1xuICAgIGNvbXBsZXRlZFRhc2tzOiBzdHJpbmc7XG4gICAgY29tcGxldGVkVGFza1JlZ0V4cDogUmVnRXhwO1xuICAgIHJlZ2lzdGVySGFuZGxlcnM6IGJvb2xlYW47XG59XG4iLCAiaW1wb3J0IHsgQXBwLCBtb21lbnQsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7XG4gICAgVGFza01hcmtlclNldHRpbmdzLFxuICAgIC8vIERFRkFVTFRfU0VUVElOR1MsXG59IGZyb20gXCIuL3Rhc2ttYXJrZXItU2V0dGluZ3NcIjtcbmltcG9ydCB7IFRhc2tNYXJrZXIgfSBmcm9tIFwiLi90YXNrbWFya2VyLVRhc2tNYXJrZXJcIjtcbmltcG9ydCBUYXNrTWFya2VyUGx1Z2luIGZyb20gXCIuL21haW5cIjtcblxuZXhwb3J0IGNsYXNzIFRhc2tNYXJrZXJTZXR0aW5nc1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIHBsdWdpbjogVGFza01hcmtlclBsdWdpbjtcbiAgICB0YXNrTWFya2VyOiBUYXNrTWFya2VyO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGFwcDogQXBwLFxuICAgICAgICBwbHVnaW46IFRhc2tNYXJrZXJQbHVnaW4sXG4gICAgICAgIHRhc2tNYXJrZXI6IFRhc2tNYXJrZXJcbiAgICApIHtcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy50YXNrTWFya2VyID0gdGFza01hcmtlcjtcbiAgICB9XG5cbiAgICBkaXNwbGF5KCk6IHZvaWQge1xuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmVtcHR5KCk7XG5cbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJUYXNrIE1hcmtlclwiIH0pO1xuXG4gICAgICAgIGNvbnN0IHRlbXBTZXR0aW5nczogVGFza01hcmtlclNldHRpbmdzID0gT2JqZWN0LmFzc2lnbihcbiAgICAgICAgICAgIHRoaXMudGFza01hcmtlci5zZXR0aW5nc1xuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcImgzXCIsIHtcbiAgICAgICAgICAgIHRleHQ6IFwiUGxlYXNlIHRyeSByZW9wZW5pbmcgdGhlIHZhdWx0IG9yIHJlc3RhcnRpbmcgT2JzaWRpYW4gaWYgdGhlIGZvbGxvd2luZyBzZXR0aW5nIGNoYW5nZXMgZG8gbm90IHRha2UgZWZmZWN0LlwiLFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDJcIiwgeyB0ZXh0OiBcIkNyZWF0ZSB0YXNrc1wiIH0pO1xuXG4gICAgICAgIC8vIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJwXCIsIHtcbiAgICAgICAgLy8gICAgIHRleHQ6IFwiQ3JlYXRlZCB0YXNrcyBnYWluIHRyZWF0bWVudCBiYXNlZCBvbiB0aGUgc2V0dGluZ3MgYmVsb3cuXCIsXG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKHRoaXMuY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIkFwcGVuZCB0ZXh0IHRvIGNyZWF0ZWQgdGFza1wiKVxuICAgICAgICAgICAgLnNldERlc2MoXG4gICAgICAgICAgICAgICAgXCJEZWZhdWx0IGVtcHR5LiBJZiBzZXQgbm9uLWVtcHR5LCBhcHBlbmQgdGhlIHN0cmluZyBvZiBtb21lbnQuanMgZm9ybWF0IHRvIHRoZSBlbmQgb2YgdGhlIHRhc2sgdGV4dC5cIlxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLmFkZE1vbWVudEZvcm1hdCgobW9tZW50Rm9ybWF0KSA9PlxuICAgICAgICAgICAgICAgIG1vbWVudEZvcm1hdFxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJbXHVEODNEXHVEQ0REIF1ZWVlZLU1NLUREXCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0ZW1wU2V0dGluZ3MuYXBwZW5kVGV4dEZvcm1hdENyZWF0aW9uKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyeSBmb3JtYXR0aW5nIFwibm93XCIgd2l0aCB0aGUgc3BlY2lmaWVkIGZvcm1hdCBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb21lbnQoKS5mb3JtYXQodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBTZXR0aW5ncy5hcHBlbmRUZXh0Rm9ybWF0Q3JlYXRpb24gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2tNYXJrZXIudXBkYXRlU2V0dGluZ3ModGVtcFNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYEVycm9yIHBhcnNpbmcgc3BlY2lmaWVkIGRhdGUgZm9ybWF0OiAke3ZhbHVlfWBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcblxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmFwcGVuZENoaWxkKGNyZWF0ZUVsKFwiYVwiLCB7XG4gICAgICAgICAgICB0ZXh0OiAnbW9tZW50LmpzIGRvY3VtZW50YXRpb24uJywgaHJlZjogXCJodHRwczovL21vbWVudGpzLmNvbS9kb2NzXCIsIGNsczogJ2xpbmtJbmZvJ1xuICAgICAgICB9KSlcblxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDJcIiwgeyB0ZXh0OiBcIkNvbXBsZXRlIHRhc2tzXCIgfSk7XG5cbiAgICAgICAgLy8gdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcInBcIiwge1xuICAgICAgICAvLyAgICAgdGV4dDogXCJDb21wbGV0ZWQgdGFza3MgZ2FpbiB0cmVhdG1lbnQgYmFzZWQgb24gdGhlIHNldHRpbmdzIGJlbG93LlwiLFxuICAgICAgICAvLyB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyh0aGlzLmNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJPbmx5IHN1cHBvcnQgeCBmb3IgY29tcGxldGVkIHRhc2tzXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcbiAgICAgICAgICAgICAgICBcIk9ubHkgdXNlICd4JyAobG93ZXIgY2FzZSkgdG8gaW5kaWNhdGUgY29tcGxldGVkIHRhc2tzIChoaWRlIFggKHVwcGVyIGNhc2UpKS5cIlxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuICAgICAgICAgICAgICAgIHRvZ2dsZVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGVtcFNldHRpbmdzLm9ubHlMb3dlcmNhc2VYKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wU2V0dGluZ3Mub25seUxvd2VyY2FzZVggPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFza01hcmtlci51cGRhdGVTZXR0aW5ncyh0ZW1wU2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKHRoaXMuY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIlN1cHBvcnQgY2FuY2VsZWQgdGFza3NcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFxuICAgICAgICAgICAgICAgIFwiVXNlICctJyB0byBpbmRpY2F0ZSBjYW5jZWxlZCB0YXNrcy4gQ2FuY2VsZWQgdGFza3MgYXJlIHByb2Nlc3NlZCBpbiB0aGUgc2FtZSB3YXkgYXMgY29tcGxldGVkIHRhc2tzLlwiXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG4gICAgICAgICAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0ZW1wU2V0dGluZ3Muc3VwcG9ydENhbmNlbGVkVGFza3MpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBTZXR0aW5ncy5zdXBwb3J0Q2FuY2VsZWRUYXNrcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrTWFya2VyLnVwZGF0ZVNldHRpbmdzKHRlbXBTZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcodGhpcy5jb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiQXBwZW5kIHRleHQgdG8gY29tcGxldGVkIHRhc2tcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFxuICAgICAgICAgICAgICAgIFwiRGVmYXVsdCBlbXB0eS4gSWYgc2V0IG5vbi1lbXB0eSwgYXBwZW5kIHRoZSBzdHJpbmcgb2YgbW9tZW50LmpzIGZvcm1hdCB0byB0aGUgZW5kIG9mIHRoZSB0YXNrIHRleHQuXCJcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5hZGRNb21lbnRGb3JtYXQoKG1vbWVudEZvcm1hdCkgPT5cbiAgICAgICAgICAgICAgICBtb21lbnRGb3JtYXRcbiAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiW1x1MjcwNSBdWVlZWS1NTS1ERFwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGVtcFNldHRpbmdzLmFwcGVuZERhdGVGb3JtYXQpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJ5IGZvcm1hdHRpbmcgXCJub3dcIiB3aXRoIHRoZSBzcGVjaWZpZWQgZm9ybWF0IHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vbWVudCgpLmZvcm1hdCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFNldHRpbmdzLmFwcGVuZERhdGVGb3JtYXQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2tNYXJrZXIudXBkYXRlU2V0dGluZ3ModGVtcFNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYEVycm9yIHBhcnNpbmcgc3BlY2lmaWVkIGRhdGUgZm9ybWF0OiAke3ZhbHVlfWBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAvLyBuZXcgU2V0dGluZyh0aGlzLmNvbnRhaW5lckVsKVxuICAgICAgICAvLyAgICAgLnNldE5hbWUoXCJSZW1vdmUgdGV4dCBpbiBjb21wbGV0ZWQgdGFza1wiKVxuICAgICAgICAvLyAgICAgLnNldERlc2MoXG4gICAgICAgIC8vICAgICAgICAgXCJUZXh0IG1hdGNoaW5nIHRoaXMgcmVndWxhciBleHByZXNzaW9uIHNob3VsZCBiZSByZW1vdmVkIGZyb20gdGhlIHRhc2sgdGV4dC4gQmUgY2FyZWZ1bCEgVGVzdCB5b3VyIGV4cHJlc3Npb24gZmlyc3QuIFRoZSBnbG9iYWwgZmxhZywgJ2cnIGlzIHVzZWQgZm9yIGEgcGVyLWxpbmUgbWF0Y2guXCJcbiAgICAgICAgLy8gICAgIClcbiAgICAgICAgLy8gICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxuICAgICAgICAvLyAgICAgICAgIHRleHRcbiAgICAgICAgLy8gICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiICModG9kb3x0YXNrKVwiKVxuICAgICAgICAvLyAgICAgICAgICAgICAuc2V0VmFsdWUodGVtcFNldHRpbmdzLnJlbW92ZUV4cHJlc3Npb24pXG4gICAgICAgIC8vICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgLy8gdHJ5IGNvbXBpbGluZyB0aGUgcmVndWxhciBleHByZXNzaW9uXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrTWFya2VyLnRyeUNyZWF0ZVJlbW92ZVJlZ2V4KHZhbHVlKTtcblxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRlbXBTZXR0aW5ncy5yZW1vdmVFeHByZXNzaW9uID0gdmFsdWU7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrTWFya2VyLnVwZGF0ZVNldHRpbmdzKHRlbXBTZXR0aW5ncyk7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIGBFcnJvciBwYXJzaW5nIHJlZ3VsYXIgZXhwcmVzc2lvbiBmb3IgdGV4dCByZXBsYWNlbWVudDogJHt2YWx1ZX1gXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH1cbiAgICAgICAgLy8gICAgICAgICAgICAgfSlcbiAgICAgICAgLy8gICAgICk7XG5cbiAgICAgICAgLy8gbmV3IFNldHRpbmcodGhpcy5jb250YWluZXJFbClcbiAgICAgICAgLy8gICAgIC5zZXROYW1lKFwiQXBwbHkgdGhlc2Ugc2V0dGluZ3MgdG8gYWxsIHRhc2tzXCIpXG4gICAgICAgIC8vICAgICAuc2V0RGVzYyhcbiAgICAgICAgLy8gICAgICAgICBcIkFwcGVuZCBhbmQgcmVtb3ZlIHRleHQgYXMgY29uZmlndXJlZCBhYm92ZSB3aGVuIG1hcmtpbmcgdGFza3Mgd2l0aCBhbnl0aGluZyBvdGhlciB0aGFuIGEgc3BhY2UgKHRvIHJlc2V0KS5cIlxuICAgICAgICAvLyAgICAgKVxuICAgICAgICAvLyAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuICAgICAgICAvLyAgICAgICAgIHRvZ2dsZVxuICAgICAgICAvLyAgICAgICAgICAgICAuc2V0VmFsdWUodGVtcFNldHRpbmdzLmFwcGVuZFJlbW92ZUFsbFRhc2tzKVxuICAgICAgICAvLyAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICB0ZW1wU2V0dGluZ3MuYXBwZW5kUmVtb3ZlQWxsVGFza3MgPSB2YWx1ZTtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHRoaXMudGFza01hcmtlci51cGRhdGVTZXR0aW5ncyh0ZW1wU2V0dGluZ3MpO1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIC8vICAgICAgICAgICAgIH0pXG4gICAgICAgIC8vICAgICApO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJNYXJrIHRhc2tzXCIgfSk7XG5cbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcInBcIiwge1xuICAgICAgICAgICAgdGV4dDogXCJOb3RlIHRoYXQgaWYgYSBtYXJrIGNvbnRhaW5zIGJvdGggaW4gcm93IDEgYW5kIHJvdyAyLCB0aGVuIHRoZSBtYXJrIHdvdWxkIHdvcmsgYXMgc3BlY2lmaWVkIGluIHJvdyAxLlwiLFxuICAgICAgICB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyh0aGlzLmNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJBZGRpdGlvbmFsIHRhc2sgc3RhdHVzZXMgKHJvdyAxKVwiKVxuICAgICAgICAgICAgLnNldERlc2MoXG4gICAgICAgICAgICAgICAgXCJTcGVjaWZ5IHRoZSBzZXQgb2YgY2hhcmFjdGVycyB0aGF0IGluZGljYXRlIGluLXByb2dyZXNzIG9yIGluY29tcGxldGUgdGFza3MsIGUuZy4gJ2k+IT9EJy4gQWxsIG9mIHRoZW0gKGV4Y2x1ZGluZyB0aGUgZmlyc3Qgb3BlbiBzdGF0dXMpIGNhbiBiZSBhc3NpZ25lZCB3aXRoIGhvdGtleXMuXCJcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxuICAgICAgICAgICAgICAgIHRleHRcbiAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiPiE/XCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0ZW1wU2V0dGluZ3MuaW5jb21wbGV0ZVRhc2tWYWx1ZXMpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5jb250YWlucyhcInhcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFNldCBvZiBjaGFyYWN0ZXJzIHNob3VsZCBub3QgY29udGFpbiB0aGUgbWFya2VyIGZvciBjb21wbGV0ZWQgdGFza3MgKHgpOiAke3ZhbHVlfWBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhdGVtcFNldHRpbmdzLm9ubHlMb3dlcmNhc2VYICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuY29udGFpbnMoXCJYXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFNldCBvZiBjaGFyYWN0ZXJzIHNob3VsZCBub3QgY29udGFpbiB0aGUgbWFya2VyIGZvciBjb21wbGV0ZWQgdGFza3MgKFgpOiAke3ZhbHVlfWBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wU2V0dGluZ3Muc3VwcG9ydENhbmNlbGVkVGFza3MgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5jb250YWlucyhcIi1cIilcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgU2V0IG9mIGNoYXJhY3RlcnMgc2hvdWxkIG5vdCBjb250YWluIHRoZSBtYXJrZXIgZm9yIGNhbmNlbGVkIHRhc2tzICgtKTogJHt2YWx1ZX1gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWx1ZS5jb250YWlucyhcIiBcIikpIHsgLy8gTm90IHdvcmtpbmcgaWYgcmVtb3ZlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtYWtlIHN1cmUgc3BhY2UgaXMgaW5jbHVkZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBcIiBcIiArIHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wU2V0dGluZ3MuaW5jb21wbGV0ZVRhc2tWYWx1ZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2tNYXJrZXIudXBkYXRlU2V0dGluZ3ModGVtcFNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBuZXcgU2V0dGluZyh0aGlzLmNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJBcHBlbmQgdGV4dCB0byBtYXJrZWQgdGFzayAocm93IDEpXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcbiAgICAgICAgICAgICAgICBcIkRlZmF1bHQgZW1wdHkuIElmIHNldCBub24tZW1wdHksIGFwcGVuZCB0aGUgc3RyaW5nIG9mIG1vbWVudC5qcyBmb3JtYXQgdG8gdGhlIGVuZCBvZiB0aGUgdGFzayB0ZXh0LlwiXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAuYWRkTW9tZW50Rm9ybWF0KChtb21lbnRGb3JtYXQpID0+XG4gICAgICAgICAgICAgICAgbW9tZW50Rm9ybWF0XG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcIltcdTI3NEUgXVlZWVktTU0tRERcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRlbXBTZXR0aW5ncy5hcHBlbmRUZXh0Rm9ybWF0TWFyaylcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUcnkgZm9ybWF0dGluZyBcIm5vd1wiIHdpdGggdGhlIHNwZWNpZmllZCBmb3JtYXQgc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9tZW50KCkuZm9ybWF0KHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wU2V0dGluZ3MuYXBwZW5kVGV4dEZvcm1hdE1hcmsgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2tNYXJrZXIudXBkYXRlU2V0dGluZ3ModGVtcFNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYEVycm9yIHBhcnNpbmcgc3BlY2lmaWVkIGRhdGUgZm9ybWF0OiAke3ZhbHVlfWBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIG5ldyBTZXR0aW5nKHRoaXMuY29udGFpbmVyRWwpXG4gICAgICAgIC5zZXROYW1lKFwiQWRkaXRpb25hbCB0YXNrIHN0YXR1c2VzIChyb3cgMilcIilcbiAgICAgICAgLnNldERlc2MoXG4gICAgICAgICAgICBcIlNwZWNpZnkgdGhlIHNldCBvZiBjaGFyYWN0ZXJzIHRoYXQgaW5kaWNhdGUgdGFzayBzdGF0dXNlcywgZS5nLiAnUmlwJy4gQWxsIG9mIHRoZW0gY2FuIGJlIGFzc2lnbmVkIHdpdGggaG90a2V5cy5cIlxuICAgICAgICApXG4gICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxuICAgICAgICAgICAgdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcIlJpcFwiKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0ZW1wU2V0dGluZ3MuaW5jb21wbGV0ZVRhc2tWYWx1ZXNSb3cyKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmNvbnRhaW5zKFwieFwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYFNldCBvZiBjaGFyYWN0ZXJzIHNob3VsZCBub3QgY29udGFpbiB0aGUgbWFya2VyIGZvciBjb21wbGV0ZWQgdGFza3MgKHgpOiAke3ZhbHVlfWBcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAhdGVtcFNldHRpbmdzLm9ubHlMb3dlcmNhc2VYICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5jb250YWlucyhcIlhcIilcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgU2V0IG9mIGNoYXJhY3RlcnMgc2hvdWxkIG5vdCBjb250YWluIHRoZSBtYXJrZXIgZm9yIGNvbXBsZXRlZCB0YXNrcyAoWCk6ICR7dmFsdWV9YFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBTZXR0aW5ncy5zdXBwb3J0Q2FuY2VsZWRUYXNrcyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuY29udGFpbnMoXCItXCIpXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYFNldCBvZiBjaGFyYWN0ZXJzIHNob3VsZCBub3QgY29udGFpbiB0aGUgbWFya2VyIGZvciBjYW5jZWxlZCB0YXNrcyAoLSk6ICR7dmFsdWV9YFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBTZXR0aW5ncy5pbmNvbXBsZXRlVGFza1ZhbHVlc1JvdzIgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFza01hcmtlci51cGRhdGVTZXR0aW5ncyh0ZW1wU2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgbmV3IFNldHRpbmcodGhpcy5jb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiQXBwZW5kIHRleHQgdG8gbWFya2VkIHRhc2sgKHJvdyAyKVwiKVxuICAgICAgICAgICAgLnNldERlc2MoXG4gICAgICAgICAgICAgICAgXCJEZWZhdWx0IGVtcHR5LiBJZiBzZXQgbm9uLWVtcHR5LCBhcHBlbmQgdGhlIHN0cmluZyBvZiBtb21lbnQuanMgZm9ybWF0IHRvIHRoZSBlbmQgb2YgdGhlIHRhc2sgdGV4dC5cIlxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLmFkZE1vbWVudEZvcm1hdCgobW9tZW50Rm9ybWF0KSA9PlxuICAgICAgICAgICAgICAgIG1vbWVudEZvcm1hdFxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJZWVlZLU1NLUREXCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0ZW1wU2V0dGluZ3MuYXBwZW5kVGV4dEZvcm1hdE1hcmtSb3cyKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyeSBmb3JtYXR0aW5nIFwibm93XCIgd2l0aCB0aGUgc3BlY2lmaWVkIGZvcm1hdCBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb21lbnQoKS5mb3JtYXQodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBTZXR0aW5ncy5hcHBlbmRUZXh0Rm9ybWF0TWFya1JvdzIgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2tNYXJrZXIudXBkYXRlU2V0dGluZ3ModGVtcFNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYEVycm9yIHBhcnNpbmcgc3BlY2lmaWVkIGRhdGUgZm9ybWF0OiAke3ZhbHVlfWBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwiQ3ljbGUgdGFza3NcIiB9KTtcblxuICAgICAgICAvLyB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwicFwiLCB7XG4gICAgICAgIC8vICAgICB0ZXh0OiBcIkN5Y2xlZCB0YXNrcyBnYWluIHRyZWF0bWVudCBiYXNlZCBvbiB0aGUgc2V0dGluZ3MgYmVsb3cuXCIsXG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKHRoaXMuY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIkN5Y2xlZCB0YXNrIChtYWluKVwiKVxuICAgICAgICAgICAgLnNldERlc2MoXG4gICAgICAgICAgICAgICAgXCJTcGVjaWZ5IGEgc2V0IG9mIGNoYXJhY3RlcnMgdGhhdCBpbmRpY2F0ZSBhbnkgdGFzayBzdGF0dXNlcywgZS5nLiAneC0gUmlwPicuXCJcbiAgICAgICAgKVxuICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT5cbiAgICAgICAgICAgIHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJ4LSBSaXBcIilcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGVtcFNldHRpbmdzLmN5Y2xlVGFza1ZhbHVlcylcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBTZXR0aW5ncy5jeWNsZVRhc2tWYWx1ZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrTWFya2VyLnVwZGF0ZVNldHRpbmdzKHRlbXBTZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcodGhpcy5jb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiU3VwcG9ydCBjeWNsaW5nIHRhc2sgcmV2ZXJzZWx5IChtYWluKVwiKVxuICAgICAgICAgICAgLnNldERlc2MoXG4gICAgICAgICAgICAgICAgXCJEZWZhdWx0IGRpc2FibGVkLiBJZiBlbmFibGVkLCBhIGNvbW1hbmQgd291bGQgYmUgYWRkZWQgdG8gY3ljbGUgcmV2ZXJzZWx5IGFtb25nIHRoZSBzdGF0dXNlcyBhcyBzcGVjaWZpZWQgYWJvdmUuXCJcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cbiAgICAgICAgICAgICAgICB0b2dnbGVcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRlbXBTZXR0aW5ncy5zdXBwb3J0Q3ljbGluZ1Rhc2tzUmV2ZXJzZWx5KVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wU2V0dGluZ3Muc3VwcG9ydEN5Y2xpbmdUYXNrc1JldmVyc2VseSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrTWFya2VyLnVwZGF0ZVNldHRpbmdzKHRlbXBTZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgICAgICBuZXcgU2V0dGluZyh0aGlzLmNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJDeWNsZWQgdGFzayAobGlzdCAxKVwiKVxuICAgICAgICAgICAgLnNldERlc2MoXG4gICAgICAgICAgICAgICAgXCJTcGVjaWZ5IGFuIGFkZGl0aW9uYWwgbGlzdCBvZiBjaGFyYWN0ZXJzIHRoYXQgaW5kaWNhdGUgYW55IHRhc2sgc3RhdHVzZXMuXCJcbiAgICAgICAgKVxuICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT5cbiAgICAgICAgICAgIHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJhYlwiKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0ZW1wU2V0dGluZ3MuY3ljbGVUYXNrVmFsdWVzTGlzdDEpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wU2V0dGluZ3MuY3ljbGVUYXNrVmFsdWVzTGlzdDEgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrTWFya2VyLnVwZGF0ZVNldHRpbmdzKHRlbXBTZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICAgIG5ldyBTZXR0aW5nKHRoaXMuY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIkN5Y2xlZCB0YXNrIChsaXN0IDIpXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcbiAgICAgICAgICAgICAgICBcIlNwZWNpZnkgYW4gYWRkaXRpb25hbCBsaXN0IG9mIGNoYXJhY3RlcnMgdGhhdCBpbmRpY2F0ZSBhbnkgdGFzayBzdGF0dXNlcy5cIlxuICAgICAgICApXG4gICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxuICAgICAgICAgICAgdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcImNkXCIpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRlbXBTZXR0aW5ncy5jeWNsZVRhc2tWYWx1ZXNMaXN0MilcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBTZXR0aW5ncy5jeWNsZVRhc2tWYWx1ZXNMaXN0MiA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2tNYXJrZXIudXBkYXRlU2V0dGluZ3ModGVtcFNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgICAgbmV3IFNldHRpbmcodGhpcy5jb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiQ3ljbGVkIHRhc2sgKGxpc3QgMylcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFxuICAgICAgICAgICAgICAgIFwiU3BlY2lmeSBhbiBhZGRpdGlvbmFsIGxpc3Qgb2YgY2hhcmFjdGVycyB0aGF0IGluZGljYXRlIGFueSB0YXNrIHN0YXR1c2VzLlwiXG4gICAgICAgIClcbiAgICAgICAgLmFkZFRleHQoKHRleHQpID0+XG4gICAgICAgICAgICB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiZWZcIilcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGVtcFNldHRpbmdzLmN5Y2xlVGFza1ZhbHVlc0xpc3QzKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcFNldHRpbmdzLmN5Y2xlVGFza1ZhbHVlc0xpc3QzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFza01hcmtlci51cGRhdGVTZXR0aW5ncyh0ZW1wU2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKHRoaXMuY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIlN1cHBvcnQgY3ljbGluZyB3aXRoIGxpc3QgaXRlbVwiKVxuICAgICAgICAgICAgLnNldERlc2MoXG4gICAgICAgICAgICAgICAgXCJEZWZhdWx0IGRpc2FibGVkLiBJZiBlbmFibGVkLCBsaXN0IGl0ZW0gd291bGQgYmUgaW5jbHVkZWQgYXMgdGhlIGZpcnN0IGN5Y2xlZCBzdGF0dXMuXCJcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cbiAgICAgICAgICAgICAgICB0b2dnbGVcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRlbXBTZXR0aW5ncy5zdXBwb3J0Q3ljbGluZ1dpdGhMaXN0SXRlbSlcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFNldHRpbmdzLnN1cHBvcnRDeWNsaW5nV2l0aExpc3RJdGVtID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2tNYXJrZXIudXBkYXRlU2V0dGluZ3ModGVtcFNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwiQXBwZW5kIHRleHRcIiB9KTtcblxuICAgICAgICAvLyB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwicFwiLCB7XG4gICAgICAgIC8vICAgICB0ZXh0OiBcIkFwcGVuZGVkIHRleHQgZ2FpbnMgdHJlYXRtZW50IGJhc2VkIG9uIHRoZSBzZXR0aW5ncyBiZWxvdy5cIixcbiAgICAgICAgLy8gfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcodGhpcy5jb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiQXBwZW5kIHRleHQgdG8gYW55IGxpbmUgKHRleHQgMSlcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFxuICAgICAgICAgICAgICAgIFwiRGVmYXVsdCBlbXB0eS4gSWYgc2V0IG5vbi1lbXB0eSwgYXBwZW5kIHRoZSBzdHJpbmcgb2YgbW9tZW50LmpzIGZvcm1hdCB0byB0aGUgZW5kIG9mIHRoZSBsaW5lIHRleHQuXCJcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5hZGRNb21lbnRGb3JtYXQoKG1vbWVudEZvcm1hdCkgPT5cbiAgICAgICAgICAgICAgICBtb21lbnRGb3JtYXRcbiAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiW1x1RDgzRFx1RENERCBdWVlZWS1NTS1ERFwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGVtcFNldHRpbmdzLmFwcGVuZFRleHRGb3JtYXRBcHBlbmQpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJ5IGZvcm1hdHRpbmcgXCJub3dcIiB3aXRoIHRoZSBzcGVjaWZpZWQgZm9ybWF0IHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vbWVudCgpLmZvcm1hdCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFNldHRpbmdzLmFwcGVuZFRleHRGb3JtYXRBcHBlbmQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2tNYXJrZXIudXBkYXRlU2V0dGluZ3ModGVtcFNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYEVycm9yIHBhcnNpbmcgc3BlY2lmaWVkIGRhdGUgZm9ybWF0OiAke3ZhbHVlfWBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgbmV3IFNldHRpbmcodGhpcy5jb250YWluZXJFbClcbiAgICAgICAgLnNldE5hbWUoXCJBcHBlbmQgdGV4dCB0byBhbnkgbGluZSAodGV4dCAyKVwiKVxuICAgICAgICAuc2V0RGVzYyhcbiAgICAgICAgICAgIFwiRGVmYXVsdCBlbXB0eS4gSWYgc2V0IG5vbi1lbXB0eSwgYXBwZW5kIHRoZSBzdHJpbmcgb2YgbW9tZW50LmpzIGZvcm1hdCB0byB0aGUgZW5kIG9mIHRoZSBsaW5lIHRleHQuXCJcbiAgICAgICAgKVxuICAgICAgICAuYWRkTW9tZW50Rm9ybWF0KChtb21lbnRGb3JtYXQpID0+XG4gICAgICAgICAgICBtb21lbnRGb3JtYXRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJbXHUyNzA1IF1ZWVlZLU1NLUREXCIpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRlbXBTZXR0aW5ncy5hcHBlbmRUZXh0Rm9ybWF0QXBwZW5kVGV4dDIpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJ5IGZvcm1hdHRpbmcgXCJub3dcIiB3aXRoIHRoZSBzcGVjaWZpZWQgZm9ybWF0IHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9tZW50KCkuZm9ybWF0KHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBTZXR0aW5ncy5hcHBlbmRUZXh0Rm9ybWF0QXBwZW5kVGV4dDIgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFza01hcmtlci51cGRhdGVTZXR0aW5ncyh0ZW1wU2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBFcnJvciBwYXJzaW5nIHNwZWNpZmllZCBkYXRlIGZvcm1hdDogJHt2YWx1ZX1gXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgICAgICBuZXcgU2V0dGluZyh0aGlzLmNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJBcHBlbmQgdGV4dCB0byBhbnkgbGluZSAodGV4dCAzKVwiKVxuICAgICAgICAgICAgLnNldERlc2MoXG4gICAgICAgICAgICAgICAgXCJEZWZhdWx0IGVtcHR5LiBJZiBzZXQgbm9uLWVtcHR5LCBhcHBlbmQgdGhlIHN0cmluZyBvZiBtb21lbnQuanMgZm9ybWF0IHRvIHRoZSBlbmQgb2YgdGhlIGxpbmUgdGV4dC5cIlxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLmFkZE1vbWVudEZvcm1hdCgobW9tZW50Rm9ybWF0KSA9PlxuICAgICAgICAgICAgICAgIG1vbWVudEZvcm1hdFxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJbXHUyNzRFIF1ZWVlZLU1NLUREXCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0ZW1wU2V0dGluZ3MuYXBwZW5kVGV4dEZvcm1hdEFwcGVuZFRleHQzKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyeSBmb3JtYXR0aW5nIFwibm93XCIgd2l0aCB0aGUgc3BlY2lmaWVkIGZvcm1hdCBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb21lbnQoKS5mb3JtYXQodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBTZXR0aW5ncy5hcHBlbmRUZXh0Rm9ybWF0QXBwZW5kVGV4dDMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2tNYXJrZXIudXBkYXRlU2V0dGluZ3ModGVtcFNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYEVycm9yIHBhcnNpbmcgc3BlY2lmaWVkIGRhdGUgZm9ybWF0OiAke3ZhbHVlfWBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwiQXBwZW5kIHRleHQgYXV0b21hdGljYWxseVwiIH0pO1xuXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJwXCIsIHtcbiAgICAgICAgICAgIHRleHQ6IFwiVGhlIHNldHRpbmdzIGJlbG93IGNvcnJlc3BvbmQgdG8gdGhlIGNvbW1hbmQgXFxcIkFwcGVuZCB0ZXh0IGF1dG9tYXRpY2FsbHlcXFwiLlwiXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuYXBwZW5kQ2hpbGQoY3JlYXRlRWwoXCJhXCIsIHtcbiAgICAgICAgICAgIHRleHQ6ICdTZWUgXFxcIlNldHRpbmcubWRcXFwiIGZvciBkZXRhaWxzLicsIGhyZWY6IFwiaHR0cHM6Ly9naXRodWIuY29tL3dlbmx6aGFuZy9vYnNpZGlhbi10YXNrLW1hcmtlci9ibG9iL21haW4vZG9jcy9TZXR0aW5nLm1kXCIsIGNsczogJ2xpbmtJbmZvJ1xuICAgICAgICB9KSlcblxuICAgICAgICBuZXcgU2V0dGluZyh0aGlzLmNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJBcHBlbmQgdGV4dCB0byBhIHRhc2sgYXV0b21hdGljYWxseVwiKVxuICAgICAgICAgICAgLnNldERlc2MoXG4gICAgICAgICAgICAgICAgXCJEZWZhdWx0IGZhbHNlLiBJZiBzZXQgdHJ1ZSwgYXV0b21hdGljYWxseSBhcHBlbmQgdGV4dCB0byB0YXNrcyBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgdGFzayBzdGF0dXMuXCJcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cbiAgICAgICAgICAgICAgICB0b2dnbGVcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRlbXBTZXR0aW5ncy5zdXBwb3J0QXBwZW5kaW5nVGV4dEF1dG9tYXRpY2FsbHkpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBTZXR0aW5ncy5zdXBwb3J0QXBwZW5kaW5nVGV4dEF1dG9tYXRpY2FsbHkgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFza01hcmtlci51cGRhdGVTZXR0aW5ncyh0ZW1wU2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcodGhpcy5jb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiU2V0IGZvciBhIG1hcmtlZCB0YXNrIHRoZSBkZWZhdWx0IHRleHQgdG8gYXBwZW5kIGF1dG9tYXRpY2FsbHlcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFxuICAgICAgICAgICAgICAgIFwiTm90ZSB0aGF0IHRoaXMgcmVxdWlyZXMgXFxcIkFwcGVuZCB0ZXh0IHRvIGEgdGFzayBhdXRvbWF0aWNhbGx5XFxcIiBiZSBlbmFibGVkLiBEZWZhdWx0IFxcXCJOb25lXFxcIi5cIlxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT5cbiAgICAgICAgICAgICAgICBkcm9wZG93blxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwibm9uZVwiLCBcIk5vbmVcIilcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcInRleHQtcm93cy0xLTJcIiwgXCJBcHBlbmQgdGV4dCBhY2NvcmRpbmcgdG8gaW5kaXZpZHVhbCByb3dzXCIpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJ0ZXh0LXJvdy1zdHJpbmdcIiwgXCJBcHBlbmQgdGV4dCBhY2NvcmRpbmcgdG8gdGhlIHJvdyB3aXRoIHN0cmluZ1wiKVxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwidGV4dC1yb3ctMVwiLCBcIkFwcGVuZCB0ZXh0IGFsd2F5cyBhY2NvcmRpbmcgdG8gcm93IDFcIilcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcInRleHQtcm93LTJcIiwgXCJBcHBlbmQgdGV4dCBhbHdheXMgYWNjb3JkaW5nIHRvIHJvdyAyXCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0ZW1wU2V0dGluZ3MuYXBwZW5kVGV4dEF1dG9UYXNrRGVmYXVsdClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogXCJub25lXCIgfCBcInRleHQtcm93cy0xLTJcIiB8IFwidGV4dC1yb3ctc3RyaW5nXCIgfCBcInRleHQtcm93LTFcIiB8IFwidGV4dC1yb3ctMlwiKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wU2V0dGluZ3MuYXBwZW5kVGV4dEF1dG9UYXNrRGVmYXVsdCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrTWFya2VyLnVwZGF0ZVNldHRpbmdzKHRlbXBTZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcodGhpcy5jb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiU2V0IGZvciBhIG5vbi10YXNrIGxpbmUgdGhlIGRlZmF1bHQgdGV4dCB0byBhcHBlbmQgYXV0b21hdGljYWxseVwiKVxuICAgICAgICAgICAgLnNldERlc2MoXG4gICAgICAgICAgICAgICAgXCJOb3RlIHRoYXQgdGhpcyByZXF1aXJlcyBcXFwiQXBwZW5kIHRleHQgdG8gYSB0YXNrIGF1dG9tYXRpY2FsbHlcXFwiIGJlIGVuYWJsZWQuIERlZmF1bHQgXFxcIk5vbmVcXFwiLlwiXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PlxuICAgICAgICAgICAgICAgIGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJub25lXCIsIFwiTm9uZVwiKVxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwidGV4dC0xXCIsIFwiQXBwZW5kIHRleHQgdG8gYW55IGxpbmUgKHRleHQgMSlcIilcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcInRleHQtMlwiLCBcIkFwcGVuZCB0ZXh0IHRvIGFueSBsaW5lICh0ZXh0IDIpXCIpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJ0ZXh0LTNcIiwgXCJBcHBlbmQgdGV4dCB0byBhbnkgbGluZSAodGV4dCAzKVwiKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGVtcFNldHRpbmdzLmFwcGVuZFRleHRBdXRvTGluZURlZmF1bHQpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IFwibm9uZVwiIHwgXCJ0ZXh0LTFcIiB8IFwidGV4dC0yXCIgfCBcInRleHQtM1wiKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wU2V0dGluZ3MuYXBwZW5kVGV4dEF1dG9MaW5lRGVmYXVsdCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrTWFya2VyLnVwZGF0ZVNldHRpbmdzKHRlbXBTZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICAvLyB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDJcIiwgeyB0ZXh0OiBcIk1vdmluZyBjb21wbGV0ZWQgdGFza3NcIiB9KTtcblxuICAgICAgICAvLyBuZXcgU2V0dGluZyh0aGlzLmNvbnRhaW5lckVsKVxuICAgICAgICAvLyAgICAgLnNldE5hbWUoXCJDb21wbGV0ZWQgYXJlYSBoZWFkZXJcIilcbiAgICAgICAgLy8gICAgIC5zZXREZXNjKFxuICAgICAgICAvLyAgICAgICAgIGBDb21wbGV0ZWQgKG9yIGNhbmNlbGVkKSB0YXNrcyB3aWxsIGJlIGluc2VydGVkIHVuZGVyIHRoZSBzcGVjaWZpZWQgaGVhZGVyIChtb3N0IHJlY2VudCBhdCB0aGUgdG9wKS4gV2hlbiBzY2FubmluZyB0aGUgZG9jdW1lbnQgZm9yIGNvbXBsZXRlZC9jYW5jZWxlZCB0YXNrcywgdGhlIGNvbnRlbnRzIGZyb20gdGhpcyBjb25maWd1cmVkIGhlYWRlciB0byB0aGUgbmV4dCBoZWFkaW5nIG9yIHNlcGFyYXRvciAoLS0tKSB3aWxsIGJlIGlnbm9yZWQuIFRoaXMgaGVhZGluZyB3aWxsIGJlIGNyZWF0ZWQgaWYgdGhlIGNvbW1hbmQgaXMgaW52b2tlZCBhbmQgdGhlIGhlYWRpbmcgZG9lcyBub3QgZXhpc3QuIFRoZSBkZWZhdWx0IGhlYWRpbmcgaXMgJyR7REVGQVVMVF9TRVRUSU5HUy5jb21wbGV0ZWRBcmVhSGVhZGVyfScuYFxuICAgICAgICAvLyAgICAgKVxuICAgICAgICAvLyAgICAgLmFkZFRleHQoKHRleHQpID0+XG4gICAgICAgIC8vICAgICAgICAgdGV4dFxuICAgICAgICAvLyAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCIjIyBMb2dcIilcbiAgICAgICAgLy8gICAgICAgICAgICAgLnNldFZhbHVlKHRlbXBTZXR0aW5ncy5jb21wbGV0ZWRBcmVhSGVhZGVyKVxuICAgICAgICAvLyAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICB0ZW1wU2V0dGluZ3MuY29tcGxldGVkQXJlYUhlYWRlciA9IHZhbHVlLnRyaW0oKTtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHRoaXMudGFza01hcmtlci51cGRhdGVTZXR0aW5ncyh0ZW1wU2V0dGluZ3MpO1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIC8vICAgICAgICAgICAgIH0pXG4gICAgICAgIC8vICAgICApO1xuXG4gICAgICAgIC8vIG5ldyBTZXR0aW5nKHRoaXMuY29udGFpbmVyRWwpXG4gICAgICAgIC8vICAgICAuc2V0TmFtZShcIlJlbW92ZSB0aGUgY2hlY2tib3ggZnJvbSBtb3ZlZCB0YXNrc1wiKVxuICAgICAgICAvLyAgICAgLnNldERlc2MoXG4gICAgICAgIC8vICAgICAgICAgYFJlbW92ZSB0aGUgY2hlY2tib3ggZnJvbSBjb21wbGV0ZWQgKG9yIGNhbmNlbGVkKSB0YXNrcyBkdXJpbmcgdGhlIG1vdmUgdG8gdGhlIGNvbXBsZXRlZCBhcmVhLiBUaGlzIHRyYW5zZm9ybXMgdGFza3MgaW50byBub3JtYWwgbGlzdCBpdGVtcy4gVGFzayBNYXJrZXIgd2lsbCBub3QgYmUgYWJsZSB0byByZXNldCB0aGVzZSBpdGVtcy4gVGhleSBhbHNvIHdpbGwgbm90IGFwcGVhciBpbiB0YXNrIHNlYXJjaGVzIG9yIHF1ZXJpZXMuIFRoZSBkZWZhdWx0IHZhbHVlIGlzOiAnJHtERUZBVUxUX1NFVFRJTkdTLmNvbXBsZXRlZEFyZWFSZW1vdmVDaGVja2JveH0nLmBcbiAgICAgICAgLy8gICAgIClcbiAgICAgICAgLy8gICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cbiAgICAgICAgLy8gICAgICAgICB0b2dnbGVcbiAgICAgICAgLy8gICAgICAgICAgICAgLnNldFZhbHVlKHRlbXBTZXR0aW5ncy5jb21wbGV0ZWRBcmVhUmVtb3ZlQ2hlY2tib3gpXG4gICAgICAgIC8vICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHRlbXBTZXR0aW5ncy5jb21wbGV0ZWRBcmVhUmVtb3ZlQ2hlY2tib3ggPSB2YWx1ZTtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHRoaXMudGFza01hcmtlci51cGRhdGVTZXR0aW5ncyh0ZW1wU2V0dGluZ3MpO1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIC8vICAgICAgICAgICAgIH0pXG4gICAgICAgIC8vICAgICApO1xuXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMlwiLCB7XG4gICAgICAgICAgICB0ZXh0OiBcIk1hcmsgdGFza3MgdXNpbmcgbWVudSBpdGVtc1wiLFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwicFwiLCB7XG4gICAgICAgICAgICB0ZXh0OiBcIlRoZSBmb2xsb3dpbmcgc2V0dGluZ3MgYWRkIHJpZ2h0IGNsaWNrIGNvbnRleHQgbWVudSBpdGVtcyBmb3IgVGFzayBNYXJrZXIgY29tbWFuZHMuIFRoZSBtZW51IGl0ZW1zIHdpbGwgd29yayBvbiB0aGUgY3VycmVudCBsaW5lIG9yIHdpdGhpbiB0aGUgY3VycmVudCBzZWxlY3Rpb24gaW4gRWRpdGluZyB2aWV3LlwiLFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBuZXcgU2V0dGluZyh0aGlzLmNvbnRhaW5lckVsKVxuICAgICAgICAvLyAgICAgLnNldE5hbWUoXG4gICAgICAgIC8vICAgICAgICAgXCJQcmV2aWV3IC8gTGl2ZSBwcmV2aWV3OiBTaG93IHRoZSBzZWxlY3Rpb24gbWVudSB3aGVuIGEgY2hlY2tib3ggaXMgY2xpY2tlZFwiXG4gICAgICAgIC8vICAgICApXG4gICAgICAgIC8vICAgICAuc2V0RGVzYyhcbiAgICAgICAgLy8gICAgICAgICBcIkRpc3BsYXkgYSBwYW5lbCB0aGF0IGFsbG93cyB5b3UgdG8gc2VsZWN0ICh3aXRoIG1vdXNlIG9yIGtleWJvYXJkKSB0aGUgdmFsdWUgdG8gYXNzaWduIHdoZW4geW91IGNsaWNrIHRoZSB0YXNrLiBUaGUgc2VsZWN0ZWQgdmFsdWUgd2lsbCBkZXRlcm1pbmUgZm9sbG93LW9uIGFjdGlvbnM6IGNvbXBsZXRlLCBjYW5jZWwsIG9yIHJlc2V0LlwiXG4gICAgICAgIC8vICAgICApXG4gICAgICAgIC8vICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG4gICAgICAgIC8vICAgICAgICAgdG9nZ2xlXG4gICAgICAgIC8vICAgICAgICAgICAgIC5zZXRWYWx1ZSh0ZW1wU2V0dGluZ3MucHJldmlld09uQ2xpY2spXG4gICAgICAgIC8vICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHRlbXBTZXR0aW5ncy5wcmV2aWV3T25DbGljayA9IHZhbHVlO1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgdGhpcy50YXNrTWFya2VyLnVwZGF0ZVNldHRpbmdzKHRlbXBTZXR0aW5ncyk7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgLy8gICAgICAgICAgICAgfSlcbiAgICAgICAgLy8gICAgICk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcodGhpcy5jb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiQWRkIG1lbnUgaXRlbSBmb3IgY3JlYXRpbmcgYSB0YXNrXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcbiAgICAgICAgICAgICAgICBcIlRoaXMgbWVudSBpdGVtIHdpbGwgd29yayBpbiBhIHdheSBhcyBzcGVjaWZpZWQgaW4gdGhlIHNlY3Rpb24gXFxcIkNyZWF0ZSB0YXNrc1xcXCIuXCJcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cbiAgICAgICAgICAgICAgICB0b2dnbGVcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRlbXBTZXR0aW5ncy5yaWdodENsaWNrQ3JlYXRlKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wU2V0dGluZ3MucmlnaHRDbGlja0NyZWF0ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrTWFya2VyLnVwZGF0ZVNldHRpbmdzKHRlbXBTZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBuZXcgU2V0dGluZyh0aGlzLmNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJBZGQgbWVudSBpdGVtIGZvciBjb21wbGV0aW5nIGEgdGFza1wiKVxuICAgICAgICAgICAgLnNldERlc2MoXG4gICAgICAgICAgICAgICAgXCJUaGlzIG1lbnUgaXRlbSB3aWxsIHdvcmsgaW4gYSB3YXkgYXMgc3BlY2lmaWVkIGluIHRoZSBzZWN0aW9uIFxcXCJDb21wbGV0ZSB0YXNrc1xcXCIuXCJcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cbiAgICAgICAgICAgICAgICB0b2dnbGVcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRlbXBTZXR0aW5ncy5yaWdodENsaWNrQ29tcGxldGUpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBTZXR0aW5ncy5yaWdodENsaWNrQ29tcGxldGUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFza01hcmtlci51cGRhdGVTZXR0aW5ncyh0ZW1wU2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgbmV3IFNldHRpbmcodGhpcy5jb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiQWRkIG1lbnUgaXRlbSBmb3IgbWFya2luZyBhIHRhc2tcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFxuICAgICAgICAgICAgICAgIFwiVGhpcyBtZW51IGl0ZW0gd2lsbCB3b3JrIGluIGEgd2F5IGFzIHNwZWNpZmllZCBpbiB0aGUgc2VjdGlvbiBcXFwiTWFyayB0YXNrc1xcXCIuXCJcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cbiAgICAgICAgICAgICAgICB0b2dnbGVcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRlbXBTZXR0aW5ncy5yaWdodENsaWNrTWFyaylcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFNldHRpbmdzLnJpZ2h0Q2xpY2tNYXJrID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2tNYXJrZXIudXBkYXRlU2V0dGluZ3ModGVtcFNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcblxuICAgICAgICBuZXcgU2V0dGluZyh0aGlzLmNvbnRhaW5lckVsKVxuICAgICAgICAuc2V0TmFtZShcIkFkZCBtZW51IGl0ZW0gZm9yIGN5Y2xpbmcgYSB0YXNrIChtYWluKVwiKVxuICAgICAgICAuc2V0RGVzYyhcbiAgICAgICAgICAgIFwiVGhpcyBtZW51IGl0ZW0gd2lsbCB3b3JrIGluIGEgd2F5IGFzIHNwZWNpZmllZCBpbiB0aGUgc2VjdGlvbiBcXFwiQ3ljbGUgdGFza3NcXFwiLlwiXG4gICAgICAgIClcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuICAgICAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRlbXBTZXR0aW5ncy5yaWdodENsaWNrQ3ljbGUpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wU2V0dGluZ3MucmlnaHRDbGlja0N5Y2xlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFza01hcmtlci51cGRhdGVTZXR0aW5ncyh0ZW1wU2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKHRoaXMuY29udGFpbmVyRWwpXG4gICAgICAgIC5zZXROYW1lKFwiQWRkIG1lbnUgaXRlbSBmb3IgY3ljbGluZyBhIHRhc2sgcmV2ZXJzZWx5IChtYWluKVwiKVxuICAgICAgICAuc2V0RGVzYyhcbiAgICAgICAgICAgIFwiVGhpcyBtZW51IGl0ZW0gd2lsbCB3b3JrIGluIGEgd2F5IGFzIHNwZWNpZmllZCBpbiB0aGUgc2VjdGlvbiBcXFwiQ3ljbGUgdGFza3NcXFwiLlwiXG4gICAgICAgIClcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuICAgICAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRlbXBTZXR0aW5ncy5yaWdodENsaWNrQ3ljbGVSZXZlcnNlbHkpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wU2V0dGluZ3MucmlnaHRDbGlja0N5Y2xlUmV2ZXJzZWx5ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFza01hcmtlci51cGRhdGVTZXR0aW5ncyh0ZW1wU2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKHRoaXMuY29udGFpbmVyRWwpXG4gICAgICAgIC5zZXROYW1lKFwiQWRkIG1lbnUgaXRlbSBmb3IgY3ljbGluZyBhIHRhc2sgKGxpc3QgMSlcIilcbiAgICAgICAgLnNldERlc2MoXG4gICAgICAgICAgICBcIlRoaXMgbWVudSBpdGVtIHdpbGwgd29yayBpbiBhIHdheSBhcyBzcGVjaWZpZWQgaW4gdGhlIHNlY3Rpb24gXFxcIkN5Y2xlIHRhc2tzXFxcIi5cIlxuICAgICAgICApXG4gICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cbiAgICAgICAgICAgIHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0ZW1wU2V0dGluZ3MucmlnaHRDbGlja0N5Y2xlTGlzdDEpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wU2V0dGluZ3MucmlnaHRDbGlja0N5Y2xlTGlzdDEgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrTWFya2VyLnVwZGF0ZVNldHRpbmdzKHRlbXBTZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICAgIG5ldyBTZXR0aW5nKHRoaXMuY29udGFpbmVyRWwpXG4gICAgICAgIC5zZXROYW1lKFwiQWRkIG1lbnUgaXRlbSBmb3IgY3ljbGluZyBhIHRhc2sgKGxpc3QgMilcIilcbiAgICAgICAgLnNldERlc2MoXG4gICAgICAgICAgICBcIlRoaXMgbWVudSBpdGVtIHdpbGwgd29yayBpbiBhIHdheSBhcyBzcGVjaWZpZWQgaW4gdGhlIHNlY3Rpb24gXFxcIkN5Y2xlIHRhc2tzXFxcIi5cIlxuICAgICAgICApXG4gICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cbiAgICAgICAgICAgIHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0ZW1wU2V0dGluZ3MucmlnaHRDbGlja0N5Y2xlTGlzdDIpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wU2V0dGluZ3MucmlnaHRDbGlja0N5Y2xlTGlzdDIgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrTWFya2VyLnVwZGF0ZVNldHRpbmdzKHRlbXBTZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICAgIG5ldyBTZXR0aW5nKHRoaXMuY29udGFpbmVyRWwpXG4gICAgICAgIC5zZXROYW1lKFwiQWRkIG1lbnUgaXRlbSBmb3IgY3ljbGluZyBhIHRhc2sgKGxpc3QgMylcIilcbiAgICAgICAgLnNldERlc2MoXG4gICAgICAgICAgICBcIlRoaXMgbWVudSBpdGVtIHdpbGwgd29yayBpbiBhIHdheSBhcyBzcGVjaWZpZWQgaW4gdGhlIHNlY3Rpb24gXFxcIkN5Y2xlIHRhc2tzXFxcIi5cIlxuICAgICAgICApXG4gICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cbiAgICAgICAgICAgIHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0ZW1wU2V0dGluZ3MucmlnaHRDbGlja0N5Y2xlTGlzdDMpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wU2V0dGluZ3MucmlnaHRDbGlja0N5Y2xlTGlzdDMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrTWFya2VyLnVwZGF0ZVNldHRpbmdzKHRlbXBTZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBuZXcgU2V0dGluZyh0aGlzLmNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJBZGQgbWVudSBpdGVtIGZvciByZXNldHRpbmcgYSB0YXNrXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcbiAgICAgICAgICAgICAgICBcIlRoZSBtZW51IGl0ZW0gd2lsbCByZXNldCB0aGUgdGFzay5cIlxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuICAgICAgICAgICAgICAgIHRvZ2dsZVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGVtcFNldHRpbmdzLnJpZ2h0Q2xpY2tSZXNldFRhc2spXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBTZXR0aW5ncy5yaWdodENsaWNrUmVzZXRUYXNrID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2tNYXJrZXIudXBkYXRlU2V0dGluZ3ModGVtcFNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIG5ldyBTZXR0aW5nKHRoaXMuY29udGFpbmVyRWwpXG4gICAgICAgIC5zZXROYW1lKFwiQWRkIG1lbnUgaXRlbSBmb3IgYXBwZW5kaW5nIHRleHQgdG8gYSBsaW5lICh0ZXh0IDEpXCIpXG4gICAgICAgIC5zZXREZXNjKFxuICAgICAgICAgICAgXCJUaGlzIG1lbnUgaXRlbSB3aWxsIHdvcmsgaW4gYSB3YXkgYXMgc3BlY2lmaWVkIGluIHRoZSBzZWN0aW9uIFxcXCJBcHBlbmQgdGV4dFxcXCIuXCJcbiAgICAgICAgKVxuICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG4gICAgICAgICAgICB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGVtcFNldHRpbmdzLnJpZ2h0Q2xpY2tBcHBlbmQpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wU2V0dGluZ3MucmlnaHRDbGlja0FwcGVuZCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2tNYXJrZXIudXBkYXRlU2V0dGluZ3ModGVtcFNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgICAgICBuZXcgU2V0dGluZyh0aGlzLmNvbnRhaW5lckVsKVxuICAgICAgICAuc2V0TmFtZShcIkFkZCBtZW51IGl0ZW0gZm9yIGFwcGVuZGluZyB0ZXh0IHRvIGEgbGluZSAodGV4dCAyKVwiKVxuICAgICAgICAuc2V0RGVzYyhcbiAgICAgICAgICAgIFwiVGhpcyBtZW51IGl0ZW0gd2lsbCB3b3JrIGluIGEgd2F5IGFzIHNwZWNpZmllZCBpbiB0aGUgc2VjdGlvbiBcXFwiQXBwZW5kIHRleHRcXFwiLlwiXG4gICAgICAgIClcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuICAgICAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRlbXBTZXR0aW5ncy5yaWdodENsaWNrQXBwZW5kVGV4dDIpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wU2V0dGluZ3MucmlnaHRDbGlja0FwcGVuZFRleHQyID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFza01hcmtlci51cGRhdGVTZXR0aW5ncyh0ZW1wU2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKHRoaXMuY29udGFpbmVyRWwpXG4gICAgICAgIC5zZXROYW1lKFwiQWRkIG1lbnUgaXRlbSBmb3IgYXBwZW5kaW5nIHRleHQgdG8gYSBsaW5lICh0ZXh0IDMpXCIpXG4gICAgICAgIC5zZXREZXNjKFxuICAgICAgICAgICAgXCJUaGlzIG1lbnUgaXRlbSB3aWxsIHdvcmsgaW4gYSB3YXkgYXMgc3BlY2lmaWVkIGluIHRoZSBzZWN0aW9uIFxcXCJBcHBlbmQgdGV4dFxcXCIuXCJcbiAgICAgICAgKVxuICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG4gICAgICAgICAgICB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGVtcFNldHRpbmdzLnJpZ2h0Q2xpY2tBcHBlbmRUZXh0MylcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBTZXR0aW5ncy5yaWdodENsaWNrQXBwZW5kVGV4dDMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrTWFya2VyLnVwZGF0ZVNldHRpbmdzKHRlbXBTZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcodGhpcy5jb250YWluZXJFbClcbiAgICAgICAgLnNldE5hbWUoXCJBZGQgbWVudSBpdGVtIGZvciBhcHBlbmRpbmcgdGV4dCBhdXRvbWF0aWNhbGx5XCIpXG4gICAgICAgIC5zZXREZXNjKFxuICAgICAgICAgICAgXCJUaGlzIG1lbnUgaXRlbSB3aWxsIHdvcmsgaW4gYSB3YXkgYXMgc3BlY2lmaWVkIGluIHRoZSBzZWN0aW9uIFxcXCJBcHBlbmQgdGV4dCBhdXRvbWF0aWNhbGx5XFxcIi5cIlxuICAgICAgICApXG4gICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cbiAgICAgICAgICAgIHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0ZW1wU2V0dGluZ3MucmlnaHRDbGlja0FwcGVuZFRleHRBdXRvKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcFNldHRpbmdzLnJpZ2h0Q2xpY2tBcHBlbmRUZXh0QXV0byA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2tNYXJrZXIudXBkYXRlU2V0dGluZ3ModGVtcFNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBuZXcgU2V0dGluZyh0aGlzLmNvbnRhaW5lckVsKVxuICAgICAgICAvLyAgICAgLnNldE5hbWUoXCJBZGQgbWVudSBpdGVtIGZvciBjb21wbGV0aW5nIGFsbCB0YXNrc1wiKVxuICAgICAgICAvLyAgICAgLnNldERlc2MoXG4gICAgICAgIC8vICAgICAgICAgXCJBZGQgYW4gaXRlbSB0byB0aGUgcmlnaHQtY2xpY2sgbWVudSBpbiBlZGl0IG1vZGUgdG8gbWFyayBhbGwgaW5jb21wbGV0ZSB0YXNrcyBpbiB0aGUgY3VycmVudCBkb2N1bWVudCBjb21wbGV0ZS5cIlxuICAgICAgICAvLyAgICAgKVxuICAgICAgICAvLyAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuICAgICAgICAvLyAgICAgICAgIHRvZ2dsZVxuICAgICAgICAvLyAgICAgICAgICAgICAuc2V0VmFsdWUodGVtcFNldHRpbmdzLnJpZ2h0Q2xpY2tUb2dnbGVBbGwpXG4gICAgICAgIC8vICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHRlbXBTZXR0aW5ncy5yaWdodENsaWNrVG9nZ2xlQWxsID0gdmFsdWU7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICB0aGlzLnRhc2tNYXJrZXIudXBkYXRlU2V0dGluZ3ModGVtcFNldHRpbmdzKTtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAvLyAgICAgICAgICAgICB9KVxuICAgICAgICAvLyAgICAgKTtcblxuICAgICAgICAvLyBuZXcgU2V0dGluZyh0aGlzLmNvbnRhaW5lckVsKVxuICAgICAgICAvLyAgICAgLnNldE5hbWUoXCJBZGQgbWVudSBpdGVtIGZvciByZXNldHRpbmcgYWxsIHRhc2tzXCIpXG4gICAgICAgIC8vICAgICAuc2V0RGVzYyhcbiAgICAgICAgLy8gICAgICAgICBcIkFkZCBhbiBpdGVtIHRvIHRoZSByaWdodC1jbGljayBtZW51IHRvIHJlc2V0IGFsbCBjb21wbGV0ZWQgKG9yIGNhbmNlbGVkKSB0YXNrcy5cIlxuICAgICAgICAvLyAgICAgKVxuICAgICAgICAvLyAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuICAgICAgICAvLyAgICAgICAgIHRvZ2dsZVxuICAgICAgICAvLyAgICAgICAgICAgICAuc2V0VmFsdWUodGVtcFNldHRpbmdzLnJpZ2h0Q2xpY2tSZXNldEFsbClcbiAgICAgICAgLy8gICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgdGVtcFNldHRpbmdzLnJpZ2h0Q2xpY2tSZXNldEFsbCA9IHZhbHVlO1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgdGhpcy50YXNrTWFya2VyLnVwZGF0ZVNldHRpbmdzKHRlbXBTZXR0aW5ncyk7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgLy8gICAgICAgICAgICAgfSlcbiAgICAgICAgLy8gICAgICk7XG5cbiAgICAgICAgLy8gbmV3IFNldHRpbmcodGhpcy5jb250YWluZXJFbClcbiAgICAgICAgLy8gICAgIC5zZXROYW1lKFwiQWRkIG1lbnUgaXRlbSBmb3IgbW92aW5nIGFsbCBjb21wbGV0ZWQgdGFza3NcIilcbiAgICAgICAgLy8gICAgIC5zZXREZXNjKFxuICAgICAgICAvLyAgICAgICAgIFwiQWRkIGFuIGl0ZW0gdG8gdGhlIHJpZ2h0LWNsaWNrIG1lbnUgdG8gbW92ZSBhbGwgY29tcGxldGVkIChvciBjYW5jZWxlZCkgdGFza3MuXCJcbiAgICAgICAgLy8gICAgIClcbiAgICAgICAgLy8gICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cbiAgICAgICAgLy8gICAgICAgICB0b2dnbGVcbiAgICAgICAgLy8gICAgICAgICAgICAgLnNldFZhbHVlKHRlbXBTZXR0aW5ncy5yaWdodENsaWNrTW92ZSlcbiAgICAgICAgLy8gICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgdGVtcFNldHRpbmdzLnJpZ2h0Q2xpY2tNb3ZlID0gdmFsdWU7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICB0aGlzLnRhc2tNYXJrZXIudXBkYXRlU2V0dGluZ3ModGVtcFNldHRpbmdzKTtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAvLyAgICAgICAgICAgICB9KVxuICAgICAgICAvLyAgICAgKTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgVGFza01hcmtlciB9IGZyb20gXCIuL3Rhc2ttYXJrZXItVGFza01hcmtlclwiO1xuXG5leHBvcnQgZnVuY3Rpb24gcHJvbXB0Rm9yTWFyayhcbiAgICBhcHA6IEFwcCxcbiAgICB0YXNrTWFya2VyOiBUYXNrTWFya2VyXG4pOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBUYXNrTWFya01vZGFsKGFwcCwgdGFza01hcmtlcik7XG5cbiAgICAgICAgbW9kYWwub25DbG9zZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUobW9kYWwuY2hvc2VuTWFyayk7XG4gICAgICAgIH07XG5cbiAgICAgICAgbW9kYWwub3BlbigpO1xuICAgIH0pO1xufVxuXG5leHBvcnQgY2xhc3MgVGFza01hcmtNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICB0YXNrTWFya2VyOiBUYXNrTWFya2VyO1xuICAgIGNob3Nlbk1hcms6IHN0cmluZztcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgdGFza01hcmtlcjogVGFza01hcmtlcikge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnRhc2tNYXJrZXIgPSB0YXNrTWFya2VyO1xuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmlkID0gXCJ0YXNrbWFya2VyLW1vZGFsXCI7XG4gICAgfVxuXG4gICAgb25PcGVuKCk6IHZvaWQge1xuICAgICAgICBjb25zdCBzZWxlY3RvciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdihcbiAgICAgICAgICAgIFwidGFza21hcmtlci1zZWxlY3RvciBtYXJrZG93bi1wcmV2aWV3LXZpZXdcIlxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGNvbXBsZXRlZExpc3QgPSBzZWxlY3Rvci5jcmVhdGVFbChcInVsXCIpO1xuICAgICAgICBjb21wbGV0ZWRMaXN0LmFkZENsYXNzKFwiY29udGFpbnMtdGFzay1saXN0XCIpO1xuICAgICAgICB0aGlzLmFkZFRhc2tWYWx1ZXMoXG4gICAgICAgICAgICBjb21wbGV0ZWRMaXN0LFxuICAgICAgICAgICAgdGhpcy50YXNrTWFya2VyLmluaXRTZXR0aW5ncy5jb21wbGV0ZWRUYXNrcyxcbiAgICAgICAgICAgIHRydWVcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBsaXN0ID0gc2VsZWN0b3IuY3JlYXRlRWwoXCJ1bFwiKTtcbiAgICAgICAgbGlzdC5hZGRDbGFzcyhcImNvbnRhaW5zLXRhc2stbGlzdFwiKTtcbiAgICAgICAgdGhpcy5hZGRUYXNrVmFsdWVzKFxuICAgICAgICAgICAgbGlzdCxcbiAgICAgICAgICAgIHRoaXMudGFza01hcmtlci5zZXR0aW5ncy5pbmNvbXBsZXRlVGFza1ZhbHVlcyxcbiAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgbGlzdFJvdzIgPSBzZWxlY3Rvci5jcmVhdGVFbChcInVsXCIpO1xuICAgICAgICBsaXN0Um93Mi5hZGRDbGFzcyhcImNvbnRhaW5zLXRhc2stbGlzdFwiKTtcbiAgICAgICAgdGhpcy5hZGRUYXNrVmFsdWVzKFxuICAgICAgICAgICAgbGlzdFJvdzIsXG4gICAgICAgICAgICB0aGlzLnRhc2tNYXJrZXIuc2V0dGluZ3MuaW5jb21wbGV0ZVRhc2tWYWx1ZXNSb3cyLFxuICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBmb290ZXIgPSBzZWxlY3Rvci5jcmVhdGVFbChcIm5hdlwiKTtcbiAgICAgICAgY29uc3QgZXNjID0gZm9vdGVyLmNyZWF0ZVNwYW4oKTtcbiAgICAgICAgZXNjLmlubmVySFRNTCA9IFwiPGI+ZXNjPC9iPiB0byBkaXNtaXNzXCI7XG4gICAgICAgIGNvbnN0IGJrc3AgPSBmb290ZXIuY3JlYXRlU3BhbigpO1xuICAgICAgICBia3NwLmlubmVySFRNTCA9IFwiPGI+YmtzcDwvYj4gdG8gcmVtb3ZlIDxjb2RlPltdPC9jb2RlPlwiO1xuXG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIGNvbnN0IGtleUxpc3RlbmVyID0gZnVuY3Rpb24gKGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XG4gICAgICAgICAgICBzZWxmLmNob3Nlbk1hcmsgPSBldmVudC5rZXk7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBzZWxmLmNsb3NlKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2NvcGUucmVnaXN0ZXIoW10sIG51bGwsIGtleUxpc3RlbmVyKTtcbiAgICAgICAgdGhpcy5zY29wZS5yZWdpc3RlcihbXCJTaGlmdFwiXSwgbnVsbCwga2V5TGlzdGVuZXIpO1xuICAgIH1cblxuICAgIGFkZFRhc2tWYWx1ZXMoXG4gICAgICAgIGxpc3Q6IEhUTUxVTGlzdEVsZW1lbnQsXG4gICAgICAgIGNob2ljZXM6IHN0cmluZyxcbiAgICAgICAgbWFya0NvbXBsZXRlOiBib29sZWFuXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgICBmb3IgKGNvbnN0IGNoYXJhY3RlciBvZiBjaG9pY2VzKSB7XG4gICAgICAgICAgICBjb25zdCBsaSA9IGxpc3QuY3JlYXRlRWwoXCJsaVwiLCB7XG4gICAgICAgICAgICAgICAgY2xzOlxuICAgICAgICAgICAgICAgICAgICBcInRhc2stbGlzdC1pdGVtIFwiICsgKGNoYXJhY3RlciA9PSBcIiBcIiA/IFwiXCIgOiBcIiBpcy1jaGVja2VkXCIpLFxuICAgICAgICAgICAgICAgIGF0dHI6IHtcbiAgICAgICAgICAgICAgICAgICAgXCJkYXRhLXRhc2tcIjogY2hhcmFjdGVyLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmNob3Nlbk1hcmsgPSBjaGFyYWN0ZXI7XG4gICAgICAgICAgICAgICAgc2VsZi5jbG9zZSgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gbGkuY3JlYXRlRWwoXCJpbnB1dFwiLCB7XG4gICAgICAgICAgICAgICAgY2xzOiBcInRhc2stbGlzdC1pdGVtLWNoZWNrYm94XCIsXG4gICAgICAgICAgICAgICAgYXR0cjoge1xuICAgICAgICAgICAgICAgICAgICBpZDogXCJ0YXNrLWxpc3QtaXRlbS1jaGVja2JveC1cIiArIGNoYXJhY3RlcixcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJjaGVja2JveFwiLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogXCJwb2ludGVyLWV2ZW50czogbm9uZTtcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY2hhcmFjdGVyICE9IFwiIFwiKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiLCBcIlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxpLmNyZWF0ZUVsKFwic3BhblwiLCB7XG4gICAgICAgICAgICAgICAgdGV4dDogY2hhcmFjdGVyID09IFwiIFwiID8gXCJcdTI0MjNcIiA6IGNoYXJhY3RlcixcbiAgICAgICAgICAgICAgICBhdHRyOiB7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBcInBvaW50ZXItZXZlbnRzOiBub25lO1wiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uQ2xvc2UoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IEFwcCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgQVBJIH0gZnJvbSBcIi4vQHR5cGVzL2FwaVwiO1xuaW1wb3J0IHsgVGFza01hcmtlciB9IGZyb20gXCIuL3Rhc2ttYXJrZXItVGFza01hcmtlclwiO1xuaW1wb3J0IHsgcHJvbXB0Rm9yTWFyayB9IGZyb20gXCIuL3Rhc2ttYXJrZXItVGFza01hcmtNb2RhbFwiO1xuXG5leHBvcnQgY2xhc3MgVGFza01hcmtlckFwaSBpbXBsZW1lbnRzIEFQSSB7XG4gICAgYXBwOiBBcHA7XG4gICAgdGFza01hcmtlcjogVGFza01hcmtlcjtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCB0YXNrTWFya2VyOiBUYXNrTWFya2VyKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLnRhc2tNYXJrZXIgPSB0YXNrTWFya2VyO1xuICAgIH1cblxuICAgIGdldENvbXBsZXRlZFRhc2tWYWx1ZXMoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFza01hcmtlci5pbml0U2V0dGluZ3MuY29tcGxldGVkVGFza3M7XG4gICAgfVxuXG4gICAgZ2V0SW5jb21wbGV0ZVRhc2tWYWx1ZXMoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFza01hcmtlci5zZXR0aW5ncy5pbmNvbXBsZXRlVGFza1ZhbHVlcztcbiAgICB9XG5cbiAgICBnZXRNYXJrKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIHJldHVybiBwcm9tcHRGb3JNYXJrKHRoaXMuYXBwLCB0aGlzLnRhc2tNYXJrZXIpO1xuICAgIH1cblxuICAgIGlzQ29tcGxldGUodmFsdWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICAvLyBUaGlzIG1heSBpbmNsdWRlIGNhbmNlbGxlZCB0YXNrcyAodGhvc2UgYXJlIHN0aWxsIFwiY29tcGxldGVcIilcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29tcGxldGVkVGFza1ZhbHVlcygpLmNvbnRhaW5zKHZhbHVlKTtcbiAgICB9XG4gICAgaXNDYW5jZWxlZCh2YWx1ZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB2YWx1ZSA9PT0gXCItXCI7XG4gICAgfVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7QUNBQSxJQUFBQSxtQkFVTzs7O0FDVlAsc0JBQTRDO0FBTXJDLElBQU0sYUFBTixNQUFpQjtBQUFBLEVBV3BCLFlBQW9CLEtBQVU7QUFBVjtBQUNoQixTQUFLLE1BQU07QUFDWCxTQUFLLGNBQWMsSUFBSSxPQUFPLDRCQUE0QjtBQUMxRCxTQUFLLGNBQWMsSUFBSSxPQUFPLDhCQUE4QjtBQUM1RCxTQUFLLGFBQWEsSUFBSSxPQUFPLG9CQUFvQjtBQUNqRCxTQUFLLFdBQVcsSUFBSSxPQUFPLDRCQUE0QjtBQUN2RCxTQUFLLGVBQWUsSUFBSSxPQUFPLGFBQWE7QUFDNUMsU0FBSyxZQUFZ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
